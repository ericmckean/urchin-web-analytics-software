<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body><table id="top_location_line" width="100%"><table id="top_location_line" width="100%"><tr width="100%"><td><a href="http://www.urchin.com"><img border="0" src="../images/google_sm.gif" width="135" height="41"></a></td><td width="100%"><span id="top_line" style="width: 100%; float: left; clear: both; border-bottom: 1px solid #CCC;"><span id="top_title" style="float: left; margin-top: 10px;"><b>Help Center</b></span></td></tr></table>
<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en">
<p class="line867"><strong>Formats de journaux personnalisés</strong> <p class="line867"><strong>Introduction</strong> <p class="line874">Urchin peut traiter pratiquement tous les formats de fichier journal. Si vous lui fournissez toutes les informations nécessaires concernant le format du journal, Urchin est en mesure de lire et d'analyser des données brutes selon votre configuration. Cet article décrit la procédure détaillée permettant de créer un format de journal personnalisé. Vous pourrez ensuite sélectionner dans l'interface d'administration les formats personnalisés ainsi créés, afin de les associer à vos fichiers journaux.  <p class="line874">Notez que certaines données sont obligatoires pour la création de rapports spécifiques. Assurez-vous que votre journal inclut au moins les champs nécessaires à Urchin pour pouvoir procéder au traitement. Si vous ne connaissez pas les champs à inclure, accédez au Centre de documentation et consultez les articles intitulés Fichiers journaux, Journalisation et Autres serveurs Web de la section Administration Urchin. <p class="line867"><strong>Création de formats personnalisés</strong> <p class="line874">Pour créer un format de journal personnalisé, vous devez créer un fichier définissant ce format dans le répertoire suivant : <pre>   urchin install dir]/lib/custom/logformats/
</pre><ul><li style="list-style-type:none">dossier Un fichier modèle nommé 'custom.lf' est à votre disposition. Vous pouvez créer plusieurs fichiers personnalisés portant tous l'extension '.lf' de sorte qu'Urchin puisse les reconnaître. Les formats de journaux intégrés par défaut, tels que apache, w3c, netscape, etc., se trouvent dans le répertoire : </li></ul><p class="line867"><pre>   urchin install dir]/lib/reporting/logformats/
</pre><p class="line874">Chacun des répertoires mentionnés ci-dessus comprend un fichier fieldlist.txt répertoriant les champs disponibles. Le répertoire custom contient une liste de champs personnalisés et le répertoire reporting contient une liste de champs standard. Les formats de journaux personnalisés peuvent faire référence à des champs provenant de ces deux listes par le biais des numéros identifiants associés. Une fois votre format personnalisé créé, vous pouvez le sélectionner dans l'interface d'administration. Voici les différentes étapes de la création d'un format personnalisé : <p class="line867"><strong>Étape 1 : Copiez le modèle.</strong> Dans le répertoire 'lib/custom/logformats' de la distribution Urchin, faites une copie du fichier 'custom.lf'. N'incluez aucun espace dans le nom du nouveau fichier qui doit porter l'extension '.lf'. <p class="line867"><strong>Étape 2 : Définissez l'ordre d'affichage.</strong> Modifiez le fichier créé à l'étape précédente. Ce dernier contient de nombreuses informations utiles concernant chaque variable. La première étape consiste à définir la variable <tt class="backtick">PrimaryPositions</tt>. Il s'agit d'une liste séparée par des virgules répertoriant les champs (désignés par leur numéro identifiant) à utiliser dans le format de journaux, ainsi que leur position relative. Référez-vous aux fichiers fieldlist.txt des deux répertoires mentionnés plus haut pour trouver les identifiants qui vous intéressent. Si vous utilisez un format personnalisé de date et d'heure qui est différent des formats Apache et IIS, incluez respectivement les champs 16 et 17. Indiquez uniquement le champ 16, si la date et l'heure figurent dans le même champ. <p class="line867"><strong>Étape 3 : Contrôlez le séparateur de champs.</strong> Vérifiez que le séparateur de champs défini dans la variable <tt class="backtick">FieldSeparator1</tt> est identique à celui qui sépare vos champs. Saisissez \s pour un espace et \t pour une tabulation. <p class="line867"><strong>4e étape : Le champ relatif à l'état HTTP est-il disponible ?</strong> Si vous disposez d'un champ concernant l'état HTTP, conservez la valeur YES pour la variable <tt class="backtick">StatusRequired</tt>. Cela permettra de distinguer les appels de fichier réussis de ceux qui ont échoué. Si votre journal ne fait pas mention de l'état, définissez cette variable sur NO, de sorte que tous les appels de fichier soient considérés comme corrects. <p class="line867"><strong>Étape 5 : Utilisez-vous un format de date ou d'heure personnalisé ?</strong> Si tel est le cas, indiquez le champ 16 pour la variable <tt class="backtick">CustomDateFormat</tt> et le champ 17 pour la variable <tt class="backtick">CustomTimeFormat</tt>. Ce format est spécifié à l'aide des variables % définies dans la rubrique <a href="Time_Formats.html">Formats de date ou d'heure personnalisés</a>. <p class="line867"><strong>Étape 6 : Contrôlez les autres variables.</strong> La majorité des autres variables conviennent à la plupart des formats de journaux personnalisés, mais lisez tout de même les commentaires associés à chaque variable dans le fichier, afin de déterminer si elles s'appliquent à votre situation. <p class="line867"><strong>Étape 7 : Disposez-vous de champs de calcul personnalisés ?</strong> Outre le format, vous pouvez définir des champs de calcul personnalisés dans le fichier de spécification. Vous trouverez un exemple commenté au bas du fichier. Le champ de calcul personnalisé fonctionne de la même manière qu'un filtre avancé dans la section de filtrage, sauf que ce type de champ est traité en premier. Veuillez consulter l'article sur les champs de calcul personnalisés pour plus d'informations. <p class="line874">Enregistrez ce fichier. Vous pouvez alors associer le format créé à un fichier journal dans l'interface d'administration. Ce format apparaît automatiquement parmi les options du menu déroulant permettant de choisir un format de journaux.  </div><div id="pagebottom"></div>
</div>


<div id="footer" style="clear: both; margin: 0; padding: 0; border-bottom:1px solid #CCC;"></div><div id="copyright" style="font-size: 70%; text-align: center;">&copy;2010 Google</div>
</body></html>