<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body><table id="top_location_line" width="100%"><table id="top_location_line" width="100%"><tr width="100%"><td><a href="http://www.urchin.com"><img border="0" src="../images/google_sm.gif" width="135" height="41"></a></td><td width="100%"><span id="top_line" style="width: 100%; float: left; clear: both; border-bottom: 1px solid #CCC;"><span id="top_title" style="float: left; margin-top: 10px;"><b>Help Center</b></span></td></tr></table>
<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en">
<p class="line867"><strong>Traitement des journaux Apache avec plusieurs hôtes virtuels</strong> <p class="line867"><strong>Introduction</strong> <p class="line874">Certaines organisations font appel à un serveur Web Apache qui utilise plusieurs hôtes virtuels et enregistre, dans un journal unique, les données relatives à l'ensemble des sites Web hébergés. En termes d'efficacité, il est préférable qu'Urchin traite un journal par hôte virtuel, mais vous pouvez configurer les profils associés à vos hôtes virtuels de sorte qu'ils s'appuient sur un journal commun à tous les hôtes. <p class="line867"><strong>Procédure</strong> <p class="line867"><strong>Étape 1 :</strong> vérifiez que votre serveur Web Apache est configuré de manière à créer des journaux dont le format est compatible avec Urchin. Assurez-vous notamment que les champs de journal ci-dessous sont enregistrés dans l'ordre suivant : <ol type="1"><li>Hôte distant [%h] </li><li>Hôte demandé [%v] </li><li>Nom d'utilisateur [%u] </li><li>Date et heure (NCSA) [%t] </li><li>Demande (NCSA) [%r] </li><li><p class="line862">État [%&gt;s] </li><li>Octets [%b] </li><li>URL de provenance [%{Referer}i] </li><li>User-Agent [%{User-Agent}i] </li><li>Cookie (si vous enregistrez les cookies, pour l'UTM par exemple) [%{Cookie}i] </li></ol><p class="line867"><strong>Étape 2 :</strong> dans l'interface d'administration d'Urchin, ouvrez la page Configuration -&gt; Profils Urchin -&gt; Gestionnaire de journaux, puis ajoutez une source de journal pointant vers votre fichier journal unique. Sélectionnez "auto" comme Format du journal. <p class="line867"><strong>Étape 3 :</strong> dans la section Configuration -&gt; Profils Urchin, créez un Profil par hôte virtuel. Dans l'assistant d'ajout de profil, sélectionnez "Ajouter une source de journal existante" pour ajouter une Source du journal pour chaque profil précédemment configuré. <p class="line867"><strong>Étape 4 :</strong> accédez maintenant au Gestionnaire de filtres et cliquez sur le bouton Ajouter afin de créer un filtre. Sur l'écran "Assistant de filtres : Paramètres", sélectionnez le Type de filtre "Inclure UNIQUEMENT la règle", le Champ de filtrage "cs_host(RAW)", puis saisissez le nom d'hôte virtuel dans le champ Règle de filtrage. Attribuez ensuite ce filtre au profil correspondant. <p class="line867"><strong>Étape 5 :</strong> répétez les étapes 3 et 4 pour chaque hôte virtuel. <p class="line867"><strong>Considérations</strong> <p class="line874">Cette méthode s'avère pratique pour obtenir des rapports sur plusieurs hôtes virtuels, mais elle oblige Urchin à retraiter entièrement le fichier journal pour chaque hôte virtuel. La surcharge de travail devient significative lorsque le fichier journal est volumineux et cela nuit aux performances d'Urchin. Par conséquent, nous vous recommandons vivement de créer des fichiers journaux distincts pour chacun de vos hôtes virtuels. <p class="line874">Cette procédure rédigée spécialement pour les serveurs Apache peut s'appliquer de façon similaire à des serveurs Web utilisant un format de journal de type NCSA. <p class="line874">Pour le moment, Urchin n'est pas en mesure de détecter les nouveaux hôtes virtuels et de configurer automatiquement les profils correspondants. Tous ces profils doivent être configurés par vos soins.  </div><div id="pagebottom"></div>
</div>


<div id="footer" style="clear: both; margin: 0; padding: 0; border-bottom:1px solid #CCC;"></div><div id="copyright" style="font-size: 70%; text-align: center;">&copy;2010 Google</div>
</body></html>