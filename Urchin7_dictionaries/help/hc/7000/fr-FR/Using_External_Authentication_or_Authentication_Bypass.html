<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body><table id="top_location_line" width="100%"><table id="top_location_line" width="100%"><tr width="100%"><td><a href="http://www.urchin.com"><img border="0" src="../images/google_sm.gif" width="135" height="41"></a></td><td width="100%"><span id="top_line" style="width: 100%; float: left; clear: both; border-bottom: 1px solid #CCC;"><span id="top_title" style="float: left; margin-top: 10px;"><b>Help Center</b></span></td></tr></table>
<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en">
<p class="line867"><strong>Authentification externe ou contournement de l'authentification</strong> <p class="line867"><strong>Présentation</strong> <p class="line874">Par défaut, l'authentification Urchin est réalisée lorsque le contrôleur de session Urchin (session.cgi) appelle le binaire "auth" situé dans le répertoire "bin" de l'installation. Ce binaire envoie une requête à la base de données de configuration et compare le nom d'utilisateur et le mot de passe fournis avec ceux enregistrés dans la configuration. Un code de sortie est alors envoyé au contrôleur de session pour indiquer la réussite ou l'échec de l'opération. Vous pouvez changer l'emplacement du binaire d'authentification en modifiant votre configuration. Cette conception modulaire permet aux administrateurs d'appeler un programme d'authentification externe à la place du binaire par défaut (auth). <p class="line867"><img alt="Using_External_Authentication" src="../images/Using_External_Authentication.jpg" title="Using_External_Authentication" /> <p class="line874">Dans le schéma ci-dessus, le programme d'authentification externe peut remplir toutes les fonctions d'authentification voulues, notamment le protocole "LDAP" et autres appels de base de données. Une simple modification d'Urchin vous permettra d'utiliser une autre forme d'authentification, à condition que votre programme puisse être exécuté par le même utilisateur que celui associé à l'exécution de "urchinwebd" (le serveur Web Apache d'Urchin) et qu'il respecte certaines obligations d'entrée/sortie. <p class="line867"><strong>Définition de la procédure d'authentification</strong> <p class="line874">Pour définir la procédure d'authentification que le contrôleur de session doit appeler, modifiez le fichier "etc/session.conf" situé dans l'installation d'Urchin. Vous pouvez ajuster certains paramètres de ce fichier relatifs au fonctionnement du contrôleur de session, notamment la procédure d'authentification qu'il doit appeler. Modifiez la ligne suivante : <pre>    AUTHENTICATION: ../bin/auth 
</pre><p class="line874">Remplacez "../bin/auth" par le chemin d'accès à votre procédure d'authentification. Veillez à ce que cette dernière soit exécutable par le même utilisateur que celui avec lequel "urchinwebd" fonctionne. <p class="line867"><strong>Obligations d'entrée/sortie</strong> <p class="line874">Lorsque le contrôleur de session appelle la procédure d'authentification, il transmet le nom d'utilisateur, le mot de passe et l'adresse IP distante de l'utilisateur via les arguments d'une ligne de commande comme suit : <pre>    argv[1] = username
    argv[2] = password
    argv[3] = remote_addr 
</pre><p class="line874">La procédure d'authentification externe peut choisir d'ignorer tout ou partie de ces paramètres. Toutefois, les procédures d'authentification standard prennent en compte au moins les deux premiers paramètres. Lorsqu'une ou plusieurs authentifications sont effectuées, la procédure fournit un code égal à zéro pour indiquer une réussite et à moins un pour indiquer un échec. <pre>    Exit Code
     0 = successful authentication
    -1 = authentication failed 
</pre><p class="line874">L'interface d'authentification ci-dessus permet aux administrateurs de personnaliser facilement leurs procédures de validation des identifiants utilisateur. <p class="line867"><strong>Contournement de l'authentification</strong> <p class="line874">Les techniques décrites plus haut vous permettent de remplacer volontairement l'authentification Urchin. Mais lorsque le fournisseur d'hébergement souhaite utiliser l'ensemble du système Urchin pour contrôler les utilisateurs et les groupes, alors que les utilisateurs sont déjà identifiés au moment où ils atteignent Urchin, le contournement de l'authentification peut être envisagé pour éviter une double connexion. Si l'hôte est en mesure de certifier que les accès au système Urchin sont contrôlés via un portail d'authentification et que le nom d'utilisateur ne peut être altéré, l'hôte peut alors passer outre l'authentification en appliquant la technique ci-dessous. <p class="line874">Pour contourner l'authentification, créez une procédure d'authentification externe factice qui retourne systématiquement un zéro. Par exemple, en langage perl, ce code peut se présenter comme suit : <pre>    #!/usr/bin/perl
    exit(0); 
</pre><p class="line874">Pointez le contrôleur de session vers cette procédure d'authentification factice en modifiant le fichier "etc/session.conf" comme décrit ci-dessus. Il suffit ensuite de fournir un lien du type : <pre>    http://hostname:9999/session.cgi?action=login&amp;user=paul 
</pre><p class="line874">Modifiez ce lien de sorte qu'il pointe vers votre nom d'hôte et votre port. Modifiez également l'utilisateur afin de désigner le nom d'utilisateur ou la variable de votre choix. Par la suite, la procédure factice approuvera automatiquement cet identifiant de connexion. Faites preuve de prudence lorsque vous utilisez cette méthode, afin d'éviter tout problème de sécurité. <p class="line867"><strong>Remarque aux utilisateurs de Windows</strong> <p class="line874">Pour obtenir un fonctionnement similaire sous Windows, où perl n'est pas installé, utilisez un simple binaire noauth.exe disponible dans la zone consacrée aux Scripts d'aide sur le site Web de l'Assistance Urchin. Ce binaire comprend une instruction vide et renvoie simplement un état de réussite lorsqu'il est appelé. Ayez bien conscience des risques que comporte cette solution en termes de sécurité avant de la mettre en œuvre. </div><div id="pagebottom"></div>
</div>


<div id="footer" style="clear: both; margin: 0; padding: 0; border-bottom:1px solid #CCC;"></div><div id="copyright" style="font-size: 70%; text-align: center;">&copy;2010 Google</div>
</body></html>