<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body><table id="top_location_line" width="100%"><table id="top_location_line" width="100%"><tr width="100%"><td><a href="http://www.urchin.com"><img border="0" src="../images/google_sm.gif" width="135" height="41"></a></td><td width="100%"><span id="top_line" style="width: 100%; float: left; clear: both; border-bottom: 1px solid #CCC;"><span id="top_title" style="float: left; margin-top: 10px;"><b>Help Center</b></span></td></tr></table>
<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en">
<p class="line867"><strong>Utilisation de l'UTM avec des alias de domaine</strong> <p class="line867"><strong>Présentation</strong> <p class="line874">Les cookies étant des objets basés sur le domaine, il existe certains points importants à respecter lorsqu'un site possède plusieurs domaines. Un cookie associé au domaine "monsite.com" sera également attribué à tous les sous-domaines tels que "www.monsite.com". En revanche, ce cookie ne sera pas attribué à "monsite.net" ou à tout autre domaine racine différent. <p class="line874">Si votre site comprend un seul domaine correspondant à "monsite.com" et "www.monsite.com", suivez la procédure standard pour installer l'UTM. Toutefois, si votre site utilise un ou plusieurs alias de domaine, il est conseillé de rediriger le trafic des alias vers votre site principal. Ainsi, le suivi des visiteurs par l'UTM sera configuré sur le domaine principal et tous les visiteurs seront suivis de manière cohérente. <p class="line874">Si nous ne procédons pas de cette manière, un même visiteur peut apparaître deux fois s'il accède au site via deux domaines distincts. Les instructions suivantes fournissent un exemple de redirection des alias de domaine vers le domaine principal sur des serveurs Apache et IIS. <p class="line867"><strong>Redirection d'alias sur Apache</strong> <p class="line862">Si vous utilisez un serveur Web Apache, il est très facile de modifier la configuration afin de rediriger tout le trafic provenant de l'un des alias vers le site principal. Pour cela, vous pouvez créer deux entrées VirtualHost. La première correspondra au domaine principal et inclura votre configuration normale et la seconde entrée VirtualHost, dédiée à tous les alias, sera redirigée vers le site principal. Exemple : <p class="line867"><pre>#---primary virtualhost
&lt;VirtualHost 1.2.3.4&gt;
Servername www.monsite.com
Serveralias monsite.com
...
&lt;/VirtualHost&gt;
#---second virtualhost
&lt;VirtualHost 1.2.3.4&gt;
Servername monsite.org
Serveralias www.monsite.org monsite.net www.monsite.net
RewriteEngine on
RewriteRule ^(.*)       http://www.monsite.com/$1     [R=301]
&lt;/VirtualHost&gt;
</pre><p class="line862">La seconde entrée VirtualHost utilise une règle de réécriture avec un code de redirection 301 (Déplacement définitif) pour transférer tout le trafic vers le site d'origine. Un appel de fichier 301 est tout de même enregistré dans le fichier journal, information intéressante puisqu'elle indique les domaines utilisés par les internautes. Le reste du trafic sera enregistré sous un seul domaine. À ce stade, du point de vue de l'UTM, le site semble ne comporter qu'un seul domaine et est prêt pour l'installation de l'UTM. <p class="line874">Remarque : Sachez que vous devez demander à votre administrateur de référencer le site apache.org dans vos paramètres de configuration. <p class="line867"><strong>Redirection d'alias sur IIS</strong> <p class="line874">Si vous utilisez un serveur Microsoft IIS, il est très facile de modifier la configuration afin de rediriger tout le trafic provenant de l'un des alias vers le site principal. Pour cela, vous pouvez créer deux sites Web dans la configuration de IIS. Le premier correspondra au domaine principal (www.monsite.com) et inclura votre configuration normale et le second sera dédié à tous les alias (monsite.net, monsite.org, etc.) et redirigera le trafic vers le site principal. <p class="line874">Dans le gestionnaire IIS, cliquez avec le bouton droit sur les sites Web pour afficher la boîte de dialogue Propriétés. Sur l'onglet Site Web, cliquez sur le bouton Avancé. Une fenêtre s'ouvre, permettant d'affecter des domaines supplémentaires au site Web dans le champ "En-tête de l'hôte". Définissez le domaine principal dans le site Web principal et utilisez le second site Web pour héberger tous les alias. <p class="line874">Une fois que le second site Web hébergeant tous les alias est configuré et activé, créez une page d'accueil vide contenant le code de redirection suivant : <p class="line867"><pre>&lt;head&gt;
&lt;META HTTP-EQUIV=Refresh CONTENT="0; URL=http://www.monsite.com/"&gt;
&lt;/head&gt;
</pre><p class="line874">Ce fragment de code indiquera au navigateur du visiteur de se rediriger automatiquement vers l'URL principale. À ce stade, le site principal semble ne comporter qu'un seul domaine et l'UTM peut être installé normalement, avec les paramètres par défaut. </div><div id="pagebottom"></div>
</div>


<div id="footer" style="clear: both; margin: 0; padding: 0; border-bottom:1px solid #CCC;"></div><div id="copyright" style="font-size: 70%; text-align: center;">&copy;2010 Google</div>
</body></html>