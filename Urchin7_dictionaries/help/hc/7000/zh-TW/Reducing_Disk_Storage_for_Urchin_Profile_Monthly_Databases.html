<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body><table id="top_location_line" width="100%"><table id="top_location_line" width="100%"><tr width="100%"><td><a href="http://www.urchin.com"><img border="0" src="../images/google_sm.gif" width="135" height="41"></a></td><td width="100%"><span id="top_line" style="width: 100%; float: left; clear: both; border-bottom: 1px solid #CCC;"><span id="top_title" style="float: left; margin-top: 10px;"><b>Help Center</b></span></td></tr></table>
<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en">
<p class="line867"><strong>縮小 Urchin 設定檔每月資料庫的磁碟儲存空間</strong> <p class="line867"><strong>總覽</strong> <p class="line874">Urchin 的報告資料儲存位置，就位在於 Urchin 內部設定之各個設定檔的獨立每月資料庫中。這些資料庫一般位在 Urchin 分佈的資料 / 報告目錄下。按照預設，Urchin 可保留這些每月設定檔資料庫，數目不限。對大部分小型和中型的網站來說，對儲存空間的要求並不大。因為 Urchin 報告在處理過原始網頁伺服器記錄後，就不再需要對它們進行存取，因此不需保存網頁伺服器記錄。經過處理的 Urchin 每月資料庫，其尺寸會縮小為已處理並填入至 Urchin 資料庫的原始網頁伺服器記錄大小的 5% 至 10%，在大多數情況中，就算您無限期地保留了所有的 Urchin 資料庫，它們佔用的磁碟空間也不大。 <p class="line874">但是，對於每天產出成千上萬個尺寸以百萬位元組計之網頁伺服器記錄的大型網站，或是設定了大量設定檔的代管服務供應商而言，縮小 Urchin 不斷的資料儲存區要求可能是較好的選擇。您可以以下列方法之一完成這項工作： <ol type="1"><li>將設定檔設定為在處理記錄完成後，自動刪除原始追蹤資料 </li><li>設定設定檔以封存記錄資料 </li><li>限制保留的記錄報告資料月份數目。 </li></ol><p class="line874">本文下方會提供各個方法的指示。 <p class="line867"><strong>Urchin 資料庫儲存位置技術總覽</strong> <p class="line874">在每個 Urchin 設定檔中，Urchin 會在名為 YYYYMM 的目錄下，每個月定期維護儲存一組資料庫檔案。這些目錄分別包含約 50 個檔案，檔案中提供報告引擎的資料。這些目錄和資料庫檔案是以其儲存資料的月份來命名。完整的資料庫清單為： <p class="line862">YYYYMM-uhed --&gt; 資料庫標頭 <p class="line862">YYYYMM-usti --&gt; 字串索引 <p class="line862">YYYYMM-ustd --&gt; 字串資料 <p class="line862">YYYYMM-udai --&gt; 累計表格索引 <p class="line862">YYYYMM-udXX --&gt; 累計資料表格 (XX 會由資料地圖的表格號碼取代)。 <p class="line862">YYYYMM-uvii --&gt; 訪客索引 <p class="line862">YYYYMM-uvid --&gt; 訪客資料 <p class="line862">YYYYMM-used --&gt; 工作階段資料 <p class="line862">YYYYMM-upad --&gt; 路徑資料 <p class="line862">YYYYMM-utrd --&gt; 交易資料 (電子商務) <p class="line862">YYYYMM-uitd --&gt; 項目資料 (電子商務) <p class="line862">YYYYMM-ulti --&gt; 記錄追蹤索引 <p class="line862">YYYYMM-ultd --&gt; 記錄追蹤資料 <p class="line862">YYYYMM-utod --&gt; 總量資料 <p class="line862">YYYYMM-uhid --&gt; 長條圖資料 <p class="line862">YYYYMM-umad --&gt; 訪客矩陣資料 <p class="line874">每一組資料庫都會以其包含的月份資料，這樣才算一份完整資料。但是月份資料庫組之間並無任何相互依賴關係，因此存封和修整作業可以在每個資料庫組上獨立進行，其他月份的資料不會受到影響。 <p class="line874">在一般作業情況下，會保留每個月的整組月份資料庫檔案。但是，Urchin 記錄處理引擎會使用這些資料庫檔案的其中 4 個檔案。這些資料庫檔案是： <p class="line874">YYYYMM-usti <p class="line874">YYYYMM-udai <p class="line874">YYYYMM-ulti <p class="line874">YYYYMM-ultd <p class="line874">Urchin 記錄處理引擎會使用下列資料庫檔案，以處理報告中的跨區段和訪客深入檢視工作。移除這些內容僅會對這些報告功能造成影響。 <p class="line874">YYYYMM-uvii <p class="line874">YYYYMM-uvid <p class="line874">YYYYMM-used <p class="line874">YYYYMM-upad <p class="line874">YYYYMM-utrd <p class="line874">YYYYMM-uitd <p class="line874">這些資料庫包含有關訪客、工作階段、路徑、交易和產品的資訊。這些檔案會使用每個月所需總儲存空間中某個百分比大小位置，大約是 10% 到 50% 左右。因此，如果您在「設定檔組態」的「儲存 / 資料庫」畫面中，將 [保持原始追蹤資料] 選項設為關閉的話，您就可以使用較大的磁碟空間。 <p class="line874">建議只有流量極高、並且保存原始追蹤資料會造成磁碟或 CPU 資源耗損問題的網站，停用保持原始追蹤資料選項。 <p class="line874">另一個可用的節省磁碟空間方法，則是將舊的 Urchin 每月資料庫壓縮為 ZIP 封存。所產生的封存一般只有未壓縮前資料庫組大小的 20% 到 30% 左右。雖然 Urchin 報告引擎無法直接讀取 ZIP 封存，但它可以隨時隨地從 ZIP 封存中將所需要的資料庫取出。除了在解壓縮資料庫時可能需要多花一點時間外，這個方法對於檢視 Urchin 報告的人員來說不會造成任何影響。報告引擎並不會移除其解壓縮的資料庫，這可提高使用者檢視 Urchin 報告時存取資料的速度。但是，原始的 ZIP 封存會留在原處，因此定期清除作業可直接移除解壓縮後的資料庫，以重新取得磁碟空間。 <p class="line874">縮小 Urchin 儲存空間要求最後的方法，是為 Urchin 必須提供的記錄報告建立存留時間政策。例如，在以 Urchin 做為代管套裝軟體報告服務工具的環境中，提供一年份的 Urchin 記錄是很常見的事。由於 Urchin 資料庫是以月份進行組織，以自動指令檔機制來自動移除留存時間已超過某個期限的舊每月資料庫是很簡單的。執行記錄報告長度政策後，Urchin 的資料儲存空間的要求一般就會變得穩定，或是只有在達到記錄保留限制時略為增加。 <p class="line867"><strong>縮小資料儲存空間的方法 - 如何進行</strong> <p class="line867"><strong>方法 1：在處理記錄後，刪除原始追蹤資料</strong> <p class="line874">您可以設定設定檔，以便在處理記錄後刪除原始訪客和工作階段資訊。對大型網站而言，這可以改善效能，並可降低資料儲存的數量。請注意：在您選取此組態後，日期重複的工作階段會分成兩個工作階段來顯示 (一天一個工作階段)，而不是一個工作階段。對大部分的網站來言，結果中的差距微乎其微。 <p class="line874">若要設定設定檔，以便在處理原始訪客和工作階段資訊後進行刪除，請進行下列步驟： <ol type="1"><li><p class="line862">在管理員介面中，按一下 [組態]，然後再按一下 [Urchin 設定檔] &gt; [設定檔]。 </li><li>編輯您想要使用的設定檔。 </li><li>在 [儲存 / 資料庫] 標籤中，將「保持原始追蹤資料」欄位設為 [關閉]。 </li><li>按一下 [更新]。 </li></ol><p class="line867"><strong>方法 2：自動封存記錄資料</strong> <p class="line874">您可以設定設定檔以壓縮每月記錄資料，以便封存。報告可以檢視封存的資料，但不會再為已封存的每月資料處理額外的點擊。 <p class="line874">若要設定設定檔以封存記錄資料， <ol type="1"><li><p class="line862">在管理員介面中，按一下 [組態]，然後再按一下 [Urchin 設定檔] &gt; [設定檔]。 </li><li>編輯您想要使用的設定檔。 </li><li>在 [儲存 / 資料庫] 標籤中，將「封存資料庫」欄位設為 [開啟]。 </li><li>為「封存此時間後的資料庫」欄位指定月份數字。 </li><li>按一下 [更新]。 </li></ol><p class="line867"><strong>方法 3：限制記錄報告資料庫的保留</strong> <p class="line874">您只需為每個 Urchin 設定檔，移除資料 / 報告 / 設定檔名稱目錄下以 YYYYMM 前置字元開頭，並且已超過記錄報告存留時間限制的資料庫。例如，如果現在是 2004 年 2 月，而您想要保留一年份的報告記錄，您就必須移除任何名稱為 200301-*data.un* 的資料庫，以删除此 Urchin 設定檔中從 2003 年 1 月以來的報告資料。您可以為所有的資料庫中 2003 年 1 月之前的資料庫進行相同動作。 </div><div id="pagebottom"></div>
</div>


<div id="footer" style="clear: both; margin: 0; padding: 0; border-bottom:1px solid #CCC;"></div><div id="copyright" style="font-size: 70%; text-align: center;">&copy;2010 Google</div>
</body></html>