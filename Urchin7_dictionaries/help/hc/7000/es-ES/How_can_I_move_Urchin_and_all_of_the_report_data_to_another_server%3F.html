<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body><table id="top_location_line" width="100%"><table id="top_location_line" width="100%"><tr width="100%"><td><a href="http://www.urchin.com"><img border="0" src="../images/google_sm.gif" width="135" height="41"></a></td><td width="100%"><span id="top_line" style="width: 100%; float: left; clear: both; border-bottom: 1px solid #CCC;"><span id="top_title" style="float: left; margin-top: 10px;"><b>Help Center</b></span></td></tr></table>
<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en">
<p class="line867"><strong>¿Cómo puedo mover Urchin 6.x y todos los datos de informes a otro servidor?</strong> <p class="line874">Para mover Urchin 6.x de un servidor a otro es necesario seguir los pasos básicos siguientes: <ol type="1"><li>Prepare la base de datos de Urchin. </li><li>Instale Urchin 6.x en el nuevo servidor. </li><li>Mueva las bases de datos de informes de Urchin de los perfiles. </li><li>Mueva las plantillas y archivos personalizados. </li><li>Aplique la configuración personalizada de Urchin. </li><li>Compruebe los nuevos permisos de los archivos. </li><li>Vuelva a activar la licencia de Urchin. </li></ol><p class="line874">NOTA: también pueden aplicarse las instrucciones siguientes cuando se cambia de una plataforma a otra. Los archivos de base de datos de informes de Urchin pueden moverse a cualquier sistema operativo compatible con Urchin. Al mover datos o archivos de un tipo de plataforma a otro deben tenerse en cuenta consideraciones como la sintaxis de línea de comandos (como la adición de './' en sistemas Unix). Otras consideraciones incluyen cambios de sintaxis de directorio como 'estándar\Windows\carpetas\' frente a '/estándar/unix/directorios/.' <p class="line867"><strong>1. Prepare la base de datos de Urchin.</strong> <p class="line874">Si va a utilizar el mismo servidor de base de datos para su instalación de Urchin, este paso puede omitirse. En caso contrario, debe prepararse la base de datos de Urchin antes de realizar una nueva instalación en el nuevo servidor: <p class="line867"><strong>a.</strong>      Cree una base de datos de Urchin vacía con los permisos adecuados para el usuario de Urchin. <p class="line874">Ejemplo de comandos SQL para la creación de base de datos de servidor MySQL: <p class="line867"><pre>   mysql&gt; create database urchin character set utf8;
   mysql&gt; GRANT ALL ON urchin.* to 'urchin'@'localhost' IDENTIFIED BY 'urchinpassword';
</pre><p class="line874">Ejemplo de comandos PSQL para la creación de base de datos de servidor PostreSQL: <p class="line867"><pre>   postgres=# CREATE DATABASE urchin WITH ENCODING 'UTF8';
   postgres=# CREATE USER urchin WITH PASSWORD 'urchin password';
   postgres=# GRANT ALL ON DATABASE urchin TO urchin;
   postgres=# \connect urchin;
   postgres=# CREATE LANGUAGE 'PLPGSQL';
</pre><p class="line867"><strong>b.</strong>      Copie la base de datos de Urchin del antiguo servidor realizando un volcado SQL de la antigua base de datos e importándolo en la nueva. Esto copia automáticamente la mayor parte de las configuraciones de Urchin necesarias, incluidos Perfiles, Fuentes de registro, Usuarios, Cuentas, Grupos, Programador y otras configuraciones. <p class="line874">Ejemplo de comandos SQL para la base de datos de servidor MySQL que se muestra a continuación: <ul><li style="list-style-type:none">Base de datos fuente: </li></ul><p class="line867"><pre>   mysqldump -h {oldDBhostname} -u {username} -p {urchinDBname} &gt; urchin.sql
</pre><ul><li style="list-style-type:none">Base de datos de destino: </li></ul><p class="line867"><pre>   mysql -h {newDBhostname} -u {username} -p {urchinDBname} &lt; urchin.sql
</pre><p class="line874">Ejemplo de los comandos PSQL de la base de datos de servidor PostreSQL que se muestra a continuación: <ul><li style="list-style-type:none">Base de datos fuente: </li></ul><p class="line867"><pre>   pg_dump -h {oldDBhostname} -p {oldDBport} -U {username} {urchinDBname} &gt; urchin.sql
</pre><ul><li style="list-style-type:none">Base de datos de destino: </li></ul><p class="line867"><pre>   psql -h {newDBhostname} -p {newDBport} -U {username} {urchinDBname} &lt; urchin.sql
</pre><p class="line867"><strong>2. Instale Urchin 6 en el nuevo servidor</strong> <p class="line874">Cree una nueva instalación de Urchin 6 en el nuevo servidor utilizando la base de datos previamente preparada. <p class="line874">(Asegúrese de desactivar la opción "Suprimir y volver a crear determinadas tablas de bases de datos de Urchin si ya existen" para instalaciones de Windows o responda NO a la pregunta "¿Desea inicializar la configuración de la base de datos durante la instalación?" para instalaciones Unix). <p class="line874">Aquí puede encontrar instrucciones detalladas sobre la instalación de Urchin (omita los pasos sobre la configuración de la base de datos y comience en el capítulo "Instalación de Urchin"): <ul><li><p class="line891"><a href="Urchin_Installation_Guide_(FreeBSD_and_Linux).html">Guía de instalación de Urchin (FreeBSD y Linux)</a> </li><li><p class="line891"><a href="Urchin_Installation_Guide_(Windows).html">Guía de instalación de Urchin (Windows)</a> </li></ul><p class="line874">Detenga los deamon de urchin antes de continuar con los pasos siguientes: <p class="line867"><pre>~/urchin/bin/urchinctl -stop
</pre><p class="line867"><strong>3. Mueva las bases de datos de informes de Urchin de los perfiles.</strong> <p class="line874">De forma predeterminada, los datos de informes de Urchin se almacenan en un subdirectorio del directorio principal de Urchin: ~/urchin/data/ Este directorio debe archivarse para mantener la estructura de subdirectorios; a continuación, deberá moverse al nuevo servidor después de la instalación de Urchin. Siempre que sea posible, deberá restaurarse a la misma ubicación del directorio en el nuevo servidor: ~/urchin/data. <p class="line874">NOTA: si la antigua instalación de Urchin utilizaba directorios de historial e informes personalizados, estos deberán copiarse (en vez de ~/urchin/data/reports y ~/urchin/data/history). <p class="line867"><strong>4. Mueva las plantillas y archivos personalizados.</strong> <p class="line874">Las personalizaciones realizadas en Urchin, incluidos los formatos de registro personalizados y los conjuntos de informes no se guardan en el directorio "data" de Urchin. En su lugar, estas personalizaciones se guardan en una ubicación independiente en el directorio "lib" de la distribución de Urchin. Cuando Urchin se instala en su nuevo servidor, cualquier personalización realizada en el antiguo sistema de Urchin deberá copiarse en la nueva instalación de Urchin. Normalmente estos archivos se guardan en ~/urchin/lib/custom/. <p class="line874">Para esto, vaya al servidor Urchin antiguo y desplácese al directorio "lib" de la distribución de Urchin. A continuación, cree un archivo para todo el directorio "custom" (y todos sus subdirectorios) por medio de una utilidad de archivo como tar o ZIP. Copie este archivo en su nuevo servidor Urchin y descomprímalo en el directorio "lib" de la distribución Urchin. <p class="line867"><strong>5. Aplique la configuración personalizada de Urchin.</strong> <p class="line874">Si se ha cambiado la configuración predeterminada de la instalación antigua de Urchin 6.x en: <p class="line867"><pre>/etc/session.conf
/etc/urchin.conf
/var/urchinwebd.conf
</pre><p class="line874">no olvide aplicar la misma configuración en su nueva instalación editando los archivos correspondientes. <p class="line867"><strong>6. Compruebe los nuevos permisos de los archivos.</strong> <p class="line874">Después de que se hayan movido todos los archivos al nuevo servidor, debe realizar una comprobación minuciosa para asegurarse de que todos los archivos disponen de los permisos adecuados y de que son propiedad del mismo usuario (solo sistemas UNIX). <p class="line874">Para fijar los permisos de Urchin, ejecute el comando siguiente desde el directorio ~/urchin/util/: <p class="line867"><pre>        inspector -r
</pre><p class="line874">Para comprobar la propiedad del archivo (solo UNIX) ejecute el comando siguiente desde el directorio ~/urchin/: <p class="line867"><pre>        chown -R urchin_user:urchin_group ./
</pre><p class="line867"><strong>7. Vuelva a activar la licencia de Urchin.</strong> <p class="line874">Inicie los daemon o servicios de urchin. <p class="line867"><pre>~/urchin/bin/urchinctl start
</pre><p class="line874">Después de finalizar la instalación de Urchin, abra la interfaz web de Urchin. <p class="line874">El sistema debe mostrar la pantalla "Licencia de Urchin" con el enlace "Reactivar licencias": <p class="line874">Dado que Urchin se ha instalado utilizando la base de datos previamente preparada, se ha cambiado la clave del sistema y debe reactivarse la licencia. <p class="line874">NOTA: solicite a su distribuidor de Urchin que restablezca la licencia antes de volver a activarla. </div><div id="pagebottom"></div>
</div>


<div id="footer" style="clear: both; margin: 0; padding: 0; border-bottom:1px solid #CCC;"></div><div id="copyright" style="font-size: 70%; text-align: center;">&copy;2010 Google</div>
</body></html>