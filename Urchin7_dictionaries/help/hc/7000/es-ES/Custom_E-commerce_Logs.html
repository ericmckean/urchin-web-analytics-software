<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body><table id="top_location_line" width="100%"><table id="top_location_line" width="100%"><tr width="100%"><td><a href="http://www.urchin.com"><img border="0" src="../images/google_sm.gif" width="135" height="41"></a></td><td width="100%"><span id="top_line" style="width: 100%; float: left; clear: both; border-bottom: 1px solid #CCC;"><span id="top_title" style="float: left; margin-top: 10px;"><b>Help Center</b></span></td></tr></table>
<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en">
<p class="line867"><strong>Registros de E-commerce personalizados</strong> <p class="line867"><strong>Visión general</strong> <p class="line862">Muchos carritos de la compra permiten guardar y registrar información valiosa relacionada con compras en formatos distintos de ELF2 y, por tanto, no pueden ser procesados automáticamente por Urchin. En este artículo se explica cómo crear un formato de registro personalizado para el archivo de registros de E-commerce si no puede modificar el carrito de la compra para generar ELF2. Antes de continuar, consulte <a href="Custom_Log_Formats.html">Formatos de registro personalizados</a>, que explica de forma detallada cómo se crea este tipo de registros. <p class="line867"><strong>Tipos de formato de registros de E-commerce</strong> <p class="line874">Los carritos de la compra pueden registrar información sobre adquisiciones y artículos adquiridos utilizando un formato de una sola línea o de varias líneas. En el primer caso, cada una de las líneas contiene toda la información necesaria para describir por completo una transacción y los artículos adquiridos y todas las líneas tienen la misma disposición. En el segundo caso, se utilizan varias líneas para describir una compra; las líneas relativas a las transacciones tienen un formato y las que corresponden a los artículos adquiridos tienen otro. Los registros ELF2 utilizan formatos de varias líneas. Para determinar si los datos utilizan un formato de una o varias líneas, debe examinar los registros de E-commerce, ya que ello afectará a la configuración del formato de registro personalizado. Siga las instrucciones siguientes en función del tipo de formato de registro. <p class="line867"><strong>Requisitos generales de registro de E-commerce</strong> <p class="line874">Independientemente del formato de las entradas de registro que genera su carrito de la compra, cada una de ellas debe incluir la fecha y la hora, así como al menos uno de los campos que se indican a continuación, para mostrar la correlación del usuario: <ul><li>Host remoto o dirección IP (para métodos de usuario Solo IP o IP y User agent) </li><li>User agent (para método de usuario IP y User agent) </li><li>Cookies (para método de usuario de UTM o SID) </li><li>ID de sesión (para método de usuario de SID) </li></ul><p class="line874">Si falta alguno de los campos anteriores, Urchin no generará un análisis exhaustivo de sus ingresos. El programa define también los siguientes campos de E-commerce: <ul><li>%{ORDERID} es el número de pedido </li><li>%{STORE} es el nombre/id del escaparate </li><li>%{SESSIONID} es el identificador de sesión único del cliente </li><li>%{TOTAL} es el importe total de la transacción incluidos los impuestos y gastos de envío (solo puede ser un valor decimal, sin caracteres '$') </li><li>%{TAX} es el importe de los impuestos que se aplican al subtotal </li><li>%{SHIPPING} es el importe de los gastos de envío </li><li>%{BILL_CITY} es la ciudad de facturación del cliente </li><li>%{BILL_STATE} es el estado de facturación del cliente </li><li>%{BILL_ZIP} es el código postal de facturación del cliente </li><li>%{BILL_COUNTRY} es el país de facturación del cliente </li><li>%{PRODUCT_CODE} es el identificador del producto </li><li>%{PRODUCT_NAME} es el nombre del producto </li><li>%{VARIATION} es una variación opcional del producto según color, tamaño, etc. </li><li>%{PRICE} es el precio unitario del producto (solo puede ser un valor decimal, sin caracteres '$') </li><li>%{QUANTITY} es la cantidad solicitada de este producto </li><li>%{UPSOLD} es un valor booleano (0|1) si el producto se encontraba a la venta </li></ul><p class="line867"><strong>Registros con formato de una sola línea</strong> <p class="line874">Siga estas instrucciones si su archivo de registro de E-commerce contiene solamente resultados que comparten el mismo formato de línea detallado anteriormente. <ol type="1"><li>Para crear un nuevo formato de registro personalizado en el directorio lib/custom/logformats, realice una copia del archivo de formato de registro custom.lf.sample. Guarde la copia con un nombre que contenga el sufijo .lf. </li><li>Edite el nuevo archivo de formato de registro personalizado y configure las entradas que se indican a continuación del siguiente modo: <ul><li><p class="line891">PrimaryPositions: esta entrada especifica el orden de los campos de su archivo de registro. Cree una lista de números de identificación de campos separados por comas que especifique el orden de los mismos. Los nombres y los ID de los campos se encuentran en el archivo lib/reporting/logformats/fieldlist.txt. Observe el ejemplo que aparece a continuación: </li><li><p class="line891">SecondaryPositions: establezca este parámetro en '-', ya que no se utiliza en los archivos de registro con formato de una sola línea. </li><li><p class="line891">PrimaryKey: establezca este parámetro en '-', ya que no se utiliza en los archivos de registro con formato de una sola línea. </li><li><p class="line891">SecondaryKey: establezca este parámetro en '-', ya que no se utiliza en los archivos de registro con formato de una sola línea. </li><li><p class="line891">PrimaryContent: este campo permite incluir entradas como TRANSACCIÓN o ARTÍCULO. Si los resultados de su archivo de registro describen la compra de cada producto concreto, establezca el campo en ARTÍCULO; si los resultados describen la compra completa, establézcalo en TRANSACCIÓN. </li><li><p class="line891">SecondaryContent: establezca este parámetro en '-', ya que no se utiliza en los archivos de registro con formato de una sola línea. </li><li><p class="line891">CommentKey: si alguna de las líneas de su archivo de registros corresponde a comentarios o no se consideran resultados y empiezan por un carácter concreto, introduzca aquí el carácter en cuestión. </li><li><p class="line891">FieldSeparator1: los separadores de campos definen los caracteres que se consideran como tales. Los elementos que suelen utilizarse son las tabulaciones (\t) y los espacios (\s). Configúrelos del modo adecuado según los caracteres que se incluyan entre los campos de su archivo de registro. </li><li><p class="line891">FieldSeparator2: consulte la entrada correspondiente a FieldSeparator1 </li><li><p class="line891">QuotesEscapeSep: este campo especifica si deben ignorarse los separadores de campos que se encuentran dentro de un campo que incluye comillas (""). Probablemente debería establecerse en SÍ. </li><li><p class="line891">BracketsEscapeSep: este campo especifica si deben ignorarse los separadores de campos que se encuentran dentro de un campo que incluye corchetes ([]). Probablemente debería establecerse en SÍ. </li><li><p class="line891">MergSuccessiveSep: este campo especifica si deben considerarse dos caracteres de separación seguidos como un único separador. Probablemente pueda dejarse en NO. </li><li><p class="line891">CleanWhiteSpace: este campo especifica si debe eliminarse un espacio en blanco situado al final de los campos cuando se analizan. Probablemente pueda dejarse en NO. </li><li><p class="line891">StatusRequired: deje esta opción en NO, a menos que los resultados contengan códigos de estado del tipo de servidor web. </li><li><p class="line891">CustomDateFormat: si el formato de registro incluye un formato de fecha personalizado, establezca el formato strptime pertinente que describa la entrada. </li><li><p class="line891">CustomTimeFormat: si el formato de registro contiene un formato de hora personalizado, establezca el formato strptime pertinente que describa la entrada. </li></ul></li><li>Guarde el formato de registro personalizado en el directorio lib/custom/logformats. </li><li>Seleccione el formato de registro personalizado para su fuente de registro en la interfaz de Urchin Admin. </li><li>Procese los archivos de registro con Urchin. </li></ol><p class="line867"><strong>Ejemplo de formato de una sola línea</strong> <p class="line874">El ejemplo que se incluye a continuación corresponde a un único resultado tomado de un registro que solo incluye datos de transacciones. <p class="line867"><pre>12345 123.123.123.123 "Urchin Store" [26/Aug/2003:11:43:02 -0700] 192.73 "San Diego" "CA" 92101 "US" "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1;)" "utma=171060324.2734232095.1061444425.1061444425.1061444763.2"
</pre><p class="line862">En la lista siguiente se muestra el nombre de cada uno de los campos incluidos, así como el número de identificación obtenido del archivo lib/reporting/logformats/fieldslist.txt. Los números de identificación asignados se utilizan en el campo PrimaryPositions del archivo de formato de registro personalizado. <ol type="1"><li>ID de transacciones 25 </li><li>Host remoto o dirección IP 12 </li><li>Nombre de la tienda 26 </li><li>Fecha/Hora de Apache 3 </li><li>Coste total 28 </li><li>Ciudad de facturación 31 </li><li>Estado de facturación 32 </li><li>Código postal de facturación 33 </li><li>País de facturación 34 </li><li class="gap">User Agent 13 </li><li>Cookies 14 </li></ol><p class="line874">De acuerdo con esta lista, deberá configurar las siguientes entradas del archivo de formato de registro personalizado: <p class="line867"><pre>PrimaryPositions: "25, 12, 26, 3, 28, 31, 32, 33, 34, 13, 14" SecondaryPositions: - PrimaryKey: - SecondaryKey: - PrimaryContent: TRANSACTION SecondaryContent: - CommentKey: # FieldSeparator1: \s FieldSeparator2: \t QuotesEscapeSep: YES BracketsEscapeSep: YES MergSuccessiveSep: NO CleanWhiteSpace: NO StatusRequired: NO CustomDateFormat: - CustomTimeFormat: -
</pre><p class="line862">El campo PrimaryPositions especifica el orden de los campos y PrimaryContent informa a Urchin de que el registro incluye transacciones (o información general sobre compras). Los separadores de campos se han establecido como espacio y tabulación, ya que los campos se han separado mediante espacios en blanco. No se han especificado los formatos personalizados de fecha y hora ya que se sigue el formato de fecha de Apache. <p class="line867"><strong>Registros con formato de varias líneas</strong> <p class="line874">Urchin puede leer formatos de varias líneas siempre y cuando el carácter de inicio de cada una de ellas sea un determinado carácter que pueda identificar el formato que se está utilizando. Por ejemplo, los archivos de registro de ELF2 incluyen un signo de exclamación '!' como primer carácter en la línea de transacción. Las líneas correspondientes a los artículos NO incluyen este carácter inicial ('!' ). <p class="line874">Siga estas instrucciones si su archivo de registro de E-commerce incluye dos líneas de formato diferentes, una para la transacción y la otra para los datos relativos al producto o artículo. <ol type="1"><li>Para crear un nuevo formato de registro personalizado en el directorio lib/custom/logformats, realice una copia del archivo de formato de registro custom.lf.sample. Guarde la copia con un nombre que contenga el sufijo .lf. </li><li>Edite el nuevo archivo de formato de registro personalizado y configure las entradas que se indican a continuación del siguiente modo: <ul><li><p class="line891">PrimaryPositions: esta entrada especifica el orden de los campos de su archivo de registro. Cree una lista de ID de campos separados por comas que describa el orden de los mismos. Los nombres y los ID de los campos se encuentran en el archivo lib/reporting/logformats/fieldlist.txt. </li><li><p class="line891">SecondaryPositions: esta entrada especifica el orden de los campos de su archivo de registro. Cree una lista de ID de campos separados por comas que describa el orden de los mismos. Los nombres y los ID de los campos se encuentran en el archivo lib/reporting/logformats/fieldlist.txt. </li><li><p class="line891">PrimaryKey: establezca este campo en el carácter que identifique la línea del archivo de registro con el mismo formato designado por el campo PrimaryPositions. </li><li><p class="line891">SecondaryKey: establezca este campo en el carácter que identifique la línea del archivo de registro con el mismo formato designado por el campo SecondaryPositions. </li><li><p class="line891">PrimaryContent: este campo permite incluir entradas como TRANSACCIÓN o ARTÍCULO. Si los resultados de su archivo de registro describen la compra de cada producto concreto, establezca este valor en ARTÍCULO; si describen la compra completa, establézcalo en TRANSACCIÓN. </li><li><p class="line891">SecondaryContent: consulte la entrada correspondiente a PrimaryContent </li><li><p class="line891">CommentKey: si alguna de las líneas de su archivo de registros corresponde a comentarios o no se consideran resultados y empiezan por un carácter concreto, introduzca aquí el carácter en cuestión. </li><li><p class="line891">FieldSeparator1: los separadores de campos definen los caracteres que se consideran como tales. Los elementos que suelen utilizarse son las tabulaciones (\t) y los espacios (\s). Configúrelos correctamente según los caracteres que se incluyan entre los campos de su archivo de registro. </li><li><p class="line891">FieldSeparator2: consulte la entrada correspondiente a FieldSeparator1 </li><li><p class="line891">QuotesEscapeSep: este campo especifica si deben ignorarse los separadores de campo que se encuentran dentro de un campo que incluye comillas (""). Probablemente debería establecerse en SÍ. </li><li><p class="line891">BracketsEscapeSep: este campo especifica si deben ignorarse los separadores de campo que se encuentran dentro de un campo que incluye corchetes ([]). Probablemente debería establecerse en SÍ. </li><li><p class="line891">MergSuccessiveSep: este campo especifica si deben considerarse dos caracteres de separación seguidos como un único separador. Probablemente pueda dejarse en NO. </li><li><p class="line891">CleanWhiteSpace: este campo especifica si debe eliminarse un espacio en blanco situado al final de los campos cuando se analizan. Probablemente pueda dejarse en NO. </li><li><p class="line891">StatusRequired: deje esta opción en NO a menos que los resultados incluyan códigos de estado del tipo de servidor web. </li><li><p class="line891">CustomDateFormat: si el formato de registro incluye un formato de fecha personalizado, establezca el formato strptime pertinente que describa la entrada. </li><li><p class="line891">CustomTimeFormat: si el formato de registro incluye un formato de hora personalizado, establezca el formato strptime pertinente que describa la entrada. </li></ul></li><li>Guarde el formato de registro personalizado en el directorio lib/custom/logformats. </li><li>Seleccione el formato de registro personalizado para su fuente de registro en la interfaz de Urchin Admin. </li><li>Procese los archivos de registro con Urchin. </li></ol></div><div id="pagebottom"></div>
</div>


<div id="footer" style="clear: both; margin: 0; padding: 0; border-bottom:1px solid #CCC;"></div><div id="copyright" style="font-size: 70%; text-align: center;">&copy;2010 Google</div>
</body></html>