<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body><table id="top_location_line" width="100%"><table id="top_location_line" width="100%"><tr width="100%"><td><a href="http://www.urchin.com"><img border="0" src="../images/google_sm.gif" width="135" height="41"></a></td><td width="100%"><span id="top_line" style="width: 100%; float: left; clear: both; border-bottom: 1px solid #CCC;"><span id="top_title" style="float: left; margin-top: 10px;"><b>Help Center</b></span></td></tr></table>
<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en">
<p class="line867"><strong>Caracteres comodín y substitución de fechas en la ruta del registro</strong> <p class="line867"><strong>Visión general</strong> <p class="line874">Urchin permite especificar variables de concordancia de fechas y comodines en la ruta de un archivo de registro. Cuando se ejecuta una tarea de Urchin y se lee la ruta del registro, las variables se convierten y se comparan en busca de concordancias con los directorios y nombres de archivo del sistema. <p class="line874">Las capacidades de concordancia de fecha de Urchin 6 son más extensas que las incluidas en versiones anteriores de Urchin. En concreto: <ul><li>La substitución de fechas puede realizarse en cualquier punto del nombre de ruta del archivo de registro; en las versiones antiguas de Urchin solo se permitían las sustituciones en la especificación de nombre de archivo real. </li><li>Se ha implementado un algoritmo de concordancia de patrones de datos más flexible y robusto, aunque todavía se admite el patrón del tipo YYYYMMDD anterior para la compatibilidad con versiones anteriores. </li></ul><p class="line874">A continuación se muestran los formatos y variables de concordancia de hora más comunes. Al final de este artículo se muestra una lista completa de todas las variables de formato de hora admitidas. <p class="line874">* Un asterisco representa cero o más caracteres consecutivos. DD se sustituye por un número de dos dígitos que representa el día del mes, por ejemplo, 01-31. %d es equivalente a DD. MM se substituye por un número de dos dígitos que representa el mes, por ejemplo, 01-12. %m es equivalente a MM. YY se substituye por un número de dos dígitos que representa el año, por ejemplo, 01-99. YYYY se substituye por un número de cuatro dígitos que representa el año, por ejemplo, 0001-2003. %Y es equivalente a YYYY. <p class="line874">Tenga en cuenta que en este contexto, el asterisco se comporta como la concordancia de nombre de archivo en un shell de comandos en UNIX o DOS, no como una expresión regular en la que representaría cero o más instancias del carácter precedente. Estas variables se pueden combinar de cualquier forma que elija el usuario. <p class="line874">En la lista siguiente se muestran ejemplos acerca de cómo las instancias de estas variables se traducen en 08/13/2003. Tenga en cuenta que los especificadores de día DD y %d se convierten en el día anterior al 13. <ul><li>YYYYMMDD se traduciría en 20030812 </li><li>%Y-%m-%d se traduciría en 2003-08-12 </li><li>%Y/%m/%d se traduciría en 2003/08/12 (tenga en cuenta que esto tiene implicaciones en una ruta) </li><li>*YYYYMMDD concordaría con cualquier nombre de archivo que finalice con la cadena 20030812  </li></ul><p class="line874">Los indicadores de día DD y %d se convierten en el día anterior de forma predeterminada debido al modo en el que se administran normalmente los registros del servidor web y el procesamiento de Urchin. Normalmente, sus registros se rotan a diario para evitar que crezcan demasiado y para que todos los registros contengan datos principales para un único día. Esta rotación se produce normalmente justo antes de medianoche. El procesamiento de Urchin se realiza después de que el reloj pase de medianoche al día siguiente del mes. Si estuviera añadiendo una marca temporal del tipo YYYYMMDD a su nombre de archivo de registro cuando se rota, esa fecha y la hora de ejecución de Urchin diferirían en un día. En la evaluación de la conversión de un día en el momento en el que se ejecuta Urchin no se encontraría el nombre de archivo correcto, ya que la marca temporal indicaría 20030812, pero Urchin se ejecutaría el 20030813. <p class="line874">Aunque este es el modelo más habitual en la administración de registros, no es la única opción. Urchin dispone de un parámetro de configuración que controla el modo en el que se resuelven las variables en un día determinado. La configuración de Fecha/hora de sustitución del comodín en el nombre de ruta del registro se puede utilizar para ajustar la compensación horaria que controla el modo en el que se evalúan DD y %d. Esta configuración se explica con mayor detalle al final de este artículo. <p class="line874">Las variables de año, mes y día se pueden utilizar tanto en el nombre del archivo de registro como en la ruta del directorio/carpeta en la que se encuentra el archivo de registro. El asterisco sólo se puede utilizar en la parte del nombre de archivo de la ruta del archivo de registro. Además, las variables de formato de hora se pueden repetir en una ruta de fuente del registro, pero el asterisco sólo se puede utilizar una vez. Los ejemplos que se indican en la sección Procedimientos pueden ayudarle a entenderlo. <p class="line867"><strong>Procedimientos</strong> <p class="line874">Cuando cree o edite una fuente del registro, debe utilizar las variables de hora en la ruta que utilice en la casilla "Ruta del archivo de registro" de la pestaña "Configuración de registro". Como ejemplo, un esquema de rotación diaria del registro del servidor web Apache crea un registro con una marca de fecha en la que se indica la fecha de las entradas del registro. Por ejemplo, un minuto después de medianoche del 07/16/2002, el mecanismo de rotación del registro archiva el registro: <pre>/var/log/httpd/access.log
</pre><p class="line874">y lo guarda como <pre>/var/log/httpd/access.log.20020715
</pre><p class="line874">Para coincidir con este patrón en la fuente del registro de un perfil de Urchin, basta con especificar <pre>/var/log/httpd/access.log.YYYYMMDD
</pre><p class="line874">en Ruta del archivo de registro y Urchin busca automáticamente el registro del día anterior cuando se ejecute ese día. Otro ejemplo: si el servidor web ISS de Microsoft está configurado para rotar los registros a diario, asignará un nombre al archivo de registro e incluirá la fecha vigente como parte del nombre del archivo, por ejemplo, ex021127.log. Por lo tanto, para procesar un registro de ISS diario, debe indicar una especificación de archivo de registro similar a: <pre>C:\WINNT\System32\LogFiles\W3SVC1\exYYMMDD.log
</pre><p class="line874">en el campo Ruta del archivo de registro de la fuente del registro del perfil. <p class="line874">Para permitir que Urchin procese los registros que se rotan más de una vez al día, puede utilizar una combinación de comodines y la sintaxis YYYYMMDD para que concuerde con todos los archivos de registro creados el día anterior. Para esto, deberá asegurarse de que al archivo de registro rotado se le ha asignado un nombre coherente, por ejemplo, con una hora anexa al nombre de archivo. En la especificación "Ruta del archivo de registro", deberá utilizar un patrón como: <pre>/var/log/httpd/access.log.YYYYMMDD*
</pre><p class="line874">o <pre>C:\WINNT\System32\LogFiles\W3SVC1\exYYMMDD*.log
</pre><p class="line874">Un caso más complejo sería aquel en el que los registros estén guardados en directorios cuyos nombres reflejen el año, mes y día. Supongamos que guarda los registros en las siguientes rutas de directorio: <pre>/logs/2003/07
/logs/2003/08
/logs/2003/09
</pre><p class="line874">y que almacenó todos los registros de un mes determinado en sus directorios respectivos; además, se le había anexado a cada registro el día del mes (por ejemplo, access.log.01, access.log.02). Para que Urchin sepa qué registros debe procesar, puede utilizar uno de los formatos de ruta de registro siguientes: <pre>/logs/YYYY/MM/access.log.DD
/logs/%Y/%M/access.log.%d
</pre><p class="line874">A las horas de procesamiento del registro, Urchin procesará todos los registros que coincidan con el patrón de fecha del día anterior, con cualquier sufijo. Como sucede siempre que se emplean comodines en la especificación del campo "Ruta del archivo de registro", es importante que se active el seguimiento del registro del perfil para asegurarse de que Urchin no vuelva a procesar los registros. <p class="line867"><strong>Nota importante</strong> <p class="line874">Para determinar la fecha del patrón de sustitución, Urchin resta 24 horas de la hora vigente, tomando como base la hora local. Administrará adecuadamente los límites de mes y año. Sin embargo, esto se puede modificar utilizando el ajuste Fecha/hora de sustitución del comodín en el nombre de ruta del registro en la pestaña "Configuración avanzada" de una fuente del registro. Puede seleccionar la hora local o la hora GMT como base para sus ajustes horarios. A continuación, por medio del cuadro de edición "Horas", especifique la compensación en horas positiva o negativa. <p class="line867"><strong>Referencia completa de formato de fecha y hora</strong> <p class="line874">Esta es la lista completa de las variables de formato de hora admitidas, que sigue las convenciones utilizadas en la rutina strftime() de la biblioteca estándar C: <ul><li>%A = representación nacional del nombre completo del día de la semana, </li><li>%a = representación nacional del nombre abreviado del día de la semana, </li><li>%B = representación nacional del nombre completo del día del mes, </li><li>%b = representación nacional del nombre abreviado del día del mes, </li><li>%d = día del mes representado como número decimal (01-31), </li><li>%e = día del mes representado como número decimal (1-31); los dígitos únicos llevan un espacio en blanco delante, </li><li>%H = hora (formato de 24 horas) representada como número decimal (00-23), </li><li>%I = hora (formato de 12 horas) representada como número decimal (01-12), </li><li>%j = día del año representado como número decimal (001-366), </li><li>%k = hora (formato de 24 horas) representada como número decimal (0-23); los dígitos únicos llevan un espacio en blanco delante, </li><li>%l = hora (reloj de 12 horas) representada como número decimal (1-12); los dígitos únicos llevan un espacio en blanco delante, </li><li>%M = minuto representado como número decimal (00-59), </li><li>%m = mes representado como número decimal (01-12), </li><li>%p = representación nacional de "ante meridiem" o "post meridiem", según sea de aplicación, </li><li>%S = segundo representado como número decimal (00-60), </li><li>%s = número de segundos desde Epoch, UTC (consulte mktime(3)), </li><li>%w = día de la semana (el domingo es el primer día de la semana) como uno número decimal (0-6), </li><li>%Y = cifra completa del año como número decimal, </li><li>%y = dos últimos dígitos de la cifra del año como número cardinal (00-99) </li><li>%z = compensación de zona horaria a partir de la hora UTC; un signo más indica al este de UTC, un signo menos, al oeste; a continuación se indican las horas y los minutos por medio de dos dígitos cada uno y sin delimitación entre ellos (forma común para las cabeceras de fecha RFC 822), </li><li>%% = `%'. (se utiliza cuando se necesita un signo de porcentaje literal en una entrada de fecha/hora).  </li></ul></div><div id="pagebottom"></div>
</div>


<div id="footer" style="clear: both; margin: 0; padding: 0; border-bottom:1px solid #CCC;"></div><div id="copyright" style="font-size: 70%; text-align: center;">&copy;2010 Google</div>
</body></html>