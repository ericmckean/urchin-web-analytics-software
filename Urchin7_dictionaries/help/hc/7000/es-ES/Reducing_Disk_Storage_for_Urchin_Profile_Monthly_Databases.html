<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body><table id="top_location_line" width="100%"><table id="top_location_line" width="100%"><tr width="100%"><td><a href="http://www.urchin.com"><img border="0" src="../images/google_sm.gif" width="135" height="41"></a></td><td width="100%"><span id="top_line" style="width: 100%; float: left; clear: both; border-bottom: 1px solid #CCC;"><span id="top_title" style="float: left; margin-top: 10px;"><b>Help Center</b></span></td></tr></table>
<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en">
<p class="line867"><strong>Reducción del almacenamiento de disco de bases de datos mensuales de perfiles de Urchin</strong> <p class="line867"><strong>Visión general</strong> <p class="line874">Los datos de informes de Urchin se guardan en bases de datos mensuales independientes para cada perfil configurado en Urchin. Normalmente, estas bases de datos residen en el directorio data/reports de la distribución de Urchin. De forma predeterminada, Urchin mantiene un número ilimitado de estas bases de datos de perfiles mensuales. Para la mayor parte de los sitios de tamaño medio, los requisitos de almacenamiento son más modestos. Dado que la creación de informes de Urchin no necesita acceder a los registros sin procesar del servidor web, no es necesario mantenerlos una vez que ya se hayan procesado. Las bases de datos procesadas mensualmente de Urchin ocupan aproximadamente entre el 5 y el 10% del tamaño de los registros del servidor web sin procesar que se utilizaron para rellenar las bases de datos de Urchin; en la mayor parte de los casos, esto representa una cantidad mínima de espacio en el disco, incluso si mantienen todas las bases de datos de Urchin de forma indefinida. <p class="line874">Sin embargo, si se trata de sitios de gran tamaño que producen al día registros de servidor web de cientos o miles de megabytes, o de proveedores de alojamiento que tienen configurado un elevado número de perfiles, puede ser aconsejable la reducción de los requisitos de almacenamiento de datos actuales de Urchin. Esto puede cumplirse de una de las siguientes formas: <ol type="1"><li>Al configurar el perfil para que, una vez que se procesan los registros, se eliminen automáticamente los datos de seguimiento sin procesar. </li><li>Al configurar el perfil para que archive datos del historial. </li><li>Con la limitación del número de meses que se retienen los datos de informe del historial.  </li></ol><p class="line874">Al final de este artículo se incluyen instrucciones acerca de cada uno de estos métodos. <p class="line867"><strong>Visión general técnica acerca del almacenamiento de bases de datos de Urchin</strong> <p class="line874">Para cada perfil de Urchin, Urchin mantiene un conjunto de archivos de base de datos guardados mensualmente en directorios cuyos nombres corresponden a la estructura YYYYMM.  Cada uno de estos directorios contiene aproximadamente 50 archivos que ofrecen datos acerca del motor de creación de informes. El nombre de los archivos de bases de datos y directorios proviene del mes para el que guardan los datos. La lista completa de bases de datos es: <p class="line862">YYYYMM-uhed --&gt; cabecera de las bases de datos <p class="line862">YYYYMM -usti --&gt; índice de cadenas <p class="line862">YYYYMM -ustd --&gt; datos de cadenas <p class="line862">YYYYMM -udai --&gt; índice de tablas sin desglosar <p class="line862">YYYYMM -udXX --&gt; tablas de datos sin desglosar (XX se sustituye por el número de la tabla del mapa de datos) <p class="line862">YYYYMM -uvii --&gt; índice de usuarios <p class="line862">YYYYMM -uvid --&gt; datos de usuarios <p class="line862">YYYYMM -used --&gt; datos de sesión <p class="line862">YYYYMM -upad --&gt; datos de ruta <p class="line862">YYYYMM -utrd --&gt; datos de transacciones (Ecommerce) <p class="line862">YYYYMM -uitd --&gt; datos de elementos (Ecommerce) <p class="line862">YYYYMM -ulti --&gt; índice de seguimiento de registros <p class="line862">YYYYMM -ultd --&gt; datos de seguimiento de registros <p class="line862">YYYYMM -utod --&gt; datos totales <p class="line862">YYYYMM -uhid --&gt; datos de histograma  <p class="line862">YYYYMM -umad --&gt; datos de matriz de usuarios <p class="line874">Todos los conjuntos de bases de datos se completan con los datos que contienen para ese mes. Dado que no existen interdependencias entre los conjuntos de bases de datos mensuales, las operaciones de archivo y reducción se pueden realizar de forma independiente en cada base de datos sin que esto afecte a ningún otro mes. <p class="line874">En una situación de funcionamiento normal, se retiene el conjunto completado de archivos de base de datos mensual para cada mes. Sin embargo, cuatro de estos archivos de base de datos solo los utiliza el motor de procesamiento de registros de Urchin. Estos son: <p class="line874">YYYYMM-usti  <p class="line874">YYYYMM-udai  <p class="line874">YYYYMM-ulti <p class="line874">YYYYMM-ultd <p class="line874">Los archivos de base de datos siguientes son utilizados por el motor de procesamiento de registros de Urchin y para la segmentación cruzada y el desglose de usuarios en los informes.  La eliminación de contenidos solo afecta a las funciones de creación de informes. <p class="line874">YYYYMM-uvii  <p class="line874">YYYYMM-uvid  <p class="line874">YYYYMM-used  <p class="line874">YYYYMM-upad  <p class="line874">YYYYMM-utrd  <p class="line874">YYYYMM-uitd  <p class="line874">Estas bases de datos contienen información acerca de usuarios, sesiones, rutas, transacciones y productos. Estos archivos pueden representar un porcentaje substancial del espacio de almacenamiento total necesario para ese mes, entre el 10 y el 50%. Por lo tanto, la desactivación de la opción Conservar datos de seguimiento sin procesar de la pantalla Almacenamiento/base de datos de la configuración de perfiles puede suponer importantes ventajas de ahora de ahorrar espacio en el disco. <p class="line874">Se recomienda que solo los sitios web realmente concurridos, para los cuales mantener datos de seguimiento sin procesar pueda representar un problema de consumo de recursos de la CPU o del disco, desactiven el mantenimiento de datos de seguimiento sin procesar. <p class="line874">Potencialmente, también puede ahorrar espacio en el disco comprimiendo las bases de datos mensuales de Urchin de historial en archivos ZIP. Normalmente, los archivos resultantes ocupan sólo entre el 20 y el 30% del conjunto de bases de datos sin comprimir. Aunque el motor de creación de informes de Urchin no puede leer los archivos ZIP directamente, sí puede extraer sobre la marcha las bases de datos que necesita de archivos ZIP. Este proceso es totalmente transparente para la persona que vea los informes de Urchin, con la excepción de un pequeño retraso mientras se descomprimen las bases de datos. El motor de creación de informes no elimina las bases de datos que ha descomprimido; esto permite un acceso más rápido a los datos mientras la persona ve los informes de Urchin. Sin embargo, el archivo ZIP original se queda en su sitio, por lo que una simple limpieza periódica puede eliminar las bases de datos descomprimidas para recuperar espacio en el disco. <p class="line874">El último método para reducir los requisitos de almacenamiento de Urchin consiste en establecer una política para la duración de los informes del historial que ofrece Urchin. Por ejemplo, en entornos en los que Urchin se ofrece como un servicio de creación de informes con un paquete de alojamiento, es muy habitual proporcionar el historial de Urchin por un período de un año. Debido a la organización mensual de las bases de datos de Urchin, mediante secuencias de comandos automáticas resulta muy sencillo eliminar automáticamente bases de datos antiguas que hayan superado un límite de tiempo determinado. Cando se implementa una política de longitud de informes del historial, normalmente, los requisitos de almacenamiento de datos de Urchin se estabilizarán y solo aumentarán ligeramente cuando se haya alcanzado el límite de retención del historial. <p class="line867"><strong>Métodos para la reducción de almacenamiento de datos</strong> <p class="line867"><strong>Método 1: eliminación de los datos de seguimiento sin procesar después de procesar el registro</strong> <p class="line874">Puede configurar el perfil para que después del procesamiento se elimine la información de sesión y del usuario. En sitios de gran tamaño, esto mejora el rendimiento y reduce la cantidad de datos almacenados. Nota: cuando se selecciona esta configuración, las sesiones que se solapan con días se muestran como dos sesiones (una para cada día) en vez de mostrarse como solo una. La diferencia en los resultados será prácticamente imperceptible en la mayoría de los sitios. <p class="line874">Para configurar el perfil para que, después del procesamiento, elimine la información de sesión y del usuario: <ol type="1"><li><p class="line862">En la interfaz de administración, haga clic en Configuración y a continuación en Perfiles de Urchin --&gt;Perfiles. </li><li>Edite el perfil que desee. </li><li>En la ficha Almacenamiento/Base de datos, desactive el campo Conservar datos de seguimiento sin procesar. </li><li>Haga clic en Actualizar.  </li></ol><p class="line867"><strong>Método 2: archivado automático de datos del historial</strong> <p class="line874">Puede configurar el perfil para que comprima datos mensuales del historial en un archivo. Los informes pueden ver los datos archivados, pero no se pueden procesar resultados adicionales para los meses archivados. <p class="line874">Para configurar el perfil para que archive datos del historial: <ol type="1"><li><p class="line862">En la interfaz de administración, haga clic en Configuración y, a continuación, en Perfiles de Urchin --&gt;Perfiles. </li><li>Edite el perfil que desee. </li><li>En la ficha Almacenamiento/Base de datos, active el campo Archivar base de datos. </li><li>Especifique un número de meses para el campo Archivar base de datos después. </li><li>Haga clic en Actualizar.  </li></ol><p class="line867"><strong>Método 3: limitación de la retención de bases de datos para los informes del historial</strong> <p class="line874">Para cada perfil de Urchin, simplemente elimine todas las bases de datos del directorio data/reports/nombre-perfil que comiencen con el prefijo YYYYMM que hayan superado el umbral necesario para los informes de historial. Por ejemplo, si desea mantener un historial de informes de un año y el mes actual es febrero de 2004, elimine todas las bases de datos llamadas 200301-*data.un* para eliminar los datos de informes de enero de 2003 de dicho perfil de Urchin. Esto se repetirá para todas las bases de datos anteriores a enero de 2003. </div><div id="pagebottom"></div>
</div>


<div id="footer" style="clear: both; margin: 0; padding: 0; border-bottom:1px solid #CCC;"></div><div id="copyright" style="font-size: 70%; text-align: center;">&copy;2010 Google</div>
</body></html>