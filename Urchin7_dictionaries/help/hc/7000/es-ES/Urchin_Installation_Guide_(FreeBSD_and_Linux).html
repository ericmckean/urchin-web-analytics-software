<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body><table id="top_location_line" width="100%"><table id="top_location_line" width="100%"><tr width="100%"><td><a href="http://www.urchin.com"><img border="0" src="../images/google_sm.gif" width="135" height="41"></a></td><td width="100%"><span id="top_line" style="width: 100%; float: left; clear: both; border-bottom: 1px solid #CCC;"><span id="top_title" style="float: left; margin-top: 10px;"><b>Help Center</b></span></td></tr></table>
<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en">
<p class="line867"><strong>Guía de instalación de Urchin 6 (FreeBSD y Linux)</strong> <ul><li style="list-style-type:none"><p class="line891"><em>Autor: </em> <a href="EpikOne.html">EpikOne</a>', asesor autorizado del software Urchin.<em> </em> </li></ul><p class="line867"><strong>Antes de empezar: nota importante para usuarios de Urchin 6.500</strong> <p class="line862">En Urchin 6.501 se han corregido varios errores del Programador de CPC. Si va a actualizar de Urchin 6.500 a Urchin 6.601, los datos de CPC procesados pueden ser·incorrectos·o·estar·incompletos dando lugar a resultados erróneos en los informes de Urchin. Para obtener datos correctos de Google AdWords, le recomendamos que (a) instale Urchin 6.601 en otra ubicación o que (b) elimine los datos de CPC antiguos en caso de que quiera instalar el programa en la ubicación existente de 6.500. Si este último es su caso, elimine el contenido de los directorios siguientes: <p class="line867"><pre>&lt;ruta_de_instalación_de_urchin_6500&gt;/data/cpc/...
&lt;ruta_de_instalación_de_urchin_6500&gt;/data/history/cpc/...
</pre><p class="line874">No debe realizar ninguna acción si actualiza desde las versiones Urchin 6.600 y 6.501 o desde Urchin 6.402 y versiones anteriores. <p class="line867"><strong>Antes de empezar: nota importante para usuarios de FreeBSD</strong> <ul><li>El límite de codificación de forma rígida de datos en el código fuente de FreeBSD es de 500 MB, insuficiente para que se ejecute Urchin debido al tamaño de la información geográfica que debe permanecer en la memoria durante el procesamiento de registros. Durante el tiempo de ejecución, aparece el siguiente error: </li></ul><p class="line867"><pre>ERROR: (8011-323-1057) Asignación de memoria no realizada
</pre><ul><li style="list-style-type:none">Para solucionar este problema, aumente el tamaño de los datos del proceso predeterminado del sistema FreeBSD. Para ello, edite el archivo /boot/loader.conf y añada las líneas siguientes: </li></ul><p class="line867"><pre># Increase max process data segment size to 1GB
kern.maxdsiz="1073741824"
</pre><ul><li style="list-style-type:none">A continuación, reinicie el sistema. </li><li>FreeBSD posee un controlador especial llamado accf_http. Se ocupa de almacenar las conexiones entrantes en el búfer hasta llegar a una cantidad de solicitudes de HTTP determinada para agilizar y optimizar el rendimiento. Este controlador no se carga en el kernel de forma predeterminada y aparece la siguiente advertencia: </li></ul><p class="line867"><pre>[warn] (2)El archivo o directorio no existe: no se ha podido activar Aceptar filtro ‘httpready’
</pre><ul><li style="list-style-type:none">Para evitar este problema, tiene que activar Aceptar filtro HTTP del módulo kernel de FreeBSD (accf_http) editando el archivo /boot/loader.conf y añadiendo estas líneas: </li></ul><p class="line867"><pre># Wait for full HTTP request accept filter
accf_http_load="YES"
</pre><ul><li style="list-style-type:none">A continuación, reinicie el sistema. </li></ul><p class="line867"><strong>ADVERTENCIA</strong>: tenga mucha precaución cuando cambie los límites del sistema de esta manera. Si aumenta  demasiado el límite de tamaño de kern.maxdsiz, es posible que el sistema no pueda reiniciarse. Le <strong>recomendamos encarecidamente</strong> que consulte la documentación de FreeBSD antes de realizar tal modificación y que, además, evalúe los posibles riesgos a medida que se vayan produciendo en la configuración específica de su sitio. <p class="line867"><strong>Visión general de los pasos de la instalación</strong> <ul><li>Instale el servidor de base de datos en el sistema Urchin o añada la base de datos de Urchin a un servidor existente. Motores de base de datos compatibles actualmente: <ul><li>MySQL 5.0.3 o versiones superiores (Nota: a partir de Urchin 6.6, MySQL 4.x.x ya no es compatible) </li><li>PostgreSQL 8.2.5 o versiones superiores </li></ul></li><li>Cree la base de datos y el usuario de Urchin en el servidor de base de datos y conceda permisos de acceso. </li><li>Descomprima la distribución de Urchin en un directorio temporal. </li><li>Ejecute la secuencia de comandos install.sh. </li><li>Registre la licencia para la instalación de Urchin. </li></ul><p class="line867"><strong>Opción 1: utilización de MySQL con Urchin</strong> <ul><li><p class="line862">Si aún no dispone de un servidor MySQL instalado en el sistema, puede obtener una copia en la dirección <a class="http" href="http://dev.mysql.com/downloads/">http://dev.mysql.com/downloads/</a>. </li><li>Instale el servidor MySQL siguiendo las instrucciones del sitio web de MySQL. </li><li>Asegúrese de conocer el nombre de usuario del administrador de la base de datos MySQL (por ejemplo, raíz) y la contraseña. </li><li>Elija el nombre de la base de datos, nombre de usuario MySQL local y contraseña que utilizará con Urchin. Guarde esta información, ya que la necesitará durante la instalación del programa. Mediante el ejemplo siguiente se crea una base de datos denominada urchin, cuyo nombre de usuario MySQL es urchin y la contraseña, urchinpassword; aunque, obviamente, sería recomendable que utilizara su propia contraseña. </li><li>Cree la base de datos, el usuario y los permisos de acceso mediante los siguientes comandos: </li></ul><p class="line867"><pre>root@yourserver# mysql -u root -p
mysql&gt; create database urchin character set utf8;
mysql&gt; GRANT ALL ON urchin.* to 'urchin'@'localhost' IDENTIFIED BY 'urchinpassword';
</pre><ul><li>Especifique el nombre de la ruta del socket MySQL para establecer comunicación con su servidor MySQL. Por lo general, encontrará dicha ruta en el archivo my.cnf de su copia de MySQL; busque una línea similar a socket=/var/lib/mysql/mysql.sock </li></ul><p class="line867"><strong>Opción 2: utilización de PostgreSQL con Urchin</strong> <ul><li><p class="line862">Si aún no dispone de un servidor PostgreSQL instalado en el sistema, puede obtener una copia en la dirección <a class="http" href="http://www.postgresql.org">http://www.postgresql.org</a>. </li><li>Instale el servidor PostgreSQL siguiendo las instrucciones del sitio web de PostgreSQL. </li><li>Asegúrese de que el comando psql esté incluido en la ruta y de que conoce el nombre de usuario de administrador de la base de datos PostgreSQL (por ejemplo, pgsql) y la contraseña. </li><li>Elija el nombre de la base de datos, nombre de usuario PostgreSQL local y contraseña que utilizará con Urchin. Guarde esta información, ya que la necesitará durante la instalación del programa. Mediante el ejemplo siguiente se crea una base de datos denominada urchin, cuyo nombre de usuario PostgreSQL es urchin y la contraseña, urchinpass; aunque, obviamente, sería recomendable que utilizara su propia contraseña. </li><li>Cree la base de datos, el usuario y los permisos de acceso mediante los siguientes comandos: </li></ul><p class="line867"><pre>root@yourserver# psql -U pgsql -d postgres
postgres=# CREATE DATABASE urchin WITH ENCODING 'UTF8';
postgres=# CREATE USER urchin WITH PASSWORD 'urchinpass';
postgres=# GRANT ALL ON DATABASE urchin TO urchin;
postgres=# \connect urchin;
postgres=# CREATE LANGUAGE 'PLPGSQL';
</pre><p class="line867"><strong>Instalación de Urchin</strong> <ul><li>Asegúrese de tener el nombre de la base de datos de Urchin, el usuario y la contraseña seleccionados anteriormente. </li><li>Cree un directorio temporal y descomprima la distribución de Urchin allí mismo: </li></ul><p class="line867"><pre>mkdir /var/tmp/urchintemp
cd /var/tmp/urchintemp
tar xzvf urchin6601_&lt;platform&gt;_installer.tar.gz
</pre><p class="line867"><strong>Importante</strong>. Para garantizar la correcta instalación del programa, asegúrese de que no hay ninguna copia de Urchin 6 activa en el equipo en cuestión. Si no fuera así, inhabilite Urchin 6 mediante el comando siguiente: <p class="line867"><pre>/path/to/urchin6/bin/urchinctl stop
</pre><ul><li>Si necesita ejecutar varias copias de Urchin 6 en el mismo equipo, deberá (1) instalarlas en ubicaciones distintas, (2) disponer de varios puertos de servidor web y (3) establecer conexión con distintas bases de datos. </li><li>Urchin copia los archivos necesarios en las carpetas de destino y sobrescribe los archivos existentes. Para poder conservar la configuración, deberá instalar Urchin 6 en otro directorio o bien cambiar el nombre del directorio de instalación existente. </li><li>Urchin 6.601 puede instalarse desde cero o bien como actualización de una versión de Urchin 6. <ul><li>Si se instala desde cero, Urchin solicita al usuario los parámetros de configuración, como el puerto de servidor web, la configuración de la base de datos, etc. Si se actualiza, Urchin aprovecha la configuración existente de Urchin 6. </li><li>Urchin 6.601 sólo puede utilizarse como actualización de determinadas versiones anteriores de Urchin 6. Estas son las versiones que pueden actualizarse: <ul><li>Urchin 6.6, versión en inglés       : versión 6.600 </li><li>Urchin 6.5, Service Pack 2            :   versión 6.501 </li><li>Urchin 6.5                             :   versión 6.500 (véase la nota importante anterior) </li><li>Urchin 6, Service Pack 1         :   versión 6.402 </li><li>Urchin 6, versión internacional:   versión 6.401 </li><li>Urchin 6, versión en inglés         :   versión 6.400 </li></ul></li><li>Cuando realice una instalación nueva, Urchin le preguntará si desea inicializar las tablas de base de datos. Si desea conservar la configuración de base de datos existente, seleccione 'No'.  En este caso, aunque Urchin conserve los parámetros (ya que no se vuelven a crear tablas), quizás deban crearse tablas adicionales o columnas en tablas que ya existen. </li></ul></li><li>A continuación, ejecute el programa de instalación de Urchin. Puede ejecutarlo de manera interactiva y seguir las instrucciones escribiendo: </li></ul><p class="line867"><pre>./install.sh
</pre><p class="line874">o puede realizar una instalación completa directamente desde la línea de comandos, facilitando los parámetros necesarios para el proceso. Puede obtener una lista de los parámetros de la línea de comandos escribiendo: <p class="line867"><pre>./install.sh -h
</pre><ul><li>Una vez que haya finalizado la instalación, dispondrá de Urchin en su sistema. Para concluir el proceso, introduzca la siguiente URL en el navegador: </li></ul><p class="line867"><pre>http://yourserver:&lt;port&gt;
</pre><p class="line862">donde &lt;port&gt; es el puerto de la red que eligió durante la instalación (el puerto predeterminado es 9999). <ul><li>Si desea restaurar los datos de informe de perfil de una versión anterior de Urchin 6, copie los directorios de historial, informes y cpc de /path/to/old-urchin6/data/ al nuevo directorio /path/to/new-urchin6/data/. </li><li>Haga clic en el enlace Obtener licencia para la versión de prueba y siga los pasos para habilitar Urchin y ajustar la configuración. </li></ul><p class="line867"><strong>Configuración de la función de seguimiento</strong> <p class="line874">Una vez que haya instalado Urchin, según el uso que vaya a darle a la aplicación,  deberá llevar a cabo ciertos pasos para configurar la función de seguimiento en su sitio web. <p class="line867"><strong>Caso 1: utilización de Urchin con seguimiento de IP+User-Agent</strong>. <p class="line874">No se requiere ajustar ninguna otra configuración. Cuando añada perfiles en Urchin, asegúrese de especificar IP+User-Agent como el método de seguimiento de usuarios. <p class="line867"><strong>Caso 2: utilización de Urchin con seguimiento de Supervisor de tráfico de Urchin (UTM)</strong>. <p class="line862">Para utilizar Urchin con el seguimiento de UTM, es necesario instalar un pequeño fragmento de código de seguimiento JavaScript en cada una de las páginas del sitio web. Para ello, siga los pasos que se indican a continuación: <ul><li><p class="line862">Copie los archivos urchin.js y <tt class="backtick">__</tt>utm.gif del directorio util/utm de la distribución de Urchin en la raíz del documento de su sitio web (por ejemplo, en el directorio de primer nivel del contenido). </li><li>En cada página del sitio web, inserte el siguiente código de seguimiento justo después de las etiquetas META en la sección HEAD: </li></ul><p class="line867"><pre>&lt;script src="/urchin.js" type="text/javascript"&gt;
&lt;/script&gt;
&lt;script type="text/javascript"&gt;
  _userv=0;
  urchinTracker();
&lt;/script&gt;
</pre><ul><li>Cuando añada perfiles en Urchin, asegúrese de especificar Supervisor de tráfico de Urchin (UTM) como el método de seguimiento de usuarios. </li></ul><p class="line867"><strong>Caso 3: utilización de Urchin y Google Analytics al mismo tiempo</strong>. <p class="line874">Recuerde que las nuevas funciones de seguimiento que incorpora el código de seguimiento "ga.js" de Google Analytics no son compatibles con Urchin 6. Si desea supervisar su sitio web tanto con Google Analytics como con el software Urchin, le recomendamos que utilice el código de seguimiento basado en urchin.js para obtener unos resultados óptimos. Si opta por utilizar ga.js, no podrá utilizar las nuevas funciones de seguimiento de ga.js. <p class="line874">Para utilizar Urchin en un sitio web que ya se supervisa con Google Analytics, solo deberá realizar algunas modificaciones en el código de seguimiento que emplea Google Analytics. Para ello, siga los pasos que se indican a continuación: <ul><li><p class="line862">Copie exclusivamente el archivo <tt class="backtick">__</tt>utm.gif del directorio util/utm de la distribución de Urchin a la raíz del documento de su sitio web (por ejemplo, en el directorio de nivel superior del contenido). </li><li><p class="line862">Añada la línea <tt>_userv=2;</tt> tal como se indica a continuación al código de seguimiento existente en las páginas de su sitio web. Asegúrese de no modificar ningún otro fragmento del código existente. </li></ul><p class="line867"><pre>&lt;script src="http://www.google-analytics.com/urchin.js"
type="text/javascript"&gt;
&lt;script type="text/javascript"&gt;
  _userv=2;
  _uacct="UA-XXXXXXX-Y";
  urchinTracker();
&lt;/script&gt;
</pre><ul><li>Cuando añada perfiles en Urchin, asegúrese de especificar Supervisor de tráfico de Urchin (UTM) como el método de seguimiento de usuarios. </li></ul></div><div id="pagebottom"></div>
</div>


<div id="footer" style="clear: both; margin: 0; padding: 0; border-bottom:1px solid #CCC;"></div><div id="copyright" style="font-size: 70%; text-align: center;">&copy;2010 Google</div>
</body></html>