<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body><table id="top_location_line" width="100%"><table id="top_location_line" width="100%"><tr width="100%"><td><a href="http://www.urchin.com"><img border="0" src="../images/google_sm.gif" width="135" height="41"></a></td><td width="100%"><span id="top_line" style="width: 100%; float: left; clear: both; border-bottom: 1px solid #CCC;"><span id="top_title" style="float: left; margin-top: 10px;"><b>Help Center</b></span></td></tr></table>
<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en">
<p class="line867"><strong>Prácticas recomendadas para la rotación de registros</strong> <p class="line867"><strong>Visión general</strong> <p class="line874">Es muy frecuente que en la mayor parte de los entornos operativos de servicios y aplicaciones del sistema, como servidores web, se generen archivos de registro en los que se registran acciones y eventos relativos a dichos servicios. En la mayor parte de los casos, también constituye una práctica estándar del sistema operativo y de las aplicaciones el mantenimiento regular de los archivos de registro para preservar el tamaño de los que se están comprobando. Esto evita que los archivos de registro superen los límites permitidos y terminen agotando el espacio del disco. <p class="line874">Un planteamiento habitual en la administración de registros consiste en su rotación programada de forma regular, de forma que se cambie el nombre de los registros existentes por medio de una marca de tiempo y, a continuación, se reinicie el servicio o la aplicación con un nuevo archivo de registro de longitud cero. También constituye una práctica estándar el hecho de que la tarea de rotación del registro comprima los archivos del registro antiguos y los elimine al cabo de un cierto período de tiempo o de que se haya superado el umbral del ciclo de rotación. <p class="line874">En el caso específico de registros del servidor web, la rotación se realiza normalmente a diario para asegurar que los registros se mantienen en un tamaño manejable. Además, generalmente un programa de rotación diaria ofrece un mayor detalle para facilitar el posprocesamiento de los registros de servidor web con una herramienta de análisis como Urchin. Algunos servidores web como IIS de Microsoft disponen de una funcionalidad de rotación de registros integrada que, cuando está activada, rota los registros a diario de forma predeterminada. Otros servidores web, como Apache, carecen de un gestor de rotación del registro explícito, pero ofrecen herramientas para reiniciar fácilmente el servidor web (sin pérdida del servicio web) para acomodar la operación de rotación del registro (por ejemplo, apachectl restart). <p class="line867"><strong>Prácticas para la rotación del registro</strong> <p class="line874">Gracias a la tecnología de Seguimiento de registro de Urchin, se ha eliminado la necesidad de la rotación del registro para evitar el procesamiento duplicado de registros. Esto permite a Urchin una mayor flexibilidad en el procesamiento de registros, como la capacidad para procesar registros activos en los que todavía está escribiendo el servidor web o registros que se están rotando de forma manual o irregular. <p class="line867"><strong>Nota importante:</strong> a diferencia de lo que ocurría en versiones anteriores de Urchin, Urchin 6 no ofrece conexiones para ejecutar un procedimiento de rotación del registro o reiniciar un servidor web después de que se hayan realizado las tareas de rotación, aunque sí son posibles algunas acciones de posprocesamiento de registros, como se describe a continuación. <p class="line874">Aunque el funcionamiento de Urchin 6 no requiere la rotación, ni regular ni de ningún tipo, de los registros del servidor, se recomienda la implementación de un esquema de rotación de registros estándar para asegurar el correcto funcionamiento y para evitar que la utilidad Seguimiento de registros tenga que realizar un elevado número de procesamientos innecesarios. Tanto para el sistema como para la aplicación, resulta mucho más eficaz administrar varios registros pequeños en vez de uno grande, ya que las operaciones de archivos tienden a ralentizarse considerablemente a medida que aumenta el tamaño de estos. Además, en caso de que se produzca un error en el disco o en el sistema, resulta mucho más sencillo realizar copias de seguridad y restablecer archivos pequeños. <p class="line874">Los mecanismos de rotación del registro no tienen por qué ser excesivamente complejos, en la mayor parte de los casos es suficiente con la simple ejecución diaria de una secuencia de comandos Perl o del shell desde Cron en sistemas de tipo UNIX, que simplemente necesita rotar el registro del servidor web existente, asignarle una marca de tiempo (se recomienda la utilización de los formatos %Y%m%d o YYYYMMDD) y reiniciar el servidor web. A mayores, puede aplicarse cualquier otro tipo de técnica para reducir los archivos de registro antiguos y mantener a punto el espacio del disco.  <p class="line867"><strong>Configuración de Urchin para su uso con la rotación del registro</strong> <p class="line862">Una vez que disponga de su esquema de rotación, simplemente bastará con configurar Urchin para que procese su registro rotado. Puede configurar la especificación de Ruta del archivo rotado para que utilice un comodín que concuerde con el patrón de nombre de archivo del registro con marca temporal al configurar una fuente del registro (por ejemplo, access-log.* para registros de Apache o ex*.log para registros de IIS) o puede usar la concordancia de patrón de marca temporal integrada de Urchin (por ejemplo, access-log.%Y%m%d para Apache, ex%y%m%d.log para IIS). Cuando Urchin encuentra este patrón, substituirá la fecha del día anterior por el patrón Y%m%d y procesará el registro con el nombre de archivo resultante (por ejemplo, access-log.20020617). Para obtener más información acerca del patrón de concordancia de fecha, consulte Caracteres comodín y substitución de fechas en la ruta del registro. <p class="line874">La especificación de comodines ofrece la ventaja de permitirle colocar un número de registros no procesados en un único directorio para que Urchin los procese la próxima vez que se ejecute. Esto es especialmente útil en situaciones en las que los archivos de registro esperados no se encuentren en su sitio cuando se ejecuta Urchin, por ejemplo, porque el servidor web no esté activo o se haya perdido la conectividad de red. La desventaja es que Urchin debe abrir el directorio y buscar cada archivo de registro para determinar si ya se ha procesado, lo que puede inducir a una sobrecarga significativa cuando haya muchos archivos de registro en el directorio. Si considera que su esquema de rotación del registro es fiable, el uso del esquema de concordancia de patrones YYYYMMDD es un método más eficaz. <p class="line862">Urchin 6 también puede eliminar o archivar/comprimir el registro una vez procesado. Pueden establecerse distintas opciones de destino del registro en la configuración avanzada de una fuente del registro. Para obtener más información acerca de la configuración del destino del registro, consulte Administración de registros. <p class="line867"><strong>Importante</strong> Las opciones de destino del registro no deben utilizarse en registros activos que no se hayan rotado. <p class="line867"><strong>Configuración de la rotación del registro en sistemas de tipo UNIX</strong> <p class="line874">Debido a la gran variedad de configuraciones del servidor web y de la funcionalidad del sistema operativo, así como a la alta probabilidad de que los procedimientos de rotación del registro sean específicos del sitio, no existe ningún método para el establecimiento de la rotación del registro del servidor web en sistemas UNIX-type.  <p class="line867"><strong>Configuración de la rotación del registro de Windows IIS Webserver</strong> <p class="line874">Como se mencionó anteriormente, las funciones de administración de IIS permiten la rotación del registro automática de registros del servidor web, aunque esta función no está activada de forma predeterminada. Siga los pasos que se indican a continuación para configurar un servidor web IIS para la rotación del registro adecuada. Se recomienda que los registros se roten a diario y que esta rotación se realice en relación a la hora local. De forma predeterminada, IIS rotará los registros a medianoche GMT en vez de hacerlo a la hora local. <p class="line874">En Windows 2000, debe asegurarse de que el servidor web IIS esté configurado de forma adecuada para rotar el registro. Esto se consigue por medio de la función de Administración del equipo de Windows 2000. Windows NT, Windows XP y Windows 2003 Server utilizan un procedimiento similar. Para abrir la Administración del equipo y establecer la rotación del registro, realice las acciones siguientes: <ul><li><p class="line862">Haga clic en Inicio -&gt; Configuración -&gt; Panel de control. </li><li>Haga doble clic en "Herramientas administrativas". </li><li>Haga doble clic en "Administración de equipos". </li><li>Haga doble clic en "Servicios de Internet Information Server". </li><li>Haga clic con el botón secundario del ratón en "Sitio Web predeterminado" y seleccione "Propiedades". </li><li>En la ventana emergente, seleccione la pestaña "Sitio Web". </li><li>En la parte inferior de la ventana, haga clic en la pestaña "Propiedades". </li><li>Haga clic en el botón de opción "Diariamente" bajo el encabezado "Frecuencia de registro". </li><li>Haga clic en la casilla de verificación Usar la hora local para nomenclatura y conversión de archivos. </li></ul><p class="line874">De esta forma se asegurará de que IIS rota los registros del servidor web a diario después de medianoche. </div><div id="pagebottom"></div>
</div>


<div id="footer" style="clear: both; margin: 0; padding: 0; border-bottom:1px solid #CCC;"></div><div id="copyright" style="font-size: 70%; text-align: center;">&copy;2010 Google</div>
</body></html>