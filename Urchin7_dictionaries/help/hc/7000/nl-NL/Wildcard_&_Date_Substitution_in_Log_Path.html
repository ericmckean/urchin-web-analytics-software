<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body><table id="top_location_line" width="100%"><table id="top_location_line" width="100%"><tr width="100%"><td><a href="http://www.urchin.com"><img border="0" src="../images/google_sm.gif" width="135" height="41"></a></td><td width="100%"><span id="top_line" style="width: 100%; float: left; clear: both; border-bottom: 1px solid #CCC;"><span id="top_title" style="float: left; margin-top: 10px;"><b>Help Center</b></span></td></tr></table>
<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en">
<p class="line867"><strong>Datum/tijd vervangen door jokerteken in padnaam van logbestand</strong> <p class="line867"><strong>Overzicht</strong> <p class="line874">U kunt met Urchin jokertekens en variabelen voor het zoeken naar datums opgeven in het pad voor een logbestand. Wanneer een Urchin-taak wordt uitgevoerd en het pad van het logbestand wordt gelezen, worden deze variabelen omgezet en gecontroleerd op overeenkomsten in de directory's en bestandsnamen in uw systeem. <p class="line874">De functies voor het zoeken naar datums in Urchin 6 zijn uitgebreider dan in eerdere versies van Urchin: <ul><li>Het vervangen van de datum kan op elk gewenst punt in de padnaam van het logbestand plaatsvinden. Vorige versies van Urchin stonden alleen vervangingen in de bestandsnaam toe. </li><li>Een stabieler en flexibeler algoritme voor het vinden van gegevenspatronen is toegevoegd, hoewel de vorige functie voor het vinden van het JJJJMMDD-patroon nog steeds wordt ondersteund voor compatibiliteit met oudere versies. </li></ul><p class="line874">Hieronder worden de meestgebruikte variabelen en notaties voor het zoeken naar tijden weergegeven. Een overzicht van alle ondersteunde variabelen voor de tijdnotatie wordt aan het eind van dit artikel weergegeven. <p class="line874">* een sterretje staat voor nul of meer opeenvolgende tekens DD wordt vervangen door de tweecijferige dag van de maand, bijvoorbeeld 01-31 %d is hetzelfde als DD MM wordt vervangen door de tweecijferige maand, bijvoorbeeld 01-12 %M is hetzelfde als MM JJ wordt vervangen door het tweecijferige jaar, bijvoorbeeld 01-03 JJJJ wordt vervangen door het viercijferige jaar, bijvoorbeeld 2001-2003 %Y is hetzelfde als JJJJ <p class="line874">In deze context wordt het sterretje gebruikt voor het vergelijken van de bestandsnaam, zoals in een opdrachtshell in UNIX of DOS. Het sterretje werkt hier niet als in reguliere expressies waarbij dit teken overeenkomt met nul of meer instanties van het voorgaande teken. Deze variabelen kunnen op elke gewenste manier worden gecombineerd. <p class="line874">De onderstaande lijst bevat voorbeelden van de manier waarop deze variabelen worden omgezet in 08/13/2003. De datumaanduidingen DD en %d worden omgezet in de dag vóór 13. <ul><li>JJJJMMDD wordt omgezet in 20030812 </li><li>%Y-%m-%d wordt omgezet in 2003-08-12 </li><li>%Y/%m/%d wordt omgezet in 2003/08/12 (houd er rekening mee dat dit gevolgen heeft in een pad) </li><li>*JJJJMMDD komt overeen met elke bestandsnaam die eindigt met de tekenreeks 20030812  </li></ul><p class="line874">De dagaanduidingen DD en %d worden standaard geconverteerd naar de vorige dag vanwege de manier waarop webserverlogbestanden en de verwerking door Urchin worden beheerd. Uw logbestanden worden meestal dagelijks geroteerd om te voorkomen dat ze te groot worden en zodat elk logbestand de gegevens voor één dag bevat. Deze rotatie vindt meestal net voor middernacht plaats. Verwerking van Urchin vindt meestal na middernacht plaats wanneer de volgende dag van de maand is begonnen. Als u een tijdstempel met de notatie JJJJMMDD toevoegt aan de naam van uw logbestand wanneer dit wordt geroteerd, verschillen die datum en de uitvoertijd van Urchin één dag. Als u een dagconversie bekijkt op het moment dat Urchin wordt uitgevoerd, kunt u de juiste logbestandsnaam niet vinden omdat de tijdstempel 20030812 is maar Urchin wordt uitgevoerd op 20030813. <p class="line874">Hoewel dit het meest algemene model is voor logbestandsbeheer, is dit niet de enige optie. Daarom heeft Urchin een configuratieparameter die de manier regelt waarop deze variabelen worden omgezet in een bepaalde dag. De instelling 'Datum/tijd vervangen door jokerteken in padnaam logbestand' kan worden gebruikt om een tijdsverschil aan te passen dat bepaalt hoe DD en %d worden geëvalueerd. Deze instelling wordt onder aan dit artikel verder uitgelegd. <p class="line874">De variabelen voor het jaar, de maand en de dag kunnen worden gebruikt in de logbestandsnaam of in het pad (directory/map) van het logbestand. Het sterretje kan alleen worden gebruikt in het bestandsnaamgedeelte van het pad van het logbestand. Variabelen voor de tijdnotatie kunnen worden herhaald binnen een pad naar een logbestand maar het sterretje kan maar één keer worden gebruikt. In de voorbeelden in het gedeelte Procedure wordt dit verder uitgelegd. <p class="line867"><strong>Procedure</strong> <p class="line874">Wanneer u een logbestandsbron maakt of bewerkt, moet u de tijdvariabelen gebruiken in het pad dat u opgeeft in het vak 'Pad logbestand' op het tabblad 'Instellingen logbestand'. Een standaard rotatieschema voor logbestanden van een Apache-webserver maakt een logbestand met de tijdstempel die de datum van de logbestandsvermeldingen aanduidt. 1 minuut na middernacht op 07/16/2002 wordt in het logbestand geregistreerd als: <pre>/var/log/httpd/access.log
</pre><p class="line874">en opgeslagen als <pre>/var/log/httpd/access.log.20020715
</pre><p class="line874">Om overeenkomende gegevens voor dit patroon te vinden in de logbestandsbron voor een Urchin-profiel, geeft u <pre>/var/log/httpd/access.log.YYYYMMDD
</pre><p class="line874">op bij 'Pad logbestand'. Urchin zoekt dan automatisch naar het logbestand van de vorige dag wanneer het programma die dag wordt uitgevoerd. Nog een voorbeeld: als de Microsoft IIS-webserver is geconfigureerd om logbestanden dagelijks te roteren, wordt de huidige datum opgenomen in de bestandsnaam, bijvoorbeeld ex021127.log. Als u dus dagelijks een IIS-logbestand wilt verwerken, gebruikt u bijvoorbeeld: <pre>C:\WINNT\System32\LogFiles\W3SVC1\exYYMMDD.log
</pre><p class="line874">voor het logbestand in het veld 'Pad logbestand' bij 'Bron logbestand' voor het profiel. <p class="line874">Als u met Urchin logbestanden wilt kunnen verwerken die vaker worden geroteerd dan één keer per dag, kunt u een combinatie gebruiken van de JJJJMMDD-indeling en jokertekens om alle logbestanden te vinden die de vorige dag zijn gemaakt. U moet er wel zeker van zijn dat het geroteerde logbestand de juiste naam heeft, bijvoorbeeld met een uur toegevoegd aan de bestandsnaam. Voor 'Pad logbestand' kunt u het volgende patroon gebruiken: <pre>/var/log/httpd/access.log.YYYYMMDD*
</pre><p class="line874">of <pre>C:\WINNT\System32\LogFiles\W3SVC1\exYYMMDD*.log
</pre><p class="line874">Ingewikkelder is de methode waarbij de logbestanden worden opgeslagen in directory's die het jaar, de maand en de dag aanduiden. Stel dat u de volgende directorypaden gebruikt voor het opslaan van logbestanden: <pre>/logs/2003/07
/logs/2003/08
/logs/2003/09
</pre><p class="line874">en dat u alle logbestanden voor een bepaalde maand in deze directory's heeft bewaard, en dat aan elk logbestand de dag van de maand is toegevoegd (bijvoorbeeld access.log.01, access.log.02). Om ervoor te zorgen dat Urchin kan bepalen welke logbestanden moeten worden verwerkt, kunt u een van de volgende padnotaties gebruiken: <pre>/logs/YYYY/MM/access.log.DD
/logs/%Y/%M/access.log.%d
</pre><p class="line874">Op tijdstippen voor logbestandsverwerking verwerkt Urchin alle logbestanden die overeenkomen met het datumpatroon van gisteren, met elk achtervoegsel. Zoals gebruikelijk bij jokertekens in het veld 'Pad logbestand' is het belangrijk dat 'Logboek traceren' is ingeschakeld voor het profiel om ervoor te zorgen dat Urchin logbestanden niet opnieuw verwerkt. <p class="line867"><strong>Aandachtspunten</strong> <p class="line874">Om de datum te bepalen voor het vervangingspatroon, trekt Urchin 24 uur af van de huidige tijd, gebaseerd op de lokale tijd. De maand en het jaar worden correct verwerkt. U kunt dit echter aanpassen met de instelling 'Datum/tijd vervangen door jokerteken in padnaam logbestand' op het tabblad 'Geavanceerde instellingen' van een logbestandsbron. U kunt de lokale tijd of GMT-tijd gebruiken als de basis voor uw tijdsaanpassingen en in het vak 'Uren bewerken' een verschuiving in uren (omhoog of omlaag) opgeven. <p class="line867"><strong>Uitgebreide referentie voor datum- en tijdnotaties</strong> <p class="line874">Dit is de volledige lijst met ondersteunde variabelen voor de tijdnotatie die de conventies volgt van de Standard C Library strftime()-routine: <ul><li>%A = nationale representatie van de volledige naam van de dag van de week. </li><li>%a = nationale representatie van de afgekorte naam van de dag van de week. </li><li>%B = nationale representatie van de volledige naam van de maand. </li><li>%b = nationale representatie van de afgekorte naam van de maand. </li><li>%d = de dag van de maand als een decimaal getal (01-31). </li><li>%e = de dag van de maand als een decimaal getal (1-31); enkelvoudige cijfers worden voorafgegaan door witruimte. </li><li>%H = het uur (in 24-uursnotatie) als een decimaal getal (00-23). </li><li>%I = het uur (in 12-uursnotatie) als een decimaal getal (01-12). </li><li>%j = de dag van het jaar als een decimaal getal (001-366). </li><li>%k = het uur (in 24-uursnotatie) als een decimaal getal (0-23); enkelvoudige cijfers worden voorafgegaan door witruimte. </li><li>%l = het uur (in 12-uursnotatie) als een decimaal getal (1-12); enkelvoudige cijfers worden voorafgegaan door witruimte. </li><li>%M = de minuut als een decimaal getal (00-59). </li><li>%m = de maand als een decimaal getal (01-12). </li><li>%p = nationale representatie van "ante meridiem" of "post meridiem" zoals van toepassing. </li><li>%S = de seconde als een decimaal getal (00-60). </li><li>%s = het aantal seconden sinds de Epoch, UTC (zie 'mktime(3)'). </li><li>%w = de dag van de week (zondag als eerste dag van de week) als een decimaal getal (0-6). </li><li>%Y = het jaar met de eeuw als een decimaal getal. </li><li>%y = het jaar zonder de eeuw als een decimaal getal (00-99). </li><li>%z = de tijdzone als verschil met de UTC; een inleidend plusteken voor zones ten oosten van de UTC, een minteken voor zones ten westen van de UTC; uren en minuten worden elk met twee cijfers aangegeven zonder scheidingsteken hiertussen (algemene notatie voor datumheaders in de RFC 822-standaard). </li><li>%% = `%'. (te gebruiken wanneer een letterlijk procentteken nodig is in een datum-/tijditem)  </li></ul></div><div id="pagebottom"></div>
</div>


<div id="footer" style="clear: both; margin: 0; padding: 0; border-bottom:1px solid #CCC;"></div><div id="copyright" style="font-size: 70%; text-align: center;">&copy;2010 Google</div>
</body></html>