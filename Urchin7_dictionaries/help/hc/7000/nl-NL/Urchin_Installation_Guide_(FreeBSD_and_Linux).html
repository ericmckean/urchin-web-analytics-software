<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body><table id="top_location_line" width="100%"><table id="top_location_line" width="100%"><tr width="100%"><td><a href="http://www.urchin.com"><img border="0" src="../images/google_sm.gif" width="135" height="41"></a></td><td width="100%"><span id="top_line" style="width: 100%; float: left; clear: both; border-bottom: 1px solid #CCC;"><span id="top_title" style="float: left; margin-top: 10px;"><b>Help Center</b></span></td></tr></table>
<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en">
<p class="line867"><strong>Installatiehandleiding voor Urchin 6 (FreeBSD en Linux)</strong> <ul><li style="list-style-type:none"><p class="line891"><em>Dit artikel is geschreven door </em><a href="EpikOne.html">EpikOne</a><em>, een geautoriseerde softwareconsultant voor Urchin</em> </li></ul><p class="line867"><strong>Voordat u begint: belangrijke opmerking voor gebruikers van Urchin 6.500</strong> <p class="line862">Urchin 6.501 biedt oplossingen voor diverse problemen met de CPC-planner. Als u een upgrade uitvoert van Urchin 6.500 naar Urchin 6.601, zijn de verwerkte CPC-gegevens mogelijk onjuist of onvolledig, wat kan leiden tot onjuiste resultaten in de Urchin-rapporten. Om ervoor te zorgen dat u correcte gegevens ontvangt van Google AdWords, raden we u aan (a) Urchin 6.601 op een nieuwe locatie te installeren of (b) de oude CPC-gegevens te verwijderen wanneer u over een bestaande versie 6.500 wilt installeren. In dit laatste geval verwijdert u alle inhoud uit de volgende directory's: <p class="line867"><pre>&lt;pad_naar_urchin_6500_installatie&gt;/data/cpc/...
&lt;pad_naar_urchin_6500_installatie&gt;/data/history/cpc/...
</pre><p class="line874">U hoeft niets te doen als u een upgrade uitvoert van Urchin 6.600, 6.501 of van Urchin 6.402 en eerder. <p class="line867"><strong>Voordat u begint: belangrijke opmerking voor gebruikers van FreeBSD</strong> <ul><li>FreeBSD heeft een beperkte gegevenscapaciteit van 500 MB voor hardgecodeerde processen. Dit is te weinig om Urchin uit te voeren, vanwege de grootte van de geogegevens die in het geheugen moeten blijven staan tijdens de logbestandsverwerking. Hierdoor wordt de volgende runtime-foutmelding weergegeven: </li></ul><p class="line867"><pre>FOUT: (8011-323-1057) Kan geheugen niet toewijzen
</pre><ul><li style="list-style-type:none">U kunt dit oplossen door de standaard-procescapaciteit voor FreeBSD uit te breiden. Dit kunt u doen door het bestand /boot/loader.conf te bewerken en de volgende regels toe te voegen: </li></ul><p class="line867"><pre># Verhoog de maximale procescapaciteit tot 1 GB
kern.maxdsiz="1073741824"
</pre><ul><li style="list-style-type:none">Hierna moet u het systeem opnieuw opstarten. </li><li>FreeBSD beschikt over een speciaal stuurprogramma dat accf_http heet. Hiermee worden inkomende verbindingen gebufferd tot een bepaald aantal volledige HTTP-verzoeken zijn ontvangen om zo snellere en optimale prestaties te leveren. Dit stuurprogramma is standaard niet geladen in de kernel en u ziet de volgende waarschuwing: </li></ul><p class="line867"><pre>[warn] (2)No such file or directory: Failed to enable the ‘httpready’ Accept Filter
</pre><ul><li style="list-style-type:none">U kunt dit voorkomen door de HTTP Accept Filter FreeBSD-kernelmodule (accf_http) in te schakelen. U kunt dit doen door het bestand /boot/loader.conf te bewerken en de volgende regels toe te voegen: </li></ul><p class="line867"><pre># Wacht op het acceptatiefilter voor volledige HTTP-verzoeken
accf_http_load="YES"
</pre><ul><li style="list-style-type:none">Hierna moet u het systeem opnieuw opstarten. </li></ul><p class="line867"><strong>WAARSCHUWING!!!</strong> Wees bijzonder voorzichtig wanneer u dergelijke wijzigingen aanbrengt in de systeemcapaciteit. Als u  kern.maxdsiz instelt op een te grote waarde, kan het systeem mogelijk niet meer worden opgestart. We <strong>raden u met klem aan</strong> de documentatie van FreeBSD te lezen voordat u deze aanpassing aanbrengt en de potentiële risico's in te schatten voor uw specifieke configuratie. <p class="line867"><strong>Overzicht van de installatiestappen</strong> <ul><li>De gewenste databaseserver op het Urchin-systeem installeren of de Urchin-database toevoegen aan een bestaande server. Database-engines die momenteel worden ondersteund: <ul><li>MySQL 5.0.3 of hoger (opmerking: vanaf Urchin 6.6 wordt MySQL 4.x.x niet meer ondersteund) </li><li>PostgreSQL 8.2.5 of hoger </li></ul></li><li>De Urchin-database en -gebruiker op de databaseserver maken en toegangsrechten toewijzen. </li><li>De Urchin-distributie uitpakken in een tijdelijke map. </li><li>Het script install.sh uitvoeren. </li><li>De Urchin-installatie licentiëren. </li></ul><p class="line867"><strong>Optie 1: MySQL gebruiken met Urchin</strong> <ul><li><p class="line862">Als u nog geen MySQL-server op uw systeem heeft ingesteld, kunt u een distributie downloaden vanaf <a class="http" href="http://dev.mysql.com/downloads/">http://dev.mysql.com/downloads/</a>. </li><li>Installeer de MySQL-server volgens de instructies op de site van MySQL. </li><li>Zorg ervoor dat u de beheerdersgebruikersnaam (bijvoorbeeld 'root') en het wachtwoord voor de MySQL-database weet. </li><li>Kies de databasenaam, de lokale MySQL-gebruiker en het wachtwoord dat u gaat gebruiken voor Urchin. Bewaar deze gegevens, aangezien u ze later nodig heeft tijdens de installatie van Urchin. In het onderstaande voorbeeld wordt een database gemaakt met de naam 'urchin', met 'urchin' als de MySQL-gebruikersnaam en 'urchinpassword' als wachtwoord (maar u moet uiteraard uw eigen wachtwoord kiezen). </li><li>Maak de Urchin-database, de gebruiker en de rechten met de volgende opdrachten: </li></ul><p class="line867"><pre>root@yourserver# mysql -u root -p
mysql&gt; create database urchin character set utf8;
mysql&gt; GRANT ALL ON urchin.* to 'urchin'@'localhost' IDENTIFIED BY 'urchinpassword';
</pre><ul><li>Bepaal de padnaam van de MySQL-socket voor communicatie met uw MySQL-server. U kunt deze meestal vinden in het bestand 'my.cnf' in uw MySQL-installatie. Zoek naar de regel socket=/var/lib/mysql/mysql.sock. </li></ul><p class="line867"><strong>Optie 2: PostgreSQL gebruiken met Urchin</strong> <ul><li><p class="line862">Als u nog geen PostgreSQL-server op uw systeem heeft ingesteld, kunt u een distributie downloaden vanaf <a class="http" href="http://www.postgresql.org">http://www.postgresql.org</a>. </li><li>Installeer de PostgreSQL-server volgens de instructies op de site van PostgreSQL. </li><li>Zorg ervoor dat de opdracht 'psql' in het pad is opgenomen en dat u de beheerdersgebruikersnaam (bijvoorbeeld 'pgsql') en het wachtwoord van de PostgreSQL-database weet. </li><li>Kies de databasenaam, de lokale PostgreSQL-gebruiker en het wachtwoord dat u gaat gebruiken voor Urchin. Bewaar deze gegevens, aangezien u ze later nodig heeft tijdens de installatie van Urchin. In het onderstaande voorbeeld wordt een database gemaakt met de naam 'urchin', met 'urchin' als PostgreSQL-gebruikersnaam en 'urchinpass' als wachtwoord (maar u moet uiteraard uw eigen wachtwoord kiezen). </li><li>Maak de Urchin-database, de gebruiker en de rechten met de volgende opdrachten: </li></ul><p class="line867"><pre>root@yourserver# psql -U pgsql -d postgres
postgres=# CREATE DATABASE urchin WITH ENCODING 'UTF8';
postgres=# CREATE USER urchin WITH PASSWORD 'urchinpass';
postgres=# GRANT ALL ON DATABASE urchin TO urchin;
postgres=# \connect urchin;
postgres=# CREATE LANGUAGE 'PLPGSQL';
</pre><p class="line867"><strong>Urchin installeren</strong> <ul><li>Zorg ervoor dat u beschikt over de hierboven geselecteerde naam van de Urchin-database, de gebruikersnaam en het wachtwoord. </li><li>Maak een tijdelijke map en pak de Urchin-distributie uit in deze map: </li></ul><p class="line867"><pre>mkdir /var/tmp/urchintemp
cd /var/tmp/urchintemp
tar xzvf urchin6601_&lt;platform&gt;_installer.tar.gz
</pre><p class="line867"><strong>Belangrijk!</strong> Om een correcte installatie te garanderen, moet u ervoor zorgen dat er geen actieve versie van Urchin 6 op de doelcomputer staat. Schakel bestaande versies van Urchin 6 uit met de volgende opdracht: <p class="line867"><pre>/pad/naar/urchin6/bin/urchinctl stop
</pre><ul><li>Als u meerdere versies van Urchin 6 moet uitvoeren op dezelfde computer, moeten deze versies (1) op verschillende locaties zijn opgeslagen, (2) verschillende webserverpoorten hebben en (3) contact leggen met verschillende databases. </li><li>Urchin kopieert alle benodigde bestanden naar de doelmappen en overschrijft bestaande bestanden. Als u ervoor wilt zorgen dat een bestaande aangepaste versie intact blijft, moet u Urchin 6 installeren in een nieuwe directory of de installatiedirectory van de bestaande versie hernoemen. </li><li>Urchin 6.601 kan als geheel worden geïnstalleerd of een upgrade zijn van een bestaande Urchin 6-versie. <ul><li>Bij een 'nieuwe' installatie vraagt Urchin de gebruiker om alle configuratieparameters op te geven (zoals webserverpoort, configuratie-instellingen voor de database, enzovoort). Bij een 'upgrade' gebruikt Urchin de configuratie van de bestaande versie van Urchin 6. </li><li>Urchin 6.601 kan alleen worden gebruikt voor het bijwerken van bepaalde eerdere versies van Urchin 6. De volgende versies kunnen worden bijgewerkt: <ul><li>Urchin 6.6 - Engelse release       : Versie 6.600 </li><li>Urchin 6.5 - Service Pack 2            :   Versie 6.501 </li><li>Urchin 6.5                             :   Versie 6.500 (zie belangrijke opmerking hierboven) </li><li>Urchin 6 - Service Pack 1         :   Versie 6.402 </li><li>Urchin 6 - Internationale release :   Versie 6.401 </li><li>Urchin 6 - Engelse release         :   Versie 6.400 </li></ul></li><li>Bij een 'nieuwe' installatie vraagt Urchin u naar het 'Initialiseren van databasetabellen'. Als u een bestaande databaseconfiguratie wilt behouden, selecteert u 'Nee'. Hoewel Urchin de bestaande configuratie behoudt (door bestaande tabellen niet opnieuw te maken), is het in dit geval wellicht nodig om 'aanvullende tabellen' of 'kolommen in bestaande tabellen' te maken. </li></ul></li><li>Voer nu het Urchin-installatieprogramma uit. U kunt het programma interactief uitvoeren en de aanwijzingen volgen door het volgende te typen: </li></ul><p class="line867"><pre>./install.sh
</pre><p class="line874">U kunt het programma ook meteen volledig installeren via een opdrachtregel door alle benodigde parameters voor de installatie op te geven. U kunt een lijst met opdrachtregelparameters genereren door de volgende opdracht te typen: <p class="line867"><pre>./install.sh -h
</pre><ul><li>Zodra het installatieprogramma is voltooid, heeft u een werkende versie van Urchin op uw systeem. Om de installatie te voltooien, gaat u in uw favoriete webbrowser naar deze URL: </li></ul><p class="line867"><pre>http://uwserver:&lt;poort&gt;
</pre><p class="line862">waarbij &lt;poort&gt; verwijst naar de netwerkpoort die u tijdens de installatie heeft gekozen (9999 is de standaardpoort). <ul><li>Als u de rapportgegevens voor uw profiel wilt herstellen uit een eerdere versie van Urchin 6, kopieert u de geschiedenis, rapporten en bestaande CPC-directory's van /pad/naar/oude-urchin6/data/ naar de nieuwe directory /pad/naar/nieuwe-urchin6/data/. </li><li>Klik op de link 'Demolicentie aanvragen' en volg de stappen voor de licentieverlening om Urchin in te schakelen en de aanvankelijke stappen voor het opgeven van de instellingen uit te voeren. </li></ul><p class="line867"><strong>Het bijhouden van gegevens configureren</strong> <p class="line874">Zodra Urchin is geïnstalleerd, moet u mogelijk enkele extra stappen uitvoeren om de gegevens voor uw  website bij te houden, afhankelijk van hoe u Urchin gebruikt. <p class="line867"><strong>Mogelijkheid 1: Urchin gebruiken met IP+User-Agent voor het bijhouden van gegevens</strong> <p class="line874">U hoeft geen aanvullende instellingen op te geven. Wanneer u profielen aan Urchin toevoegt, moet u IP+User-Agent opgeven als methode voor het bijhouden van bezoekers. <p class="line867"><strong>Mogelijkheid 2: Urchin gebruiken met UTM voor het bijhouden van gegevens</strong> <p class="line874">Als u Urchin wilt gebruiken met UTM voor het bijhouden van gegevens, moet u een fragment met javascript-code voor het bijhouden van gegevens aan elke webpagina van uw site toevoegen. Voer hiervoor de volgende stappen uit: <ul><li><p class="line862">Kopieer de bestanden urchin.js en <tt class="backtick">__</tt>utm.gif vanuit de map util/utm in de Urchin-distributie naar de hoofdmap van uw website (bijvoorbeeld de hoofdmap van uw inhoud). </li><li>Voeg aan elke pagina van uw website meteen achter de META-tags in gedeelte HEAD de volgende code voor het bijhouden van gegevens toe: </li></ul><p class="line867"><pre>&lt;script src="/urchin.js" type="text/javascript"&gt;
&lt;/script&gt;
&lt;script type="text/javascript"&gt;
  _userv=0;
  urchinTracker();
&lt;/script&gt;
</pre><ul><li>Wanneer u profielen aan Urchin toevoegt, moet u Urchin Traffic Monitor (UTM) opgeven als methode voor het bijhouden van bezoekers. </li></ul><p class="line867"><strong>Mogelijkheid 3: Urchin gebruiken met Google Analytics</strong> <p class="line874">Houd er rekening mee dat de nieuwe functies in de conversiecode 'ga.js' van Google Analytics niet neerwaarts compatibel zijn met Urchin 6. Als u Google Analytics en de Urchin-software tegelijkertijd wilt gebruiken, moet u voor de beste resultaten de urchin.js-conversiecode blijven gebruiken. Als u kiest voor gebruik van ga.js, kunt u geen gebruikmaken van de nieuwe functies voor het bijhouden van gegevens van ga.js. <p class="line874">Als u Urchin wilt gebruiken voor een website die al door Google Analytics wordt bijgehouden, moet u een kleine wijziging aanbrengen in de bestaande conversiecode van Google Analytics. Voer hiervoor de volgende stappen uit: <ul><li><p class="line862">Kopieer alleen het bestand <tt class="backtick">__</tt>utm.gif van de directory util/utm in de Urchin-distributie naar de hoofdmap van uw website-inhoud (bijvoorbeeld de hoofdmap van uw inhoud). </li><li><p class="line862">Voeg de regel <tt>_userv=2;</tt>, zoals hieronder weergegeven, toe aan de bestaande conversiecode op uw webpagina's. Zorg ervoor dat u de conversiecode verder niet wijzigt. </li></ul><p class="line867"><pre>&lt;script src="http://www.google-analytics.com/urchin.js"
type="text/javascript"&gt;
&lt;script type="text/javascript"&gt;
  _userv=2;
  _uacct="UA-XXXXXXX-Y";
  urchinTracker();
&lt;/script&gt;
</pre><ul><li>Wanneer u profielen aan Urchin toevoegt, moet u Urchin Traffic Monitor (UTM) opgeven als methode voor het bijhouden van bezoekers. </li></ul><p class="line867"><strong> </strong> </div><div id="pagebottom"></div>
</div>


<div id="footer" style="clear: both; margin: 0; padding: 0; border-bottom:1px solid #CCC;"></div><div id="copyright" style="font-size: 70%; text-align: center;">&copy;2010 Google</div>
</body></html>