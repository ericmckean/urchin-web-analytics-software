<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body><table id="top_location_line" width="100%"><table id="top_location_line" width="100%"><tr width="100%"><td><a href="http://www.urchin.com"><img border="0" src="../images/google_sm.gif" width="135" height="41"></a></td><td width="100%"><span id="top_line" style="width: 100%; float: left; clear: both; border-bottom: 1px solid #CCC;"><span id="top_title" style="float: left; margin-top: 10px;"><b>Help Center</b></span></td></tr></table>
<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en">
<p class="line867"><strong>Logboekregistratie - Apache en IIS</strong> <p class="line867"><strong>Overzicht</strong> <p class="line874">Het is van essentieel belang om de logboekregistratie van uw webserver in te stellen op een indeling op basis waarvan Urchin de gegevens correct kan interpreteren en volledige en gedetailleerde rapportage kan bieden. In dit artikel wordt dit proces beschreven voor de meestgebruikte webservers, Apache en Microsoft IIS. Voor een optimale rapportage is het belangrijk om verwijzingen en gegevens over de user-agent op te nemen in de logboekregistratie. Als u gegevens over unieke bezoekers wilt bijhouden wanneer u de Urchin Tracking Module (UTM) gebruikt, moet u ook het bijhouden van cookies inschakelen. De enige manier om een goede rapportage van unieke bezoekers bij te houden, is via de UTM. We raden u aan (maar verplichten u niet) eerst een besluit te nemen over het gebruik van de UTM voordat u de logboekregistratie van uw webserver wijzigt. Zo ja, dan moet u eerst het bijhouden van cookies in uw logbestanden inschakelen. Het levert geen problemen op wanneer u cookies al inschakelt maar de UTM nog niet onmiddellijk op uw website installeert. U kunt het gedeelte over het bijhouden van bezoekers raadplegen voor meer informatie over het installeren van de UTM voordat u verdergaat. <p class="line867"><strong>Configuratie</strong> <p class="line867"><strong>Apache</strong> <p class="line874">Apache maakt logbestanden standaard in een zogenaamde algemene logbestandsindeling en biedt tevens de mogelijkheid om logbestanden op te slaan in een gedetailleerdere indeling: de uitgebreide/gecombineerde NCSA-logbestandsindeling. Voor een optimale rapportage heeft Urchin een variant van de uitgebreide/gecombineerde NCSA-indeling nodig. Ga als volgt te werk om Apache te configureren zodat de juiste indeling wordt gebruikt: <p class="line874">1. Maak een back-up van het bestand 'httpd.conf'. Gebruik een teksteditor om het oorspronkelijke bestand 'httpd.conf' te openen. <p class="line862">2. Zoek het gedeelte met regels die beginnen met het woord 'LogFormat'. <p class="line862">3. Voeg een nieuwe regel 'LogFormat' toe in een van de onderstaande indelingen, afhankelijk van of u UTM gebruikt. De vermelding 'LogFormat' moet worden toegevoegd aan uw configuratiebestand als één regel, zonder harde returns of regeleindes. Let er goed op dat u alle tekens correct opgeeft. <p class="line867"><strong>Voor websites die de UTM niet gebruiken:</strong> <p class="line867"><tt>LogFormat&nbsp;"%h&nbsp;%v&nbsp;%u&nbsp;%t&nbsp;\"%r\"&nbsp;%&gt;s&nbsp;%b&nbsp;\"%{Referer}i\"&nbsp;\"%{User-Agent}i\""&nbsp;urchin</tt> <p class="line867"><strong>Voor websites waarvoor de UTM is ingeschakeld:</strong> <p class="line867"><tt>LogFormat&nbsp;"%h&nbsp;%v&nbsp;%u&nbsp;%t&nbsp;\"%r\"&nbsp;%&gt;s&nbsp;%b&nbsp;\"%{Referer}i\"&nbsp;\"%{User-Agent}i\"&nbsp;\"%{Cookie}i\""&nbsp;urchin</tt> <p class="line862">4. Het woord 'urchin' aan het eind van de regel 'LogFormat' is een bijnaam die elders in het bestand 'httpd.conf' wordt gebruikt om deze indeling toe te passen op een logbestand. U kunt voor deze tekenreeks opgeven wat u wilt. Als u 'urchin' gebruikt, kunt u later herkennen dat deze vermelding is gemaakt om door Urchin te worden verwerkt. <p class="line862">5. Zoek de &lt;VirtualHost&gt;-vermelding waarvoor u deze nieuwe logbestandsindeling wilt inschakelen. Schakel bestaande vermeldingen voor 'TransferLog' of 'CustomLog' binnen een &lt;VirtualHost&gt;&lt;/VirtualHost&gt;-groep uit door er '#' voor te plaatsen ('TransferLog' wordt bijvoorbeeld '#TransferLog'). Voeg vervolgens de volgende nieuwe vermelding voor 'CustomLog' toe, waarbij u de tekenreeks 'path_to_log' vervangt door het betreffende pad voor de logbestanden: <p class="line867"><tt>CustomLog&nbsp;path_to_log/access.log&nbsp;urchin</tt> <p class="line862">Als u eerder voor een andere id dan 'urchin' heeft gekozen als bijnaam voor de vermelding 'LogFormat', gebruikt u deze bijnaam in plaats van 'urchin' in de vermelding 'CustomLog'. <p class="line874">6. Sla de wijzigingen op in het bestand 'httpd.conf'. <p class="line862">7. <strong>BELANGRIJK!</strong> Controleer de syntaxis van het nieuwe bestand 'httpd.conf' door de volgende opdracht uit te voeren: <p class="line867"><tt>apachectl&nbsp;configtest</tt> <p class="line874">Hierop moet een reactie volgen dat de syntaxis correct is. Zo niet, dan controleert u het bestand 'httpd.conf' en lost u eventuele fouten op. Als de syntaxiscontrole nog steeds mislukt, moet u stoppen met deze procedure. Maak in plaats daarvan een back-up van het bewerkte bestand en herstel het origineel door de nieuwe versie te overschrijven door de kopie van het bestand 'httpd.conf' die u aan het begin van deze procedure heeft opgeslagen. Dit zorgt ervoor dat uw webserver normaal blijft functioneren terwijl u kunt uitzoeken wat er mankeert aan uw wijzigingen. <p class="line874">8. Zodra u de syntaxis van het bestand 'httpd.conf' heeft gecontroleerd, start u Apache opnieuw. Dit kunt u het beste doen door het script 'apachectl' aan te roepen, dat meestal bij Apache wordt geïnstalleerd. <p class="line867"><tt>apachectl&nbsp;restart</tt> <p class="line874">9. Controleer de logboekregistratie. Open een browser en ga enkele keren naar de betreffende site. Controleer vervolgens de laatste regels van het logbestand dat wordt aangegeven in de vermelding '!Customlog'. Er zouden meerdere recente treffers in het logbestand moeten zijn geregistreerd. <p class="line874">In de aangepaste uitgebreide/gecombineerde logbestandsindeling voor Urchin ziet een logbestandsregel er ongeveer als volgt uit: <p class="line867"><tt class="backtick">64.40.51.27</tt> <tt class="backtick">www.urchin.com</tt> <tt class="backtick">-</tt> <tt class="backtick">[28/Aug/2002:15:11:01</tt> <tt class="backtick">-0700]</tt> <tt class="backtick">"GET</tt> <tt class="backtick">/images/urchin_header_logo.gif</tt> <tt class="backtick">HTTP/1.1"</tt> <tt class="backtick">200</tt> <tt class="backtick">3017</tt> <tt class="backtick">"http://www.urchin.com/"</tt> <tt class="backtick">"Mozilla/4.0</tt> <tt class="backtick">(compatible;</tt> <tt class="backtick">MSIE</tt> <tt class="backtick">6.0;</tt> <tt class="backtick">Windows</tt> <tt class="backtick">NT</tt> <tt class="backtick">5.0)"</tt> <p class="line874">Als u de UTM op uw site heeft geconfigureerd en het bijhouden van cookies heeft ingeschakeld, ziet een logbestandsregel er ongeveer als volgt uit: <p class="line867"><tt class="backtick">64.40.51.27</tt> <tt class="backtick">www.urchin.com</tt> <tt class="backtick">-</tt> <tt class="backtick">[28/Aug/2002:15:11:01</tt> <tt class="backtick">-0700]</tt> <tt class="backtick">"GET</tt> <tt class="backtick">/images/urchin_header_logo.gif</tt> <tt class="backtick">HTTP/1.1"</tt> <tt class="backtick">200</tt> <tt class="backtick">3017</tt> <tt class="backtick">"http://www.urchin.com/"</tt> <tt class="backtick">"Mozilla/4.0</tt> <tt class="backtick">compatible;</tt> <tt class="backtick">MSIE</tt> <tt class="backtick">6.0;</tt> <tt class="backtick">Windows</tt> <tt class="backtick">NT</tt> <tt class="backtick">5.0)"</tt> <tt class="backtick">"__utma=171060324.1378004559.1063331913.1063334677.1063521838.3;</tt> <tt class="backtick">__utmb=171060324;</tt> <tt class="backtick">__utmc=171060324"</tt> <p class="line874">10. Let op de extra cookiegegevens van de UTM aan het eind van de regel. <p class="line867"><strong>Microsoft Internet Information Server (IIS)</strong> <p class="line874">Opmerking: Microsoft IIS maakt gebruik van een W3C-logbestandsindeling. <p class="line874">Urchin kan een zeer basale rapportage bieden als uw IIS-logbestanden ten minste de volgende velden bevatten: <ul><li>Datum </li><li>Tijd </li><li>C-IP </li><li>CS-URI-stam </li><li>SC-status </li><li>SC-bytes </li></ul><p class="line874">Dit zijn verplichte velden. Zonder deze velden worden er geen betekenisvolle gegevens geregistreerd. Deze minimale logbestandsgegevens bieden echter niet genoeg gegevens voor de rapportage van verwijzingen en browsers. U kunt daarom beter gedetailleerdere eigenschappen voor logboekregistratie instellen voor uw IIS-server. <p class="line874">Eigenschappen voor logboekregistratie voor IIS worden afzonderlijk voor elk domein op de server geconfigureerd, of voor alle tegelijk. We raden de algemene configuratie-optie aan voor servers met niet meer dan een paar domeinen. De volgende stappen zorgen ervoor dat de vereiste logbestandsvelden worden bijgehouden. Als u ervoor kiest aanvullende velden bij te houden, negeert Urchin ze bij de verwerking. Het bijhouden van onnodige velden vergroot echter de grootte van uw logbestanden. U kunt daarom het beste alleen de velden bijhouden die Urchin nodig heeft. <p class="line862">1. Open het beheerprogramma voor de IIS-services door naar 'Start' -&gt; 'Programma's' -&gt; 'Systeembeheer' -&gt; 'Computerbeheer' te gaan. <p class="line874">2. Vouw de lijst 'Services en toepassingen' uit en selecteer 'Internet Information-services'. Hiermee opent u een lijst met websites (behalve in Windows 2003 Server, waarin u de map 'Websites' moet uitvouwen om een lijst met websites weer te geven). <p class="line874">3. Klik met de rechtermuisknop op de vermelding voor de site die u wilt aanpassen en selecteer 'Eigenschappen'. <p class="line874">4. Selecteer het tabblad 'Website' en controleer in het gedeelte onder in het venster of het selectievakje bij 'Logboekregistratie inschakelen' is aangevinkt. Kies in het vervolgkeuzemenu 'Actieve logboekbestandsindeling' de optie 'Uitgebreide W3C-indeling van logboekbestand'. <p class="line874">5. Klik op de knop 'Eigenschappen' naast het vakje 'Actieve logboekbestandsindeling'. <p class="line874">6. Selecteer het tabblad 'Uitgebreide eigenschappen'. <p class="line874">7. Vink de selectievakjes voor de volgende velden aan: <ul><li>Datum [ date ] </li><li>Tijd [ time ] </li><li>IP-adres van client [ c-ip ] </li><li>Gebruikersnaam [ cs-username ] </li><li>Methode [ cs-method ] </li><li>URI-stam [ cs-uri-stem ] </li><li>URI-query [ cs-uri-query ] </li><li>Protocolstatus [ sc-status ] </li><li>Verzonden bytes [ sc-bytes ] </li><li>User-agent [ cs[User-Agent] ] </li><li>Verwijzende site [ cs[Referer] ] </li><li>Cookie [ cs[Cookie] ] (dit veld is alleen vereist als u gegevens bijhoudt via de UTM) </li></ul><p class="line874">8. Zorg ervoor dat het selectievakje bij 'Procesinzage' of 'Accounts verwerken' (afhankelijk van de Windows-versie) niet is aangevinkt, aangezien deze optie geen nuttige gegevens levert over webtoegang. <p class="line874">9. Selecteer 'Toepassen' en 'OK' in elk venster om uw instellingen op te slaan. <p class="line874">10. U hoeft IIS niet opnieuw te starten. Er worden onmiddellijk volgens de nieuwe instellingen gegevens bijgehouden in uw logbestanden. </div><div id="pagebottom"></div>
</div>


<div id="footer" style="clear: both; margin: 0; padding: 0; border-bottom:1px solid #CCC;"></div><div id="copyright" style="font-size: 70%; text-align: center;">&copy;2010 Google</div>
</body></html>