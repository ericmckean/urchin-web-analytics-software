<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body><table id="top_location_line" width="100%"><table id="top_location_line" width="100%"><tr width="100%"><td><a href="http://www.urchin.com"><img border="0" src="../images/google_sm.gif" width="135" height="41"></a></td><td width="100%"><span id="top_line" style="width: 100%; float: left; clear: both; border-bottom: 1px solid #CCC;"><span id="top_title" style="float: left; margin-top: 10px;"><b>Help Center</b></span></td></tr></table>
<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en">
<p class="line867"><strong>Wat doe ik met de fout '(7054-323-317) Het herstellen van de databases is mislukt aangezien er geen back-up is'?</strong> <p class="line867"><strong>Beschrijving van het probleem</strong> <p class="line874">Wanneer u een Urchin-profiel uitvoert, krijgt u de volgende berichten: <p class="line874">(7050-323-317) Starting automatic rollback + <p class="line874">(7054-323 317) Unable to restore databases since backup does not exist. <p class="line867"><strong>Oorzaak</strong> <p class="line874">Deze fout kan optreden als een eerdere uitvoering van dit Urchin-profiel op abnormale wijze is afgebroken. Dit kan gebeuren als het proces/de taak van de 'verwerkingsengine voor logbestanden' handmatig is beëindigd door de systeembeheerder (via de opdrachtregel van de console, enzovoort) of als een ander onverwacht probleem is opgetreden waardoor een actieve logbestandsverwerking is beëindigd. Een andere mogelijke oorzaak is het opnieuw opstarten van het systeem, waardoor dit proces niet correct is voltooid. <p class="line874">Gewoonlijk kan Urchin zonder problemen worden hersteld nadat de engine op abnormale wijze is beëindigd, door de laatste goede status van het profiel terug te zetten. Als de profielverwerking echter is beëindigd tijdens de eerste uitvoering van een profiel (of de eerste uitvoering gedurende een maand), is er geen back-upbestand beschikbaar dat kan worden teruggezet. Als dit het geval is, wordt de fout 'Het herstellen van de databases is mislukt' weergegeven in Urchin. <p class="line874">Op een meer technisch niveau maakt de verwerkingsengine voor logbestanden van Urchin een bestand lock.udb in de rapportagedirectory voor het profiel dat momenteel wordt verwerkt. Dit bestand blijft vergrendeld tijdens de verwerking om ervoor te zorgen dat er slechts één instantie van de verwerkingsengine voor logbestanden per keer voor het profiel kan worden uitgevoerd. Tijdens het opstarten controleert de verwerkingsengine voor logbestanden of het bestand lock.udb aanwezig is. Als dat het geval is, controleert de verwerkingsengine op huidige vergrendelingen. Als deze niet worden gevonden, is de vorige uitvoering van het profiel mislukt. De verwerkingsengine voor logbestanden probeert dan de databases van het profiel terug te zetten naar de laatste goede status voordat de engine doorgaat. Als er geen archief voor terugzetten is, zoals hierboven is aangegeven, worden de foutberichten voor terugzetten afgedrukt en wordt de verwerking van logbestanden beëindigd. <p class="line867"><strong>Oplossing</strong> <p class="line874">Aangezien de vorige uitvoering van Urchin op abnormale wijze is beëindigd, hebben de Urchin-databases voor de maand die wordt verwerkt, een onbekende status en is er geen goed controlepunt geregistreerd voor de bijbehorende gegevens. De gegevens voor de volledige maand die wordt verwerkt, moeten daarom worden verwijderd. In de meeste gevallen zijn de enige Urchin-gegevens voor die maand de gegevens die gemaakt zijn tijdens de mislukte verwerking, dus zijn er toch geen goede gegevens beschikbaar. <p class="line874">Volg de onderstaande procedure om de Urchin-profielgegevens opnieuw in te stellen zodat u het profiel kunt blijven uitvoeren: <p class="line867"><span class="u">Windows-systemen</span> <ol type="1"><li><p class="line862">Open een DOS Shell (Start -&gt; Uitvoeren -&gt; "cmd"). </li><li>Wijzig de directory in de map waarin de Urchin-profielgegevens zijn opgeslagen, meestal <ul><li style="list-style-type:none">C:\Program Files\Urchin\data\reports\profilename </li></ul></li><li>Bekijk de inhoud van het bestand lock.udb met de opdracht "TYPE lock.udb". Er moeten een of meer regels met YYYYMM-datumvermeldingen zijn, bijvoorbeeld 200408. </li><li>Voor elke YYYYMM-regel in het bestand lock.udb voert u de volgende stappen uit: <ul><li>Verwijder de bijbehorende maandelijkse Urchin-databases met de opdracht "DEL YYYYMM-*data*". </li><li>Controleer of er een back-up bestaat voor de bijbehorende maand met de opdracht "DIR YYYYMM*backup*.zip". De namen van back-ups hebben de notatie YYYYMM-backup-YYYYMMDDHHMMSS.zip, bijvoorbeeld 200805-backup-20080331103340.zip. </li><li>Als er voor die maand een of meer back-upbestanden bestaan, herstelt u de gegevens uit de back-up met het laatste tijdstempel met behulp van de opdracht "..\..\..\util\unzip -o -u backupfile.zip", bijvoorbeeld "..\..\..\util\unzip -o -u 200805-backup-20080331103340.zip". </li></ul></li><li>Verwijder het bestand lock.udb met de opdracht "DEL lock.udb". </li><li>U kunt het profiel nu opnieuw uitvoeren met de knop 'Nu uitvoeren'. </li></ol><p class="line867"><span class="u">UNIX-systemen</span> <ol type="1"><li>Open een opdrachtshell als "root" of als de gebruiker voor wie Urchin is geïnstalleerd. </li><li>Wijzig de directory in de locatie waarin de Urchin-profielgegevens worden bewaard, bijvoorbeeld <ul><li style="list-style-type:none">"cd /usr/local/urchin/data/reports/profilename" </li></ul></li><li>Bekijk de inhoud van het bestand lock.udb met de opdracht "cat lock.udb". Er moeten een of meer regels met YYYYMM-datumvermeldingen zijn, bijvoorbeeld 200803. </li><li>Voor elke YYYYMM-regel in het bestand lock.udb voert u de volgende stappen uit: <ul><li>Verwijder de bijbehorende maandelijkse Urchin-databases met de opdracht "rm YYYYMM-*data*". </li><li>Controleer of er een back-up bestaat voor de bijbehorende maand met behulp van de opdracht <ul><li style="list-style-type:none">"ls YYYYMM*backup*.zip". De namen van back-ups hebben de notatie YYYYMM-backup-YYYYMMDDHHMMSS.zip, bijvoorbeeld 200803-backup-20080331103340.zip. </li></ul></li><li>Als er een of meer back-upbestanden bestaan voor die maand, herstelt u de gegevens uit de back-up met het laatste tijdstempel met de opdracht "../../../util/unzip -o -u backupfile.zip", bijvoorbeeld "../../../util/unzip -o -u 200803-backup-20080331103340.zip". </li></ul></li><li>Verwijder het bestand lock.udb met de opdracht "rm lock.udb". </li><li>U kunt het profiel nu opnieuw uitvoeren met de knop 'Nu uitvoeren'. </li></ol></div><div id="pagebottom"></div>
</div>


<div id="footer" style="clear: both; margin: 0; padding: 0; border-bottom:1px solid #CCC;"></div><div id="copyright" style="font-size: 70%; text-align: center;">&copy;2010 Google</div>
</body></html>