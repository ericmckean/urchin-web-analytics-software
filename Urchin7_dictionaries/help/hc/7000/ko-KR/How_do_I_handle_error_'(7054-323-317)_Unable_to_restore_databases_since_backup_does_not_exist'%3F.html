<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body><table id="top_location_line" width="100%"><table id="top_location_line" width="100%"><tr width="100%"><td><a href="http://www.urchin.com"><img border="0" src="../images/google_sm.gif" width="135" height="41"></a></td><td width="100%"><span id="top_line" style="width: 100%; float: left; clear: both; border-bottom: 1px solid #CCC;"><span id="top_title" style="float: left; margin-top: 10px;"><b>Help Center</b></span></td></tr></table>
<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en">
<p class="line867"><strong>'(7054-323-317) 백업이 없어 데이터베이스를 복원할 수 없습니다'라는 오류는 어떻게 처리해야 합니까?</strong> <p class="line867"><strong>문제 설명</strong> <p class="line874">Urchin 프로필을 실행할 때 다음과 같은 메시지가 나타납니다. <p class="line874">(7050-323-317) Starting automatic rollback + <p class="line874">(7054-323 317) Unable to restore databases since backup does not exist. <p class="line867"><strong>원인</strong> <p class="line874">이 Urchin 프로필의 이전 실행이 비정상적으로 종료된 경우에 이러한 오류가 발생할 수 있습니다.이 오류는 '로그 처리 엔진'의 프로세스/작업이 콘솔 CLI 등에서 시스템 관리자에 의해 수동으로 종료되거나, 지속적인 로그 처리를 종료하는 예상치 못한 문제가 발생하거나, 시스템 재부팅 시 이 프로세스가 제대로 완료되지 않아서 발생할 수도 있습니다. <p class="line874">대개의 경우 Urchin은 가장 최근의 양호한 상태의 프로필로 롤백함으로써 비정상적인 종료로부터 무리 없이 복원될 수 있습니다. 하지만 프로필을 처음 실행할 때(또는 그 달에 처음 실행할 때) 프로필 처리가 종료된 경우에는 롤백할 백업 파일이 없습니다.이러한 경우에 Urchin에서 '데이터베이스 복원 불가(Unable to restore databases)' 오류가 발생합니다. <p class="line874">좀 더 기술적인 수준에서 설명하자면 Urchin 로그 처리 엔진은 현재 처리 중인 프로필의 보고 디렉토리에 lock.udb 파일을 생성합니다.특정 시점에 로그 처리 엔진의 한 인스턴스만 프로필에 대해 실행될 수 있도록 이 파일은 처리되는 동안 잠긴 상태가 됩니다.시작할 때 로그 처리 엔진은 lock.udb 파일의 유무를 확인합니다.파일이 있을 경우 로그 처리 엔진은 현재 잠금을 확인합니다.잠금이 없는 경우에는 프로필의 이전 실행이 실패한 것이므로 로그 처리 엔진은 후속 작업을 진행하기 전에 가장 최근의 양호한 상태의 프로필 데이터베이스로 롤백합니다.위에서 언급했듯이 롤백 아카이브가 존재하지 않으면 롤백 오류 메시지가 표시되고 로그 처리가 종료됩니다. <p class="line867"><strong>해결 방법</strong> <p class="line874">Urchin의 이전 실행이 비정상적으로 종료되었기 때문에 처리 중인 달의 Urchin 데이터베이스는 알 수 없는 상태가 되며 그 안에 포함된 데이터는 제대로 확인되지 않습니다.따라서 처리 중인 달 전체의 데이터를 삭제해야 합니다.대부분의 경우 그 달의 유일한 Urchin 데이터는 실패한 처리 실행 동안 생성된 데이터이므로 유효한 데이터가 전혀 없게 됩니다. <p class="line874">Urchin 프로필 데이터를 재설정하고 프로필을 계속 실행하려면 다음 절차를 따르십시오. <p class="line867"><span class="u">Windows Systems</span> <ol type="1"><li><p class="line862">DOS Shell을 시작합니다('시작' -&gt; '실행' -&gt; 'cmd'). </li><li>Urchin 프로필이 저장되는 폴더로 디렉토리를 변경합니다. 일반적으로 다음 폴더입니다. <ul><li style="list-style-type:none">C:\Program Files\Urchin\data\reports\profilename </li></ul></li><li>'TYPE lock.udb' 명령을 사용하여 lock.udb 파일의 내용을 봅니다.YYYYMM 날짜 항목(예: 200408)으로 구성된 행이 있을 것입니다. </li><li>lock.udb 파일에 있는 각 YYYYMM 행에 대해 다음 단계를 수행합니다. <ul><li>'DEL YYYYMM-*data*' 명령을 사용하여 해당하는 월별 Urchin 데이터베이스를 삭제합니다. </li><li>'DIR YYYYMM*backup*.zip' 명령을 사용하여 해당하는 달에 대한 백업 아카이브가 있는지 확인합니다.백업 아카이브는 YYYYMM-backup-YYYYMMDDHHMMSS.zip으로 명명됩니다(예: 200805-backup-20080331103340.zip). </li><li>그 달에 대한 백업 파일이 있는 경우에는 '..\..\..\util\unzip -o -u backupfile.zip' 명령(예: '..\..\..\util\unzip -o -u 200805-backup-20080331103340.zip')을 사용하여 최신 타임스탬프가 있는 백업 아카이브에서 데이터를 복원합니다. </li></ul></li><li>'DEL lock.udb' 명령을 사용하여 lock.udb 파일을 삭제합니다. </li><li>이제 '지금 실행' 버튼을 사용하여 프로필을 다시 실행할 수 있습니다. </li></ol><p class="line867"><span class="u">UNIX 계열 시스템</span> <ol type="1"><li>'루트' 또는 Urchin을 실행하는 사용자로서 명령 쉘을 시작합니다. </li><li>Urchin 프로필 데이터가 보관된 위치로 디렉토리를 변경합니다. 예: <ul><li style="list-style-type:none">'cd /usr/local/urchin/data/reports/profilename' </li></ul></li><li>'cat lock.udb' 명령을 사용하여 lock.udb 파일의 내용을 봅니다.YYYYMM 날짜 항목(예: 200803)으로 구성된 행이 있을 것입니다. </li><li>lock.udb에 있는 각 YYYYMM 행에 대해 다음 단계를 수행합니다. <ul><li>'rm YYYYMM-*data*' 명령을 사용하여 해당하는 월별 Urchin 데이터베이스를 삭제합니다. </li><li>다음 명령을 사용하여 해당하는 달에 대한 백업 아카이브가 있는지 확인합니다. <ul><li style="list-style-type:none">'ls YYYYMM*backup*.zip'. 백업 아카이브는 YYYYMM-backup-YYYYMMDDHHMMSS.zip으로 명명됩니다(예: 200803-backup-20080331103340.zip). </li></ul></li><li>그 달에 대한 백업 파일이 있는 경우에는 '../../../util/unzip -o -u backupfile.zip' 명령(예: '../../../util/unzip -o -u 200803-backup-20080331103340.zip')을 사용하여 최신 타임스탬프가 있는 백업 아카이브에서 데이터를 복원합니다. </li></ul></li><li>'rm lock.udb' 명령을 사용하여 lock.udb 파일을 삭제합니다. </li><li>이제 '지금 실행' 버튼을 사용하여 프로필을 다시 실행할 수 있습니다. </li></ol></div><div id="pagebottom"></div>
</div>


<div id="footer" style="clear: both; margin: 0; padding: 0; border-bottom:1px solid #CCC;"></div><div id="copyright" style="font-size: 70%; text-align: center;">&copy;2010 Google</div>
</body></html>