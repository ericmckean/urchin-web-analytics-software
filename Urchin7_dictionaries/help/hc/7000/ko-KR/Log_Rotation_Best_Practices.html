<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body><table id="top_location_line" width="100%"><table id="top_location_line" width="100%"><tr width="100%"><td><a href="http://www.urchin.com"><img border="0" src="../images/google_sm.gif" width="135" height="41"></a></td><td width="100%"><span id="top_line" style="width: 100%; float: left; clear: both; border-bottom: 1px solid #CCC;"><span id="top_title" style="float: left; margin-top: 10px;"><b>Help Center</b></span></td></tr></table>
<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en">
<p class="line867"><strong>로그 로테이션 모범사례</strong> <p class="line867"><strong>개요</strong> <p class="line874">대부분의 운영 환경에서 웹서버 같은 시스템 서비스 및 응용 프로그램이 해당 서비스와 관련된 작업 및 이벤트를 기록하는 것은 매우 일반적입니다.대부분의 경우 운영체제 및/또는 응용 프로그램에서 로그 파일의 정기적 유지관리를 통해 로그 파일의 크기를 알맞게 유지하는 것도 표준적인 방법입니다.이는 로그 파일이 무한정 커져서 결국 디스크 공간이 부족해지는 것을 방지합니다. <p class="line874">로그를 관리하는 일반적인 방법 중 하나는 시간기록을 사용하여 기존 로그의 이름을 바꾸고 크기가 0인 새로운 로그 파일을 사용하여 서비스 또는 응용 프로그램을 다시 시작하는 정기적으로 예약된 로그 로테이션 작업을 설정하는 것입니다.로그 로테이션 작업이 이전 로그 파일을 압축하고, 특정 기간 또는 로테이션 주기 임계값에 도달할 경우 로그 파일을 삭제하는 것도 표준적인 방법입니다. <p class="line874">웹서버 로그의 경우 로그를 관리하기 용이한 크기로 유지하기 위해 일반적으로 매일 로테이션을 수행합니다.또한 일별 로테이션 일정을 사용하면 Urchin 같은 분석 도구를 통해 웹서버 로그를 쉽게 사후 처리할 수 있습니다.Microsoft의 IIS 같은 일부 웹서버는 기본적으로 제공되는 로그 로테이션 기능이 있습니다. 이러한 기능을 사용할 경우 기본적으로 로그가 매일 로테이션됩니다.Apache 같은 다른 웹서버는 명시적인 로그 로테이션 핸들러를 갖추고 있지 않지만 로그 로테이션 작업이 가능하도록 웹 서비스 손실 없이 웹서버를 쉽게 다시 시작할 수 있는 도구를 제공합니다(예: apachectl restart). <p class="line867"><strong>로그 로테이션 방법</strong> <p class="line874">Urchin의 로그 추적 기술로 인해 로그 처리의 중복을 방지하기 위해 로그 로테이션을 수행할 필요성이 사라졌습니다.이로 인해 Urchin이 로그를 보다 유연하게 처리할 수 있게 되었습니다. 예를 들어, 웹서버에서 아직 작성 중인 '실시간' 로그를 처리하거나 수동으로 또는 비정기적으로 로테이션되는 로그를 처리할 수 있습니다. <p class="line867"><strong>중요사항:</strong> 일부 이전 버전의 Urchin과 달리 Urchin 6은 로그 로테이션 절차를 호출하거나 로그 로테이션 작업을 수행한 후에 웹서버를 다시 시작하기 위한 훅(hook)을 제공하지 않습니다. 하지만 아래에 설명된 것과 같이 몇 가지 로그 처리 후 작업은 가능합니다. <p class="line874">웹서버 로그를 정기적으로 로테이션하지 않거나 아예 로테이션하지 않아도 Urchin 6의 운영이 가능하지만 원활한 운영을 보장하고 로그 추적 유틸리티가 불필요한 처리를 많이 수행할 필요가 없도록 표준 로그 로테이션 규칙을 구현하는 것이 좋습니다.시스템과 응용 프로그램 모두 하나의 매우 큰 로그를 관리하는 것보다 여러 개의 작은 로그를 관리하는 것이 훨씬 효율적입니다. 파일이 커질수록 파일 작업이 현저히 느려지기 때문입니다.작은 파일은 디스크 오류 또는 기타 시스템 오류 시 백업하고 복원하는 것도 훨씬 쉽습니다. <p class="line874">로그 로테이션 메커니즘이 너무 복잡할 필요는 없습니다. 대부분의 경우 UNIX 계열 시스템의 cron에서 간단한 쉘 스크립트 또는 Perl 스크립트를 매일 실행하는 것만으로도 충분합니다.스크립트는 기존 웹서버 로그를 로테이션하고 시간(%Y%m%d 또는 YYYYMMDD 형식 권장)을 표시한 후 웹서버를 다시 시작하기만 하면 됩니다.디스크 공간을 알맞게 유지하기 위해 이전 로그 파일을 삭제하는 로직을 추가할 수도 있습니다. <p class="line867"><strong>로그 로테이션을 사용하도록 Urchin 구성</strong> <p class="line874">로그 로테이션 규칙을 세운 후에는 손쉽게 로테이션되는 로그를 처리하도록 Urchin을 구성할 수 있습니다.로그 소스를 구성할 때 시간이 표시된 로그 파일 이름과 일치되는 와일드카드를 사용하도록 로그 파일 경로 지정을 설정하거나(예: Apache 로그의 경우 access-log.*, IIS 로그의 경우 ex*.log), Urchin에 기본적으로 제공되는 시간기록 패턴 일치 기능을 사용할 수 있습니다(예: Apache의 경우, access-log.%Y%m%d, IIS의 경우 ex%y%m%d.log).Urchin에서 이 패턴을 발견하는 경우 어제의 날짜를 %Y%m%d 패턴으로 교체하고 최종 파일 이름(예: access-log.20020617)을 사용하여 로그를 처리합니다.날짜 일치 패턴에 대한 자세한 내용은 ['로그 경로에서 와일드카드 및 날짜 대체']를 참조하십시오. <p class="line874">와일드카드 지정을 사용하면 처리되지 않은 여러 로그를 한 디렉토리 안에 넣고 Urchin이 나중에 실행될 때 해당 로그들이 처리되도록 할 수 있는 이점이 있습니다.이는 Urchin이 실행될 때 예상 로그 파일이 제 위치에 있지 않은 상황을 처리하는 데 특히 유용합니다. 이러한 상황은 원격 웹서버가 다운되었거나 네트워크 연결이 끊어지는 경우에 발생할 수 있습니다.단점은 Urchin이 디렉토리를 열고 각 로그 파일을 검색하여 이미 처리되었는지 여부를 확인해야 한다는 것입니다. 이는 디렉토리에 다수의 로그 파일이 있을 경우 상당한 작업 부담을 발생시킵니다.로그 로테이션 규칙이 안정적이라고 판단되면 YYYYMMDD 패턴 일치 규칙을 사용하는 것이 보다 효율적입니다. <p class="line874">로그가 처리된 후에 Urchin 6에서 로그를 삭제 또는 보관/압축하도록 할 수도 있습니다.로그 소스의 '고급 설정'에서 서로 다른 로그 저장 위치 옵션을 설정할 수 있습니다.로그 저장 위치 설정에 대한 자세한 내용은 ['로그 관리']를 참조하시기 바랍니다. <p class="line867"><strong>중요사항</strong> 로테이션되지 않은 실행 중인 로그에 로그 저장 위치 옵션을 사용해서는 안 됩니다. <p class="line867"><strong>UNIX 계열 시스템에 로그 로테이션 구성</strong> <p class="line874">운영체제 기능 및 웹서버 구성이 워낙 다양하고 로그 로테이션 절차가 사이트마다 각기 다르기 때문에 UNIX 계열 시스템에서 웹서버 로그 로테이션을 설정하는 통일된 방법은 없습니다. <p class="line867"><strong>Windows IIS Webserver에 대해 로그 로테이션 구성</strong> <p class="line874">앞에서 언급했듯이 IIS의 관리 기능을 사용하여 웹서버 로그를 자동으로 로그 로테이션할 수 있습니다. 단, 이 기능은 기본적으로 활성화되어 있지 않습니다.아래 단계를 따라서 올바른 로그 로테이션이 가능하도록 IIS 웹서버를 구성하십시오.로그를 매일 로테이션하고 로그 로테이션을 로컬 시간에 맞춰 수행하는 것이 좋습니다.기본적으로 IIS는 로컬 시간이 아닌 GMT 자정에 로그를 로테이션합니다. <p class="line874">Windows 2000에서는 IIS 웹서버가 로그 로테이션을 수행하도록 올바르게 구성되었는지 확인해야 합니다.Windows 2000의 컴퓨터 관리 기능을 사용하면 됩니다.Windows NT, Windows XP 및 Windows 2003 서버는 비슷한 절차를 사용합니다.'컴퓨터 관리'를 열고 로그 로테이션을 설정하려면 다음 작업을 수행하십시오. <ul><li><p class="line862">'시작' -&gt; '설정' -&gt; '제어판'을 클릭합니다. </li><li>'관리 도구'를 두 번 클릭합니다. </li><li>'컴퓨터 관리'를 두 번 클릭합니다. </li><li>'Internet Information Services'를 두 번 클릭합니다. </li><li>'기본 웹사이트'를 마우스 오른쪽 버튼으로 클릭한 후 '속성'을 선택합니다. </li><li>팝업 창에서 '웹사이트' 탭을 선택합니다. </li><li>창 하단에서 '속성' 탭을 클릭합니다. </li><li>'새 로그 시간 간격' 머리글 아래에서 일별 라디오 버튼을 클릭합니다. </li><li>'파일 명명 및 롤오버에 현지 시간 사용' 확인란을 클릭합니다. </li></ul><p class="line874">그러면 IIS가 매일 자정 직후에 웹서버 로그를 로테이션합니다. </div><div id="pagebottom"></div>
</div>


<div id="footer" style="clear: both; margin: 0; padding: 0; border-bottom:1px solid #CCC;"></div><div id="copyright" style="font-size: 70%; text-align: center;">&copy;2010 Google</div>
</body></html>