<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body><table id="top_location_line" width="100%"><table id="top_location_line" width="100%"><tr width="100%"><td><a href="http://www.urchin.com"><img border="0" src="../images/google_sm.gif" width="135" height="41"></a></td><td width="100%"><span id="top_line" style="width: 100%; float: left; clear: both; border-bottom: 1px solid #CCC;"><span id="top_title" style="float: left; margin-top: 10px;"><b>Help Center</b></span></td></tr></table>
<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en">
<p class="line867"><strong>로깅 - Apache 및 IIS</strong> <p class="line867"><strong>개요</strong> <p class="line874">Urchin이 데이터를 올바르게 해석하고 매우 세부적인 보고서를 생성할 수 있는 형식으로 웹서버 로깅을 설정하는 것이 중요합니다.본 문서에서는 가장 일반적인 웹서버인 Apache 및 Microsoft IIS의 프로세스에 대해 설명합니다.최대한 깊이 있는 보고서를 생성하기 위해서는 로깅에 추천 및 사용자 에이전트 정보가 포함되어야 합니다.Urchin 추적 모듈(UTM)을 사용할 때 고유 방문자 보고를 사용하려면 쿠키 로깅도 활성화해야 합니다.UTM 기반 추적은 진정한 고유 방문자 보고를 가능하게 하는 유일한 방법입니다.반드시 필요한 것은 아니지만 웹서버 로깅을 변경하기 전에 UTM을 사용할 것인지 여부를 결정하는 것이 좋습니다.그러면 지금 로그에서 쿠키를 활성화할 수 있습니다.쿠키를 활성화했지만 UTM을 웹사이트에 즉시 설치하지 않아도 무방합니다.계속 진행하기 전에 방문자 추적에 있는 섹션을 살펴봄으로써 UTM 설치 방법을 익힐 수도 있습니다. <p class="line867"><strong>구성</strong> <p class="line867"><strong>Apache</strong> <p class="line874">기본적으로 Apache는 대개 공통 로그 형식으로 로깅하며 NCSA 확장/결합 로그 형식이라는 보다 세부적인 형식으로 로깅할 수 있는 옵션도 제공합니다.최적의 보고를 위해서는 Urchin에서 NCSA 확장/결합 형식을 변형시켜야 합니다.적절한 형식을 사용하도록 Apache를 구성하려면 다음 절차를 따르십시오. <p class="line874">1. httpd.conf 파일의 백업 복사본을 만듭니다.그런 다음 텍스트 편집기를 사용하여 원래 httpd.conf를 엽니다. <p class="line862">2. LogFormat이라는 단어로 시작되는 행이 포함되어 있는 섹션을 찾습니다. <p class="line862">3. UTM을 사용할 것인지 여부에 따라 아래 표시된 양식 중 하나를 사용하여 새로운 LogFormat 행을 삽입합니다.LogFormat 항목은 구성 파일에 한 행으로 캐리지 리턴이나 줄 바꿈 없이 추가되어야 합니다.모든 문자를 정확하게 입력해야 합니다. <p class="line867"><strong>UTM을 사용하지 않을 웹사이트의 경우:</strong> <p class="line867"><tt>LogFormat&nbsp;"%h&nbsp;%v&nbsp;%u&nbsp;%t&nbsp;\"%r\"&nbsp;%&gt;s&nbsp;%b&nbsp;\"%{Referer}i\"&nbsp;\"%{User-Agent}i\""&nbsp;urchin</tt> <p class="line867"><strong>UTM을 사용하는 웹사이트의 경우:</strong> <p class="line867"><tt>LogFormat&nbsp;"%h&nbsp;%v&nbsp;%u&nbsp;%t&nbsp;\"%r\"&nbsp;%&gt;s&nbsp;%b&nbsp;\"%{Referer}i\"&nbsp;\"%{User-Agent}i\"&nbsp;\"%{Cookie}i\""&nbsp;urchin</tt> <p class="line862">4. LogFormat 행의 끝에 있는 단어 'urchin'은 httpd.conf의 다른 곳에서 이 형식을 로그 파일에 적용하는 데 사용될 닉네임입니다.이 문자열에는 어떠한 문자도 포함될 수 있습니다.'urchin'을 사용하면 이 항목이 Urchin 처리에 맞게 생성되었다는 것을 쉽게 알릴 수 있습니다. <p class="line862">5. 이 새 로깅 형식을 사용할 &lt;VirtualHost&gt; 항목을 조사합니다.맨 앞에 #를 삽입하여(예: TransferLog를 #TransferLog로 변경) &lt;VirtualHost&gt;&lt;/VirtualHost&gt; 그룹 내에서 기존 TransferLog 또는 CustomLog 항목을 비활성화합니다.그리고 다음과 같은 새 CustomLog 항목을 삽입하여 문자열 path_to_log를 로그 위치에 대한 적절한 경로로 대체합니다. <p class="line867"><tt>CustomLog&nbsp;path_to_log/access.log&nbsp;urchin</tt> <p class="line862">앞에서 'urchin'이 아닌 식별자를 LogFormat 항목의 닉네임으로 선택한 경우에는 CustomLog 항목에서 'urchin' 대신 해당 닉네임을 사용합니다. <p class="line874">6. 수정한 내용을 httpd.conf 파일에 저장합니다. <p class="line862">7. <strong>중요사항:</strong> 다음 명령을 사용하여 새 httpd.conf의 구문을 확인합니다. <p class="line867"><tt>apachectl&nbsp;configtest</tt> <p class="line874">응답 구문 ok가 나타나야 합니다.그렇지 않으면 httpd.conf 파일을 다시 확인하여 오류를 수정하십시오.올바른 응답을 얻을 수 없는 경우에는 이 절차를 중단하십시오.대신 수정한 파일의 백업 복사본을 만든 후에 이 절차의 시작할 때 저장한 httpd.conf의 복사본으로 이 버전을 덮어씀으로써 원본을 복원하십시오.그러면 변경한 내용 중에 무엇이 잘못되었는지를 알아내는 동안 웹서버가 계속 정상적으로 작동할 수 있습니다. <p class="line874">8. httpd.conf의 구문을 확인한 후 Apache를 다시 시작합니다.주로 사용되는 방법은 일반적으로 Apache와 함께 설치되는 apachectl 스크립트를 호출하는 것입니다. <p class="line867"><tt>apachectl&nbsp;restart</tt> <p class="line862">9. 로깅을 확인합니다.브라우저를 열고 문제의 사이트를 여러 번 방문합니다.그런 다음 CustomLog 항목에 지정되어 있는 로그 파일의 마지막 몇 행을 조사합니다.최근에 방문했던 기록이 로그에 작성되어 있어야 합니다. <p class="line874">Urchin에서 수정한 확장/결합 로그 형식의 경우에는 로그 행이 다음과 유사합니다. <p class="line867"><tt class="backtick">64.40.51.27</tt> <tt class="backtick">www.urchin.com</tt> <tt class="backtick">-</tt> <tt class="backtick">[28/Aug/2002:15:11:01</tt> <tt class="backtick">-0700]</tt> <tt class="backtick">"GET</tt> <tt class="backtick">/images/urchin_header_logo.gif</tt> <tt class="backtick">HTTP/1.1"</tt> <tt class="backtick">200</tt> <tt class="backtick">3017</tt> <tt class="backtick">"http://www.urchin.com/"</tt> <tt class="backtick">"Mozilla/4.0</tt> <tt class="backtick">(compatible;</tt> <tt class="backtick">MSIE</tt> <tt class="backtick">6.0;</tt> <tt class="backtick">Windows</tt> <tt class="backtick">NT</tt> <tt class="backtick">5.0)"</tt> <p class="line874">사이트에 UTM을 구성하고 쿠키 로깅을 설정한 경우에는 로그 행이 다음과 유사합니다. <p class="line867"><tt class="backtick">64.40.51.27</tt> <tt class="backtick">www.urchin.com</tt> <tt class="backtick">-</tt> <tt class="backtick">[28/Aug/2002:15:11:01</tt> <tt class="backtick">-0700]</tt> <tt class="backtick">"GET</tt> <tt class="backtick">/images/urchin_header_logo.gif</tt> <tt class="backtick">HTTP/1.1"</tt> <tt class="backtick">200</tt> <tt class="backtick">3017</tt> <tt class="backtick">"http://www.urchin.com/"</tt> <tt class="backtick">"Mozilla/4.0</tt> <tt class="backtick">compatible;</tt> <tt class="backtick">MSIE</tt> <tt class="backtick">6.0;</tt> <tt class="backtick">Windows</tt> <tt class="backtick">NT</tt> <tt class="backtick">5.0)"</tt> <tt class="backtick">"__utma=171060324.1378004559.1063331913.1063334677.1063521838.3;</tt> <tt class="backtick">__utmb=171060324;</tt> <tt class="backtick">__utmc=171060324"</tt> <p class="line874">10. 행 끝에 UTM 쿠키 정보가 추가됩니다. <p class="line867"><strong>Microsoft Internet Information Server(IIS)</strong> <p class="line874">참고:Microsoft IIS는 W3C 로깅 형식을 사용합니다. <p class="line874">IIS 로그 파일에 최소한 다음과 같은 입력란이 있는 경우에는 Urchin이 매우 기본적인 보고를 제공할 수 있습니다. <ul><li>날짜 </li><li>시간 </li><li>C-IP </li><li>CS-URI-Stem </li><li>SC-Status </li><li>SC-Bytes </li></ul><p class="line874">위 항목은 필수 입력란입니다.이러한 입력란이 없으면 의미 있는 보고를 얻을 수 없습니다.그러나 이 최소 로깅은 추천 및 브라우저 보고에 알맞은 충분한 정보를 제공하지 않습니다.따라서 IIS 서버에 대해 보다 세부적인 로깅 속성을 설정하는 것이 좋습니다. <p class="line874">IIS 로깅 속성은 서버에 있는 각 도메인에 대해 별도로 또는 전역적으로 구성됩니다.도메인이 많이 있는 서버의 경우에는 전역 옵션을 사용하는 것이 좋습니다.다음 단계를 따르면 필수 로그 파일 입력란이 반드시 기록되도록 할 수 있습니다.추가 입력란을 로깅하도록 선택한 경우에는 Urchin이 처리 시 해당 입력란을 그냥 무시합니다.하지만 불필요한 입력란을 로깅하면 로그 파일의 크기가 늘어나기 때문에 Urchin에서 필요로 하는 입력란만 로깅하는 것이 가장 좋습니다. <p class="line862">1. '시작'-&gt;'프로그램'-&gt;'관리 도구'-&gt;'컴퓨터 관리'로 이동하여 IIS 서비스 관리 도구를 실행합니다. <p class="line874">2. '서비스 및 응용 프로그램' 트리를 확장하고 'Internet Information Services'를 선택합니다. 그러면 웹사이트 목록이 나타납니다. Windows 2003 Server의 경우에는 '웹사이트' 폴더를 더 확장해야 사이트 목록이 나타납니다. <p class="line874">3. 수정할 사이트의 항목을 마우스 오른쪽 버튼으로 클릭하고 '속성'을 선택합니다. <p class="line874">4. '웹사이트' 탭을 선택하고 이 화면 하단에 있는 섹션에서 '로깅 사용' 확인란이 선택되어 있는지 확인합니다.그런 다음 '활성 로그 형식' 드롭다운 메뉴에서 'W3C 확장 로그 파일 형식'을 선택합니다. <p class="line874">5. '활성 로그 형식' 상자 옆에 있는 '속성' 버튼을 클릭합니다. <p class="line874">6. '확장 속성' 탭을 선택합니다. <p class="line874">7. 다음 입력란의 상자를 선택합니다. <ul><li>날짜 [ date] </li><li>시간 [ time ] </li><li>클라이언트 IP 주소 [ c-ip ] </li><li>사용자 이름 [ cs-username ] </li><li>메서드 [ cs-method ] </li><li>URI 스템 [ cs-uri-stem ] </li><li>URI 쿼리 [ cs-uri-query ] </li><li>프로토콜 상태 [ sc-status ] </li><li>보낸 바이트 수 [ sc-bytes ] </li><li>사용자 에이전트 [ cs[User-Agent] ] </li><li>참조 페이지 [ cs[Referer] ] </li><li>쿠키 [ cs[Cookie] ](이 입력란은 UTM 추적을 위해서만 필요) </li></ul><p class="line874">8. '프로세스 계정' 상자는 유용한 웹 액세스 활동 정보를 제공하지 않으므로 선택하지 않아야 합니다. <p class="line874">9. 각 창에서 '적용' 및 '확인'을 선택하여 설정을 저장합니다. <p class="line874">10. IIS를 다시 시작할 필요는 없습니다.로그가 새 설정에 따라 즉시 로깅을 시작합니다. </div><div id="pagebottom"></div>
</div>


<div id="footer" style="clear: both; margin: 0; padding: 0; border-bottom:1px solid #CCC;"></div><div id="copyright" style="font-size: 70%; text-align: center;">&copy;2010 Google</div>
</body></html>