<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body><table id="top_location_line" width="100%"><table id="top_location_line" width="100%"><tr width="100%"><td><a href="http://www.urchin.com"><img border="0" src="../images/google_sm.gif" width="135" height="41"></a></td><td width="100%"><span id="top_line" style="width: 100%; float: left; clear: both; border-bottom: 1px solid #CCC;"><span id="top_title" style="float: left; margin-top: 10px;"><b>Help Center</b></span></td></tr></table>
<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en">
<p class="line867"><strong>Best practice per la rotazione log</strong> <p class="line867"><strong>Panoramica</strong> <p class="line874">Nella maggior parte degli ambienti operativi, di solito i servizi e le applicazioni di sistema quali i server web generano file di log che registrano azioni ed eventi relativi ai servizi suddetti. Per la maggioranza dei casi, il sistema operativo e/o le applicazioni eseguono come procedura standard la manutenzione periodica dei file di log per tenerne sotto controllo le dimensioni. Ciò impedisce ai file di log di crescere in modo illimitato fino all'esaurimento dello spazio su disco. <p class="line874">Un approccio comune nella gestione dei log consiste nel pianificare un'attività di rotazione log periodica che rinomina i log esistenti con le coordinate temporali, quindi riavvia il servizio o l'applicazione con un nuovo file di log di zero byte. Un'altra procedura standard durante l'attività di rotazione log consiste nel comprimere i vecchi file di log e nell'eliminarli una volta raggiunta una certa data o soglia del ciclo di rotazione. <p class="line874">Nel caso specifico dei log di server web, la rotazione viene normalmente gestita su base giornaliera per assicurare che le dimensioni dei log restino gestibili. Inoltre, la pianificazione di una rotazione giornaliera fornisce in genere un buon livello di dettaglio che agevola l'elaborazione successiva dei log del server web con uno strumento di analisi quale Urchin. Alcuni server web come Microsoft IIS dispongono di funzionalità di rotazione log incorporate le quali, se abilitate, eseguono la rotazione dei log su base giornaliera per impostazione predefinita. Altri server web, ad esempio Apache, non dispongono di programmi di gestione espliciti della rotazione log, ma forniscono strumenti per riavviare il server web facilmente (senza perdita del servizio web) per consentire le operazioni di rotazione (ad esempio apachectl restart). <p class="line867"><strong>Procedure di rotazione log</strong> <p class="line874">La necessità di evitare elaborazioni duplicate di log durante la rotazione è stata eliminata grazie alla tecnologia di monitoraggio log di Urchin. Questa tecnologia fornisce a Urchin maggiore flessibilità nell'elaborazione dei log, consentendo ad esempio l'elaborazione di log attivi, vale a dire log che sono ancora in fase di scrittura da parte del server web, o l'elaborazione di log che vengono ruotati in modo manuale o irregolare. <p class="line867"><strong>Nota importante.</strong> A differenza di alcune versioni precedenti di Urchin, Urchin 6 non fornisce hook per richiamare una procedura di rotazione log o per riavviare un server web dopo aver eseguito attività di rotazione log, sebbene sia possibile eseguire alcune azioni successivamente all'elaborazione dei log nel modo illustrato di seguito. <p class="line874">Sebbene il funzionamento di Urchin 6 non richieda la rotazione dei log del server web, nemmeno su base periodica, è consigliabile implementare uno schema di rotazione log standard per garantire un funzionamento regolare e per evitare che l'utilità di monitoraggio log esegua troppe elaborazioni non necessarie. È molto più efficiente sia per il sistema che per l'applicazione gestire diversi log più piccoli anziché un log molto grande, poiché le operazioni sui file tendono a rallentare considerevolmente con l'aumentare delle dimensioni dei file. Inoltre, è molto più facile eseguire copie di backup e ripristinare file piccoli in caso di errori del disco o del sistema. <p class="line874">I meccanismi di rotazione log non devono necessariamente essere complessi: nella maggior parte dei casi, un semplice script della shell o uno script Pearl eseguito giornalmente da cron su sistemi di tipo UNIX è tutto ciò che serve. Lo script deve solo eseguire la rotazione del log del server web esistente e applicarvi le coordinate temporali (è consigliabile utilizzare i formati %Y%m%d o AAAAMMGG), quindi riavviare il server web. È possibile aggiungere altro codice per eliminare i vecchi file di log e quindi tenere sotto controllo l'uso dello spazio su disco.  <p class="line867"><strong>Configurazione di Urchin per l'utilizzo con la rotazione log</strong> <p class="line862">Dopo aver creato lo schema di rotazione log, è sufficiente configurare Urchin per elaborare il log ruotato. Puoi configurare la specifica del percorso del file di log in modo da utilizzare un carattere jolly che corrisponda al pattern del nome di file su cui sono state applicate le coordinate temporali quando configuri una sorgente log (ad esempio access-log.* per i log Apache o ex*.log per i log IIS) oppure utilizzare le corrispondenze dei pattern delle coordinate temporali incorporate di Urchin (ad esempio access-log.%Y%m%d per Apache, ex%y%m%d.log per IIS). Quando Urchin rileva questo pattern, sostituisce la data di ieri con il pattern %A%m%g ed elabora il log con il nome di file risultante (ad esempio access-log.20020617). Per ulteriori informazioni sul pattern di corrispondenza della data, consulta Sostituzione carattere jolly e data nel percorso log. <p class="line874">La specifica del carattere jolly ha il vantaggio di consentirti di collocare un certo numero di log non elaborati in una singola directory e di farli elaborare da Urchin all'esecuzione successiva. Ciò è particolarmente utile nella gestione di situazioni in cui i file di log previsti non sono disponibili quando viene eseguito Urchin, ad esempio a causa di un server web remoto inattivo o della perdita di connettività di rete. Lo svantaggio consiste nel fatto che Urchin deve aprire la directory ed eseguire una ricerca in ciascun file di log per determinare se è già stato elaborato, e questo causa un sovraccarico significativo quando nella directory sono presenti molti file. Se ritieni che il tuo schema di rotazione log sia affidabile, il metodo più efficiente è rappresentato dallo schema di corrispondenza pattern AAAAMMGG. <p class="line862">Puoi anche consentire a Urchin 6 di eliminare o archiviare/comprimere il log dopo essere stato elaborato. È possibile impostare diverse opzioni di Destino log nelle impostazioni avanzate relative a una sorgente log. Per ulteriori informazioni sulle impostazioni di Destino log, consulta Gestione log. <p class="line867"><strong>Importante.</strong> Le opzioni di Destino log non devono essere utilizzate con i log attivi che non sono stati ruotati. <p class="line867"><strong>Configurazione della rotazione log su sistemi di tipo UNIX</strong> <p class="line874">A causa delle grandi differenze di funzionalità dei sistemi operativi e di configurazione dei server web, nonché la forte probabilità che le procedure di rotazione log siano molto specifiche per ogni sito, non esiste un metodo semplice per stabilire la rotazione log del server web sui sistemi di UNIX-type.  <p class="line867"><strong>Configurazione della rotazione log per il server web Windows IIS</strong> <p class="line874">Come menzionato in precedenza, le funzioni di gestione di IIS consentono la rotazione log automatica dei log del server web, anche se questa funzionalità non è abilitata per impostazione predefinita. Per configurare un server web IIS in modo che esegua una rotazione log corretta, procedi nel seguente modo. È consigliabile ruotare i log giornalmente e impostare la rotazione in base all'ora locale. Per impostazione predefinita, IIS ruota i log a mezzanotte GMT anziché ora locale. <p class="line874">In Windows 2000, assicurati che il server web IIS sia configurato correttamente per la rotazione log. Questa operazione può essere eseguita utilizzando la funzione Gestione computer di Windows 2000. Windows NT, Windows XP e Windows 2003 Server utilizzano una procedura simile. Per aprire Gestione computer e impostare la rotazione log, procedi nel seguente modo: <ul><li><p class="line862">Fai clic su Start -&gt; Impostazioni -&gt; Pannello di controllo. </li><li>Fai doppio clic su Strumenti di amministrazione. </li><li>Fai doppio clic su Gestione computer. </li><li>Fai doppio clic su Internet Information Services. </li><li>Fai clic con il pulsante destro del mouse su Sito Web predefinito e scegli Proprietà. </li><li>Nella finestra popup seleziona la scheda Sito Web. </li><li>Nella parte inferiore della finestra fai clic sulla scheda Proprietà. </li><li>Fai clic sul pulsante di opzione Ogni giorno sotto l'intestazione Creazione nuovo file di registro. </li><li>Fai clic sulla casella di controllo Usa ora locale per denominazione e aggiornamento file. </li></ul><p class="line874">Ciò assicura che IIS ruoti i log del server web su base giornaliera subito dopo mezzanotte. </div><div id="pagebottom"></div>
</div>


<div id="footer" style="clear: both; margin: 0; padding: 0; border-bottom:1px solid #CCC;"></div><div id="copyright" style="font-size: 70%; text-align: center;">&copy;2010 Google</div>
</body></html>