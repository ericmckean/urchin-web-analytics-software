<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body><table id="top_location_line" width="100%"><table id="top_location_line" width="100%"><tr width="100%"><td><a href="http://www.urchin.com"><img border="0" src="../images/google_sm.gif" width="135" height="41"></a></td><td width="100%"><span id="top_line" style="width: 100%; float: left; clear: both; border-bottom: 1px solid #CCC;"><span id="top_title" style="float: left; margin-top: 10px;"><b>Help Center</b></span></td></tr></table>
<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en">
<p class="line867"><strong>Come faccio a spostare Urchin 6.x e tutti i dati dei rapporti in un altro server?</strong> <p class="line874">Per spostare Urchin 6.x da un server a un altro, procedi nel seguente modo: <ol type="1"><li>Prepara il database Urchin. </li><li>Installa Urchin 6.x sul nuovo server. </li><li>Sposta i database dei rapporti Urchin relativi ai profili. </li><li>Sposta i file e i modelli personalizzati. </li><li>Applica le impostazioni predefinite di Urchin. </li><li>Controlla le nuove autorizzazioni all'uso dei file. </li><li>Riattiva la licenza Urchin. </li></ol><p class="line874">NOTA. Le seguenti istruzioni dettagliate possono essere applicate anche agli spostamenti tra piattaforme diverse. I file del database dei rapporti Urchin può essere spostato su qualsiasi sistema operativo supportato da Urchin. Quando si spostano dati e file da un tipo di piattaforma a un altro, è necessario tenere in considerazione alcuni aspetti, quali la sintassi della riga di comando (ad esempio l'aggiunta di "./" per i sistemi Unix) e i cambiamenti della sintassi relativa alla directory, ad esempio "Standard\Windows\cartelle\" e "/standard/unix/directory/". <p class="line867"><strong>1. Prepara il database Urchin.</strong> <p class="line874">Questo passaggio può essere saltato se utilizzi lo stesso server di database per la nuova installazione di Urchin. Altrimenti il database Urchin deve essere preparato prima di eseguire l'installazione sul nuovo server: <p class="line867"><strong>a.</strong>      Crea un database Urchin vuoto con le autorizzazioni corrette per l'utente Urchin. <p class="line874">Esempi di comandi SQL per la creazione del database back-end MySQL: <p class="line867"><pre>   mysql&gt; create database urchin character set utf8;
   mysql&gt; GRANT ALL ON urchin.* to 'urchin'@'localhost' IDENTIFIED BY 'urchinpassword';
</pre><p class="line874">Esempi di comandi PSQL per la creazione del database back-end PostreSQL: <p class="line867"><pre>   postgres=# CREATE DATABASE urchin WITH ENCODING 'UTF8';
   postgres=# CREATE USER urchin WITH PASSWORD 'urchin password';
   postgres=# GRANT ALL ON DATABASE urchin TO urchin;
   postgres=# \connect urchin;
   postgres=# CREATE LANGUAGE 'PLPGSQL';
</pre><p class="line867"><strong>b.</strong>      Copia i dati del database Urchin dal vecchio server eseguendo un dump SQL del vecchio database e importandolo nel nuovo database. Questa operazione consente di copiare automaticamente la maggior parte delle configurazioni necessarie di Urchin, tra cui i profili, le sorgenti log, gli utenti, gli account, i gruppi, il programma di pianificazione e altre impostazioni. <p class="line874">Esempi di comandi SQL per la creazione del database back-end MySQL: <ul><li style="list-style-type:none">Database sorgente: </li></ul><p class="line867"><pre>   mysqldump -h {oldDBhostname} -u {username} -p {urchinDBname} &gt; urchin.sql
</pre><ul><li style="list-style-type:none">Database di destinazione: </li></ul><p class="line867"><pre>   mysql -h {newDBhostname} -u {username} -p {urchinDBname} &lt; urchin.sql
</pre><p class="line874">Esempi di comandi PSQL per la creazione del database back-end PostreSQL: <ul><li style="list-style-type:none">Database sorgente: </li></ul><p class="line867"><pre>   pg_dump -h {oldDBhostname} -p {oldDBport} -U {username} {urchinDBname} &gt; urchin.sql
</pre><ul><li style="list-style-type:none">Database di destinazione: </li></ul><p class="line867"><pre>   psql -h {newDBhostname} -p {newDBport} -U {username} {urchinDBname} &lt; urchin.sql
</pre><p class="line867"><strong>2. Installa Urchin 6 sul nuovo server.</strong> <p class="line874">Crea una nuova installazione di Urchin 6 sul nuovo server utilizzando il database preparato in precedenza. <p class="line874">Assicurati di deselezionare l'opzione "Elimina e ricrea le tabelle database di Urchin esistenti" per le installazioni Windows o di rispondere NO alla domanda "Desideri inizializzare il database di configurazione durante l'installazione?" per le installazioni Unix. <p class="line874">Le istruzioni dettagliate sull'installazione di Urchin sono disponibili nella seguente documentazione (salta i passaggi relativi alla configurazione del database e inizia dal capitolo "Installazione di Urchin"): <ul><li><p class="line891"><a href="Urchin_Installation_Guide_(FreeBSD_and_Linux).html">Guida all'installazione di Urchin (FreeBSD e Linux)</a> </li><li><p class="line891"><a href="Urchin_Installation_Guide_(Windows).html">Guida all'installazione di Urchin (Windows)</a> </li></ul><p class="line874">Interrompi i daemon o i servizi urchin prima di procedere ai passaggi successivi: <p class="line867"><pre>~/urchin/bin/urchinctl -stop
</pre><p class="line867"><strong>3. Sposta i database dei rapporti Urchin relativi ai profili.</strong> <p class="line874">Per impostazione predefinita, tutti i dati dei rapporti Urchin vengono memorizzati in una sottodirectory della directory principale di Urchin: ~/urchin/data/. Per mantenere la struttura della sottodirectory, questa directory deve essere archiviata, quindi spostata sul nuovo server dopo avervi installato Urchin. Deve essere ripristinata nello stesso percorso di directory sul nuovo server, quando possibile: ~/urchin/data. <p class="line874">NOTA. Se la vecchia installazione di Urchin utilizza directory personalizzate per la cronologia e i rapporti, devono essere copiate queste directory (invece di ~/urchin/data/reports e ~/urchin/data/history). <p class="line867"><strong>4. Sposta i file e i modelli personalizzati.</strong> <p class="line874">Le personalizzazioni applicate a Urchin, tra cui i formati log e gli insiemi di rapporti personalizzati, non sono conservate nella directory "data" di Urchin, bensì in un'ubicazione separata nella directory "lib" della distribuzione Urchin. Quando Urchin viene installato sul nuovo server, è necessario copiare eventuali personalizzazioni applicate al vecchio sistema Urchin nella nuova installazione Urchin. In genere questi file sono conservati in ~/urchin/lib/custom/. <p class="line874">Per eseguire questa operazione, nel vecchio server Urchin naviga fino alla directory "lib" della distribuzione Urchin. Successivamente, crea un archivio dell'intera directory "custom" (incluse tutte le sottodirectory) utilizzando un'utilità di archiviazione come tar o ZIP. Copia questo archivio nel nuovo server Urchin e spacchettalo nella directory "lib" della distribuzione Urchin. <p class="line867"><strong>5. Applica le impostazioni predefinite di Urchin.</strong> <p class="line874">Se le impostazioni predefinite per la vecchia installazione di Urchin 6.x sono state modificate in <p class="line867"><pre>/etc/session.conf
/etc/urchin.conf
/var/urchinwebd.conf
</pre><p class="line874">non dimenticare di applicare le stesse impostazioni alla nuova installazione modificando i file corrispondenti. <p class="line867"><strong>6. Controlla le nuove autorizzazioni all'uso dei file.</strong> <p class="line874">Dopo che tutti i file sono stati spostati nel nuovo server, esegui un controllo approfondito per verificare che tutti i file dispongano delle necessarie autorizzazioni e che siano tutti di proprietà dello stesso utente (solo per i sistemi UNIX). <p class="line874">Per stabilire le autorizzazioni Urchin, esegui il seguente comando dalla directory ~/urchin/util/: <p class="line867"><pre>        inspector -r
</pre><p class="line874">Per controllare la proprietà dei file (solo UNIX), esegui il seguente comando dalla directory ~/urchin/: <p class="line867"><pre>        chown -R urchin_user:urchin_group ./
</pre><p class="line867"><strong>7. Riattiva la licenza Urchin.</strong> <p class="line874">Avvia i daemon o i servizi urchin. <p class="line867"><pre>~/urchin/bin/urchinctl start
</pre><p class="line874">Dopo aver completato l'installazione di Urchin, apri l'interfaccia web di Urchin. <p class="line874">Il sistema visualizza la schermata "Licenza Urchin" con il link "Riattiva licenza". <p class="line874">Poiché Urchin è stato installato utilizzando il database esistente preparato in precedenza, la chiave di sistema è cambiata e la licenza deve essere riattivata. <p class="line874">NOTA. Prima di riattivare il prodotto, chiedi al rivenditore Urchin di reimpostare la licenza. </div><div id="pagebottom"></div>
</div>


<div id="footer" style="clear: both; margin: 0; padding: 0; border-bottom:1px solid #CCC;"></div><div id="copyright" style="font-size: 70%; text-align: center;">&copy;2010 Google</div>
</body></html>