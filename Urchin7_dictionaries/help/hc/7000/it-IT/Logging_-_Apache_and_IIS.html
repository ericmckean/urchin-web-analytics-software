<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body><table id="top_location_line" width="100%"><table id="top_location_line" width="100%"><tr width="100%"><td><a href="http://www.urchin.com"><img border="0" src="../images/google_sm.gif" width="135" height="41"></a></td><td width="100%"><span id="top_line" style="width: 100%; float: left; clear: both; border-bottom: 1px solid #CCC;"><span id="top_title" style="float: left; margin-top: 10px;"><b>Help Center</b></span></td></tr></table>
<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en">
<p class="line867"><strong>Registrazione: Apache e IIS</strong> <p class="line867"><strong>Panoramica</strong> <p class="line874">È di fondamentale importanza impostare la registrazione del server web in un formato che consenta a Urchin di interpretare correttamente i dati e creare rapporti dettagliati. Questo articolo illustra il processo per i server web più diffusi, Apache e Microsoft IIS. Per ottenere il massimo livello di dettaglio nei rapporti è importante attivare la registrazione in modo da includere le informazioni sui referral e sullo User Agent. Per consentire la creazione di rapporti sui visitatori unici quando si utilizza il modulo di monitoraggio di Urchin (UTM, Urchin Tracking Module), è necessario attivare anche la registrazione dei cookie. Il monitoraggio basato su UTM rappresenta l'unico metodo per ottenere rapporti affidabili sui visitatori unici. È consigliabile, ma non obbligatorio, decidere se utilizzare UTM prima di cambiare la registrazione del server web. In questo caso, devi attivare contestualmente i cookie nei tuoi log. Non provoca alcun danno attivare i cookie senza installare immediatamente UTM sul sito web. Prima di continuare potrebbe essere utile consultare la sezione relativa al monitoraggio dei visitatori per familiarizzarsi con l'installazione di UTM. <p class="line867"><strong>Configurazione</strong> <p class="line867"><strong>Apache</strong> <p class="line874">Per impostazione predefinita, Apache in genere registra i log nel formato log comune ("common log format") e consente anche di scegliere un formato più dettagliato conosciuto come NCSA Extended/Combined Log Format. Per rapporti ottimali, Urchin richiede una variazione del formato NCSA Extended/Combined. Per configurare Apache per l'utilizzo del formato appropriato, procedi nel seguente modo: <p class="line874">1. Esegui una copia di backup del file httpd.conf. Utilizza quindi un editor di testo per aprire il file httpd.conf originale. <p class="line862">2. Individua la sezione contenente le righe che iniziano con la voce LogFormat. <p class="line862">3. Inserisci una nuova riga LogFormat utilizzando una delle forme riportate di seguito, a seconda che UTM venga utilizzato o meno. La voce LogFormat deve essere aggiunta al file di configurazione come riga singola senza ritorni a capo o interruzioni di riga. Presta la massima attenzione e assicurati di immettere tutti i caratteri correttamente. <p class="line867"><strong>Per i siti web che non utilizzano UTM:</strong> <p class="line867"><tt>LogFormat&nbsp;"%h&nbsp;%v&nbsp;%u&nbsp;%t&nbsp;\"%r\"&nbsp;%&gt;s&nbsp;%b&nbsp;\"%{Referer}i\"&nbsp;\"%{User-Agent}i\""&nbsp;urchin</tt> <p class="line867"><strong>Per i siti web UTM-enabled:</strong> <p class="line867"><tt>LogFormat&nbsp;"%h&nbsp;%v&nbsp;%u&nbsp;%t&nbsp;\"%r\"&nbsp;%&gt;s&nbsp;%b&nbsp;\"%{Referer}i\"&nbsp;\"%{User-Agent}i\"&nbsp;\"%{Cookie}i\""&nbsp;urchin</tt> <p class="line862">4. La parola "urchin" alla fine della riga LogFormat è un nickname che verrà utilizzato in altri punti del file httpd.conf per applicare questo formato a un file di log. Questa stringa può essere scelta liberamente. L'utilizzo di "urchin" agevola l'identificazione della voce come voce creata per consentire l'elaborazione Urchin. <p class="line862">5. Esamina la voce &lt;VirtualHost&gt; per la quale desideri attivare il nuovo formato di registrazione. Disattiva eventuali voci TransferLog o CustomLog esistenti all'interno di un gruppo &lt;VirtualHost&gt;&lt;/VirtualHost&gt; anteponendo ad esse il segno # (ad esempio TransferLog diventa #TransferLog). Inserisci quindi la seguente voce CustomLog nuova, sostituendo la stringa path_to_log con il percorso appropriato del tuo log: <p class="line867"><tt>CustomLog&nbsp;path_to_log/access.log&nbsp;urchin</tt> <p class="line862">Se hai scelto un identificativo diverso da "urchin" come nickname per la voce LogFormat menzionata in precedenza, utilizza quel nickname al posto di "urchin" nella voce CustomLog. <p class="line874">6. Salva le modifiche apportate al file httpd.conf. <p class="line862">7. <strong>IMPORTANTE.</strong> Controlla la sintassi del nuovo file httpd.conf eseguendo il comando <p class="line867"><tt>apachectl&nbsp;configtest</tt> <p class="line874">La risposta al comando dovrebbe essere positiva ("sintax ok"). In caso contrario, controlla il file httpd.conf e correggi eventuali errori. Se non riesci a ottenere la risposta corretta, non continuare con questa procedura. Esegui invece una copia di backup del file modificato, quindi ripristina l'originale sovrascrivendo questa versione con una copia del file httpd.conf salvato all'inizio della procedura. Ciò consente al server web di continuare a funzionare normalmente mentre controlli le modifiche. <p class="line874">8. Dopo aver verificato la sintassi di httpd.conf, riavvia Apache. Il metodo preferito consiste nel richiamare lo script apachectl, in genere installato con Apache. <p class="line867"><tt>apachectl&nbsp;restart</tt> <p class="line862">9. Verifica la registrazione. Apri un browser e accedi alcune volte al sito in questione. Esamina quindi le ultime righe del file di log specificato nella voce CustomLog. Nel log dovrebbero essere stati scritti diversi hit recenti. <p class="line874">Per il formato log esteso/combinato modificato Urchin, la riga del log sarà simile alla seguente: <p class="line867"><tt class="backtick">64.40.51.27</tt> <tt class="backtick">www.urchin.com</tt> <tt class="backtick">-</tt> <tt class="backtick">[28/Aug/2002:15:11:01</tt> <tt class="backtick">-0700]</tt> <tt class="backtick">"GET</tt> <tt class="backtick">/images/urchin_header_logo.gif</tt> <tt class="backtick">HTTP/1.1"</tt> <tt class="backtick">200</tt> <tt class="backtick">3017</tt> <tt class="backtick">"http://www.urchin.com/"</tt> <tt class="backtick">"Mozilla/4.0</tt> <tt class="backtick">(compatible;</tt> <tt class="backtick">MSIE</tt> <tt class="backtick">6.0;</tt> <tt class="backtick">Windows</tt> <tt class="backtick">NT</tt> <tt class="backtick">5.0)"</tt> <p class="line874">Se nel tuo sito hai configurato UTM e hai attivato la registrazione dei cookie, la riga del log sarà simile alla seguente: <p class="line867"><tt class="backtick">64.40.51.27</tt> <tt class="backtick">www.urchin.com</tt> <tt class="backtick">-</tt> <tt class="backtick">[28/Aug/2002:15:11:01</tt> <tt class="backtick">-0700]</tt> <tt class="backtick">"GET</tt> <tt class="backtick">/images/urchin_header_logo.gif</tt> <tt class="backtick">HTTP/1.1"</tt> <tt class="backtick">200</tt> <tt class="backtick">3017</tt> <tt class="backtick">"http://www.urchin.com/"</tt> <tt class="backtick">"Mozilla/4.0</tt> <tt class="backtick">compatible;</tt> <tt class="backtick">MSIE</tt> <tt class="backtick">6.0;</tt> <tt class="backtick">Windows</tt> <tt class="backtick">NT</tt> <tt class="backtick">5.0)"</tt> <tt class="backtick">"__utma=171060324.1378004559.1063331913.1063334677.1063521838.3;</tt> <tt class="backtick">__utmb=171060324;</tt> <tt class="backtick">__utmc=171060324"</tt> <p class="line874">10. Leggi le informazioni sul cookie UTM alla fine della riga. <p class="line867"><strong>Microsoft Internet Information Server (IIS)</strong> <p class="line874">Nota. Microsoft IIS utilizza un formato di registrazione W3C. <p class="line874">Urchin può fornire rapporti di base se i file di log di IIS includono almeno i seguenti campi: <ul><li>Date </li><li>Time </li><li>C-IP </li><li>CS-URI-Stem </li><li>SC-Status </li><li>SC-Bytes </li></ul><p class="line874">Questi campi sono obbligatori. Senza questi campi non otterrai rapporti significativi. Tuttavia, questa registrazione minima non fornisce abbastanza informazioni per i rapporti Referral e Browser. È quindi consigliabile impostare proprietà di registrazione più dettagliate per il server IIS. <p class="line874">Le proprietà di registrazione di IIS possono essere configurate separatamente per ciascun dominio sul server oppure globalmente. Per i server con diversi domini è consigliabile utilizzare l'opzione globale. Eseguendo la procedura illustrata di seguito, avrai la certezza che i campi obbligatori del file di log vengano registrati. Se scegli di registrare campi aggiuntivi, Urchin li ignorerà al momento dell'elaborazione. Tuttavia, la registrazione di campi non necessari farà aumentare le dimensioni dei file di log, quindi è preferibile registrare solo i campi richiesti da Urchin. <p class="line862">1. Avvia lo strumento per la gestione dei servizi IIS scegliendo Start-&gt;Programmi-&gt;Strumenti di amministrazione-&gt;Gestione computer. <p class="line874">2. Espandi la struttura Servizi e applicazioni, quindi seleziona Internet Information Services; viene visualizzato un elenco di siti web, tranne che in Windows 2003 Server che richiede di espandere ulteriormente la cartella Siti Web per ottenere un elenco di siti. <p class="line874">3. Fai clic con il pulsante destro del mouse sulla voce relativa al sito che desideri modificare e seleziona Proprietà. <p class="line874">4. Seleziona la scheda Sito Web e nella sezione in fondo alla schermata verifica che la casella di controllo Abilita registrazione sia selezionata. Dal menu a discesa Formato registro attivo scegliere Formato di file registro esteso W3C. <p class="line874">5. Fai clic sul pulsante Proprietà accanto alla casella Formato registro attivo. <p class="line874">6. Seleziona la scheda Proprietà estese. <p class="line874">7. Seleziona le caselle relative ai seguenti campi: <ul><li>Data [ date] </li><li>Ora [ time ] </li><li>Indirizzo IP client [ c-ip ] </li><li>Nome utente [ cs-username ] </li><li>Metodo [ cs-method ] </li><li>Origine URI [ cs-uri-stem ] </li><li>Query URI [ cs-uri-query ] </li><li>Stato protocollo [ sc-status ] </li><li>Byte inviati [ sc-bytes ] </li><li>Agente utente [ cs[User-Agent] ] </li><li>Provenienza [ cs[Referer] ] </li><li>Cookie [ cs[Cookie] ] (questo campo è obbligatorio solo per il monitoraggio UTM) </li></ul><p class="line874">8. Accertati che la casella Process Accounting sia deselezionata poiché non fornisce informazioni utili sulle attività di accesso al Web. <p class="line874">9. Seleziona Apply e OK in ciascuna finestra per salvare le impostazioni. <p class="line874">10. Non è necessario riavviare IIS. I log dovrebbero iniziare immediatamente la registrazione in base alle nuove impostazioni. </div><div id="pagebottom"></div>
</div>


<div id="footer" style="clear: both; margin: 0; padding: 0; border-bottom:1px solid #CCC;"></div><div id="copyright" style="font-size: 70%; text-align: center;">&copy;2010 Google</div>
</body></html>