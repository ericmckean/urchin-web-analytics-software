<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body><table id="top_location_line" width="100%"><table id="top_location_line" width="100%"><tr width="100%"><td><a href="http://www.urchin.com"><img border="0" src="../images/google_sm.gif" width="135" height="41"></a></td><td width="100%"><span id="top_line" style="width: 100%; float: left; clear: both; border-bottom: 1px solid #CCC;"><span id="top_title" style="float: left; margin-top: 10px;"><b>Help Center</b></span></td></tr></table>
<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en">
<p class="line867"><strong>Log personalizzati di E-commerce</strong> <p class="line867"><strong>Introduzione</strong> <p class="line862">Molti carrelli degli acquisti forniscono la possibilità di acquisire e registrare informazioni importanti in merito agli acquisti in formati diversi da ELF2, che non possono quindi essere elaborate automaticamente da Urchin. In questo articolo viene illustrata la procedura per creare un formato personalizzato per il file di log di E-commerce qualora non sia possibile modificare il carrello degli acquisti per generare file ELF2. Prima di continuare, ti invitiamo a leggere <a href="Custom_Log_Formats.html">Formati log personalizzati</a>, dove è descritta in dettaglio la creazione di log personalizzati. <p class="line867"><strong>Tipi di formato log di E-commerce</strong> <p class="line874">I carrelli degli acquisti sono in grado di registrare informazioni sugli acquisiti e sugli articoli acquistati sia in formato a riga singola che multilinea. Nel formato a riga singola, ogni riga contiene tutte le informazioni necessarie per descrivere completamente una transazione e gli articoli acquistati, tutte le righe presentano lo stesso layout. Nei formati multilinea, vengono utilizzate più righe per descrivere un acquisto, con un formato per le righe relative alla transazione e un altro per gli articoli acquistati. I log ELF2 utilizzano il formato multilinea. Esamina i tuoi log E-commerce per stabilire se i dati sono presentati nel formato a riga singola o multilinea, in quanto questo aspetto influisce sull'impostazione del formato log personalizzato. Segui le istruzioni riportate di seguito relative al tipo di formato del tuo log. <p class="line867"><strong>Requisiti generali di registrazione per E-commerce</strong> <p class="line874">Quale che sia il formato delle voci di log generate dal tuo carrello degli acquisti, ciascuna voce deve includere data, ora e almeno uno dei campi seguenti per fornire correlazioni relative ai visitatori: <ul><li>Host remoto o indirizzo IP (per i metodi di monitoraggio solo IP o IP-Useragent) </li><li>Useragent (per il metodo di monitoraggio IP-Useragent) </li><li>Cookie (per UTM o metodo di monitoraggio SID) </li><li>ID sessione (per il metodo di monitoraggio SID) </li></ul><p class="line874">In caso di assenza di uno dei campi sopra indicati, Urchin non è in grado di realizzare un'analisi significativa delle tue entrate. Urchin definisce inoltre i seguenti campi di E-commerce: <ul><li>%{ORDERID} indica il numero dell'ordine </li><li>%{STORE} è il nome/id dello storefront </li><li>%{SESSIONID} è l'identificatore di sessione univoco del cliente </li><li>%{TOTAL} è il totale della transazione, comprese imposte e spedizione (solo decimale, senza caratteri '$') </li><li>%{TAX} rappresenta l'importo delle imposte aggiunto al subtotale </li><li>%{SHIPPING} è l'importo delle spese di spedizione </li><li>%{BILL_CITY} è la città di fatturazione del cliente </li><li>%{BILL_STATE} è lo stato di fatturazione del cliente </li><li>%{BILL_ZIP} è il codice postale di fatturazione del cliente </li><li>%{BILL_COUNTRY} è il Paese di fatturazione del cliente </li><li>%{PRODUCT_CODE} è l'identificatore del prodotto </li><li>%{PRODUCT_NAME} è il nome del prodotto </li><li>%{VARIATION} è una variazione facoltativa del prodotto che riguarda colore, dimensioni e così via </li><li>%{PRICE} è il prezzo unitario del prodotto (solo decimale, senza caratteri '$') </li><li>%{QUANTITY} è la quantità ordinata del prodotto in questione </li><li>%{UPSOLD} è un valore booleano (0|1) che indica se il prodotto era in vendita </li></ul><p class="line867"><strong>Log in formato a riga singola</strong> <p class="line874">Segui queste istruzioni se nel tuo log di E-commerce tutti gli hit presentano lo stesso formato, secondo quanto descritto in precedenza. <ol type="1"><li>Crea un nuovo formato log personalizzato nella directory lib/custom/logformats eseguendo una copia del file di formato log custom.lf.sample. Salva la copia con il suffisso .lf. </li><li>Modifica il file del nuovo formato log personalizzato e imposta le voci seguenti in base ai suggerimenti indicati di seguito: <ul><li><p class="line891">PrimaryPositions: questa voce specifica l'ordine dei campi nel tuo file di log. Crea un elenco di valori separati da virgola di numeri id dei campi per descrivere l'ordine dei campi stessi. I nomi dei campi e i relativi id si trovano nel file lib/reporting/logformats/fieldlist.txt. Di seguito abbiamo riportato un esempio. </li><li><p class="line891">SecondaryPositions: da lasciare nella forma '-' in quanto voce non utilizzata nei file di log con formato a riga singola. </li><li><p class="line891">PrimaryKey: da lasciare nella forma '-' in quanto voce non utilizzata nei file di log con formato a riga singola. </li><li><p class="line891">SecondaryKey: da lasciare nella forma '-' in quanto voce non utilizzata nei file di log con formato a riga singola. </li><li><p class="line891">PrimaryContent: le voci valide per questo campo sono TRANSAZIONE o ARTICOLO. Se gli hit del tuo file di log descrivono l'acquisto di ogni singolo prodotto, imposta questa voce su ARTICOLO; se invece descrivono l'intero acquisto, impostala su TRANSAZIONE. </li><li><p class="line891">SecondaryContent: da lasciare nella forma '-' in quanto voce non utilizzata nei file di log con formato a riga singola. </li><li><p class="line891">CommentKey: se alcune delle righe del tuo file di log costituiscono dei commenti o non sono considerate come hit e iniziano con un carattere specifico, immetti qui il carattere. </li><li><p class="line891">FieldSeparator1: queste voci stabiliscono quali caratteri sono considerati separatori dei campi e sono rappresentate di solito da tabulazioni (\t) e spazi (\s). Impostale in base ai caratteri che compaiono tra un campo e l'altro nel tuo file di log. </li><li><p class="line891">FieldSeparator2: vedi sopra alla voce FieldSeparator1 </li><li><p class="line891">QuotesEscapeSep: questa voce specifica se i separatori dei campi devono essere ignorati all'interno di un campo che contenga i caratteri delle virgolette "". È opportuno lasciare l'impostazione su YES. </li><li><p class="line891">BracketsEscapeSep: specifica se i separatori dei campi devono essere ignorati all'interno di un campo che contenga i caratteri delle parentesi []. È opportuno lasciare l'impostazione su YES. </li><li><p class="line891">MergSuccessiveSep: specifica se occorre considerare due caratteri di separatori uno di seguito all'altro come un solo separatore. È opportuno lasciare l'impostazione su NO. </li><li><p class="line891">CleanWhiteSpace: specifica se occorre eliminare lo spazio alla fine dei campi quando questi vengono analizzati. È opportuno lasciare l'impostazione su NO. </li><li><p class="line891">StatusRequired: lascia l'impostazione su NO, a meno che i tuoi hit contengano dei codici di stato sul tipo di server web </li><li><p class="line891">CustomDateFormat: se il formato del tuo log contiene un formato data personalizzato, imposta il relativo formato strptime che descrive la voce </li><li><p class="line891">CustomTimeFormat: se il formato del tuo log contiene un formato ora personalizzato, imposta il relativo formato strptime che descrive la voce </li></ul></li><li>Salva il formato log personalizzato nella directory lib/custom/logformats </li><li>Seleziona il formato log personalizzato per la tua sorgente log nell'interfaccia Urchin Admin. </li><li>Elabora il o i file di log con Urchin. </li></ol><p class="line867"><strong>Esempio di log in formato a riga singola</strong> <p class="line874">L'esempio seguente rappresenta un hit tratto da un log che contiene esclusivamente dati di transazione. <p class="line867"><pre>12345 123.123.123.123 "Urchin Store" [26/Aug/2003:11:43:02 -0700] 192.73 "San Diego" "CA" 92101 "US" "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1;)" "utma=171060324.2734232095.1061444425.1061444425.1061444763.2"
</pre><p class="line862">L'elenco di seguito riporta tutti i nomi dei campi elencati con il numero id indicato nel file lib/reporting/logformats/fieldslist.txt. I numeri id così assegnati sono da utilizzare nel campo PrimaryPositions del file di formato log personalizzato. <ol type="1"><li>ID transazione 25 </li><li>Host remoto o indirizzo IP 12 </li><li>Nome negozio 26 </li><li>Data/ora Apache 3 </li><li>Costo totale 28 </li><li>Città di fatturazione 31 </li><li>Stato di fatturazione 32 </li><li>Codice postale di fatturazione 33 </li><li>Paese di fatturazione 34 </li><li class="gap">User Agent 13 </li><li>Cookie 14 </li></ol><p class="line874">In base all'elenco riportato sopra, le impostazioni del file di formato log personalizzato saranno: <p class="line867"><pre>PrimaryPositions: "25, 12, 26, 3, 28, 31, 32, 33, 34, 13, 14" SecondaryPositions: - PrimaryKey: - SecondaryKey: - PrimaryContent: TRANSACTION SecondaryContent: - CommentKey: # FieldSeparator1: \s FieldSeparator2: \t QuotesEscapeSep: YES BracketsEscapeSep: YES MergSuccessiveSep: NO CleanWhiteSpace: NO StatusRequired: NO CustomDateFormat: - CustomTimeFormat: -
</pre><p class="line862">La voce PrimaryPositions specifica l'ordine dei campi, mentre PrimaryContent indica a Urchin che questo log contiene delle transazioni, ovvero informazioni generali relative agli acquisti. I separatori dei campi sono stati impostati su spazio e tabulazione in quanto i campi erano separati da uno spazio. I formati personalizzati di data/ora non sono specificati in quanto la data e l'ora presentavano il formato di una data di Apache. <p class="line867"><strong>Log in formato multilinea</strong> <p class="line874">Urchin è in grado di leggere formati multilinea a condizione che il carattere iniziale di ciascuna riga sia costituito da un carattere specifico capace di identificare il formato utilizzato. I file di log ELF2, ad esempio, presentano un punto esclamativo '!' quale primo carattere della riga relativa alla transazione. Le righe relative agli articoli, invece, NON hanno questo carattere '!' all'inizio. <p class="line874">Segui queste istruzioni se il tuo file di log di E-commerce contiene righe di due formati diversi per i dettagli relativi alla transazione e al prodotto o articolo. <ol type="1"><li>Crea un nuovo formato log personalizzato nella directory lib/custom/logformats eseguendo una copia del file di formato log custom.lf.sample. Salva la copia con il suffisso .lf. </li><li>Modifica il file del nuovo formato log personalizzato e imposta le voci seguenti in base ai suggerimenti indicati di seguito: <ul><li><p class="line891">PrimaryPositions: questa voce specifica l'ordine dei campi nel tuo file di log. Crea un elenco di valori separati da virgola di numeri id dei campi per descrivere l'ordine dei campi stessi. I nomi dei campi e i relativi id si trovano nel file lib/reporting/logformats/fieldlist.txt. </li><li><p class="line891">SecondaryPositions: questa voce specifica l'ordine dei campi nel tuo file di log. Crea un elenco di valori separati da virgola di numeri id dei campi per descrivere l'ordine dei campi stessi. I nomi dei campi e i relativi id si trovano nel file lib/reporting/logformats/fieldlist.txt. </li><li><p class="line891">PrimaryKey: imposta la chiave primaria sul carattere che identifica la riga del file di log nello stesso formato indicato da primarypositions </li><li><p class="line891">SecondaryKey: imposta la chiave secondaria sul carattere che identifica la riga del file di log nello stesso formato indicato da secondarypositions </li><li><p class="line891">PrimaryContent: le voci valide per questo campo sono TRANSAZIONE o ARTICOLO. Se gli hit del tuo file di log descrivono l'acquisto di ogni singolo prodotto, imposta questa voce su ARTICOLO; se invece descrivono l'intero acquisto, impostala su TRANSAZIONE. </li><li><p class="line891">SecondaryContent: vedi sopra alla voce PrimaryContent </li><li><p class="line891">CommentKey: se alcune delle righe del tuo file di log costituiscono dei commenti o non sono considerate come hit e iniziano con un carattere specifico, immetti qui il carattere. </li><li><p class="line891">FieldSeparator1: queste voci stabiliscono quali caratteri sono considerati separatori dei campi e sono rappresentate di solito da tabulazioni (\t) e spazi (\s). Impostale in base ai caratteri che compaiono tra un campo e l'altro nel tuo file di log. </li><li><p class="line891">FieldSeparator2: vedi sopra alla voce FieldSeparator1 </li><li><p class="line891">QuotesEscapeSep: questa voce specifica se i separatori dei campi devono essere ignorati all'interno di un campo che contenga i caratteri delle virgolette "". È opportuno lasciare l'impostazione su YES. </li><li><p class="line891">BracketsEscapeSep: specifica se i separatori dei campi devono essere ignorati all'interno di un campo che contenga i caratteri delle parentesi []. È opportuno lasciare l'impostazione su YES. </li><li><p class="line891">MergSuccessiveSep: specifica se occorre considerare due caratteri di separatori uno di seguito all'altro come un solo separatore. È opportuno lasciare l'impostazione su NO. </li><li><p class="line891">CleanWhiteSpace: specifica se occorre eliminare lo spazio alla fine dei campi quando questi vengono analizzati. È opportuno lasciare l'impostazione su NO. </li><li><p class="line891">StatusRequired: lascia l'impostazione su NO, a meno che i tuoi hit contengano dei codici di stato sul tipo di server web </li><li><p class="line891">CustomDateFormat: se il formato del tuo log contiene un formato data personalizzato, imposta il relativo formato strptime che descrive la voce </li><li><p class="line891">CustomTimeFormat: se il formato del tuo log contiene un formato ora personalizzato, imposta il relativo formato strptime che descrive la voce </li></ul></li><li>Salva il formato log personalizzato nella directory lib/custom/logformats </li><li>Seleziona il formato log personalizzato per la tua sorgente log nell'interfaccia Urchin Admin. </li><li>Elabora il o i file di log con Urchin. </li></ol></div><div id="pagebottom"></div>
</div>


<div id="footer" style="clear: both; margin: 0; padding: 0; border-bottom:1px solid #CCC;"></div><div id="copyright" style="font-size: 70%; text-align: center;">&copy;2010 Google</div>
</body></html>