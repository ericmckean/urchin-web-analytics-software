<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body><table id="top_location_line" width="100%"><table id="top_location_line" width="100%"><tr width="100%"><td><a href="http://www.urchin.com"><img border="0" src="../images/google_sm.gif" width="135" height="41"></a></td><td width="100%"><span id="top_line" style="width: 100%; float: left; clear: both; border-bottom: 1px solid #CCC;"><span id="top_title" style="float: left; margin-top: 10px;"><b>Help Center</b></span></td></tr></table>
<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en">
<p class="line867"><strong>Registros personalizados de E-commerce</strong> <p class="line867"><strong>Visão geral</strong> <p class="line862">Muitos carrinhos de compras fornecem a capacidade de capturar e registrar informações valiosas a respeito de compras em formatos diferentes do ELF2 e, desse modo, não podem ser automaticamente processados pelo Urchin.Este artigo explica como criar um formato de registro personalizado para o seu arquivo de registro de E-commerce, se você não conseguir alterar o seu carrinho de compras de modo a gerar o formato ELF2.Antes de continuar, leia <a href="Custom_Log_Formats.html">Formatos personalizados de registro</a>, que explica detalhadamente a criação de registros personalizados. <p class="line867"><strong>Tipos de formato de registro de E-commerce</strong> <p class="line874">Carrinhos de compra são capazes de registrar informações sobre compras e sobre os itens adquiridos em um formato de linha única ou de várias linhas.No formato de linha única, cada linha contém todas as informações necessárias para descrever completamente uma transação e os itens adquiridos, e todas as linhas têm o mesmo layout.Em formatos de várias linhas, diversas linhas são usadas para descrever uma compra, com um formato para as linhas de transação e outro formato para os itens adquiridos. Os registros ELF2 são formatos de várias linhas.É necessário examinar os seus registros de E-commerce para determinar se os dados estão em uma única linha ou em várias linhas, pois isso afetará a sua maneira de configurar o formato de registro personalizado.Siga as instruções abaixo, dependendo do seu tipo de formato de registro. <p class="line867"><strong>Requisitos gerais de registro para E-commerce</strong> <p class="line874">Independente do formato das entradas de registro geradas pelo seu carrinho de compras, cada uma deve conter a data e a hora e pelo menos um dos campos a seguir para possibilitar a correlação de visitantes: <ul><li>Host remoto ou Endereço IP (para os métodos de visitantes Somente IP ou IP-Useragent) </li><li>Useragent (para o método de visitantes IP-Useragent) </li><li>Cookies (para o método de visitantes UTM ou SID) </li><li>ID de sessão (para o método de visitantes SID) </li></ul><p class="line874">Se qualquer um dos campos acima estiver ausente, o Urchin não irá gerar uma análise significativa da sua receita. O Urchin também define os seguintes campos de E-commerce: <ul><li>%{ORDERID} é o número do pedido </li><li>%{STORE} é o nome/id da fachada </li><li>%{SESSIONID} é o identificador de sessão exclusivo do cliente </li><li>%{TOTAL} é o total da transação, incluindo imposto e frete (somente decimais, sem caracteres '$') </li><li>%{TAX}é o valor do imposto cobrado no subtotal </li><li>%{SHIPPING} é o valor dos custos de frete </li><li>%{BILL_CITY} é a cidade de faturamento do cliente </li><li>%{BILL_STATE} é o estado de faturamento do cliente </li><li>%{BILL_ZIP} é o CEP de faturamento do cliente </li><li>%{BILL_COUNTRY} é o país de faturamento do cliente </li><li>%{PRODUCT_CODE} é o identificador do produto </li><li>%{PRODUCT_NAME} é o nome do produto </li><li>%{VARIATION} é uma variação opcional do produto em termos de cores, tamanhos, etc </li><li>%{PRICE} é o preço unitário do produto (somente decimais, sem caracteres '$') </li><li>%{QUANTITY} é a quantidade solicitada deste produto </li><li>%{UPSOLD} é um booleano (0|1), se o produto estava à venda </li></ul><p class="line867"><strong>Registros de formato de linha única</strong> <p class="line874">Siga estas instruções se o seu arquivo de registro de E-commerce apenas contiver hits e todos eles tiverem o mesmo formato de linha que o explicado acima. <ol type="1"><li>Crie um novo formato de registro personalizado no diretório lib/custom/logformats, fazendo uma cópia do arquivo de formato de registro custom.lf.sample.Nomeie a sua cópia com um sufixo .lf. </li><li>Edite o novo arquivo de formato de registro personalizado e defina as entradas a seguir com base nas recomendações abaixo: <ul><li><p class="line891">PrimaryPositions:essa entrada especifica a ordem de campos no seu arquivo de registro.Crie uma lista separada por vírgulas de ids de campos que descreva a sua ordem de campos.Os nomes de campos e ids estão localizados no arquivo lib/reporting/logformats/fieldlist.txt.Veja o exemplo abaixo. </li><li><p class="line891">SecondaryPositions:deixe como '-', pois essa entrada não é usada para arquivos de registro de formato de linha única. </li><li><p class="line891">PrimaryKey:deixe como '-', pois essa entrada não é usada para arquivos de registro de formato de linha única. </li><li><p class="line891">SecondaryKey:deixe como '-', pois essa entrada não é usada para arquivos de registro de formato de linha única. </li><li><p class="line891">PrimaryContent:as entradas válidas para esse campo são TRANSACTION ou ITEM.Se os hits no seu arquivo de registro descreverem a compra de cada produto individual, defina essa entrada como ITEM.Se os hits no arquivo de registro descreverem a compra inteira, defina essa entrada como TRANSACTION. </li><li><p class="line891">SecondaryContent:deixe como '-', pois essa entrada não é usada para arquivos de registro de formato de linha única. </li><li><p class="line891">CommentKey:se algumas das linhas no seu arquivo de registro forem comentários ou não forem consideradas hits e começarem com um caractere específico, insira esse caractere aqui. </li><li><p class="line891">FieldSeparator1:os separadores de campos definem que caracteres são considerados separadores de campos.As entradas válidas são tabulações (\t) e espaços (\s).Defina-as apropriadamente com base nos caracteres entre os campos no seu arquivo de registro. </li><li><p class="line891">FieldSeparator2:consulte FieldSeparator1 acima. </li><li><p class="line891">QuotesEscapeSep:especifica se os separadores de campos serão ignorados dentro de um campo que contém caracteres de aspas "".Essa entrada deve ser provavelmente mantida como YES. </li><li><p class="line891">BracketsEscapeSep:especifica se os separadores de campos serão ignorados dentro de um campo que contém caracteres de colchetes [].Essa entrada deve ser provavelmente mantida como YES. </li><li><p class="line891">MergSuccessiveSep:especifica se dois caracteres separadores devem ser considerados um único separador em uma linha.Essa entrada pode ser provavelmente mantida como NO. </li><li><p class="line891">CleanWhiteSpace:especifica se o espaço em branco deve ser removido das extremidades dos campos, quando estes são analisados.Essa entrada pode ser provavelmente mantida como NO. </li><li><p class="line891">StatusRequired:deixe essa entrada definida como NO, a não ser que os seus hits contenham códigos de status do tipo de servidor da web. </li><li><p class="line891">CustomDateFormat:se o seu formato de registro contiver um formato de data personalizado, defina o formato strptime apropriado que descreve a entrada. </li><li><p class="line891">CustomTimeFormat:se o seu formato de registro contiver um formato de hora personalizado, defina o formato strptime apropriado que descreve a entrada. </li></ul></li><li>Salve o seu formato de registro personalizado no diretório lib/custom/logformats. </li><li>Selecione o formato de registro personalizado para a sua origem do registro na interface Admin do Urchin. </li><li>Processe os seus arquivos de registro com o Urchin. </li></ol><p class="line867"><strong>Exemplo de formato de linha única</strong> <p class="line874">O exemplo a seguir é um único hit de um registro que apenas possui dados de transação. <p class="line867"><pre>12345 123.123.123.123 "Urchin Store" [26/Aug/2003:11:43:02 -0700] 192.73 "San Diego" "CA" 92101 "US" "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1;)" "utma=171060324.2734232095.1061444425.1061444425.1061444763.2"
</pre><p class="line862">A lista a seguir mostra cada nome de campo relacionado com o número de id obtido do arquivo lib/reporting/logformats/fieldslist.txt.Os números de id, assim atribuídos, são usados no campo PrimaryPositions do seu arquivo de formato de registro personalizado. <ol type="1"><li>ID de transação 25 </li><li>Host remoto ou Endereço IP 12 </li><li>Nome da loja 26 </li><li>Data/hora do Apache 3 </li><li>Custo total 28 </li><li>Cidade de cobrança 31 </li><li>Estado de faturamento 32 </li><li>CEP de faturamento 33 </li><li>País de faturamento 34 </li><li class="gap">User Agent 13 </li><li>Cookies 14 </li></ol><p class="line874">Com base na lista acima, você definiria as seguintes entradas no arquivo de formato de registro personalizado: <p class="line867"><pre>PrimaryPositions: "25, 12, 26, 3, 28, 31, 32, 33, 34, 13, 14" SecondaryPositions: - PrimaryKey: - SecondaryKey: - PrimaryContent: TRANSACTION SecondaryContent: - CommentKey: # FieldSeparator1: \s FieldSeparator2: \t QuotesEscapeSep: YES BracketsEscapeSep: YES MergSuccessiveSep: NO CleanWhiteSpace: NO StatusRequired: NO CustomDateFormat: - CustomTimeFormat: -
</pre><p class="line867">PrimaryPositions especificam a ordem dos campos e PrimaryContent informa ao Urchin que esse registro contém transações (ou informações gerais sobre compras).Os separadores de campo foram definidos como espaço e tabulação, já que os campos foram separados por espaços em branco.Os formatos personalizados de data/hora não foram especificados, já que a data e a hora foram formatadas como uma data do Apache. <p class="line867"><strong>Registros de formato de várias linhas</strong> <p class="line874">O Urchin pode fazer a leitura de formatos de várias linhas, desde que o caractere inicial de cada linha contenha um caractere específico que possa identificar qual formato está sendo usado.Por exemplo, os arquivos de registro ELF2 contêm um caractere de exclamação '!' como primeiro caractere na linha de transação.As linhas de item NÃO contêm um caractere '!' inicial. <p class="line874">Siga estas instruções se o seu arquivo de registro de E-commerce contém duas linhas de formato diferentes, uma para a transação e a outra para detalhes de itens ou produtos. <ol type="1"><li>Crie um novo formato de registro personalizado no diretório lib/custom/logformats, fazendo uma cópia do arquivo de formato de registro custom.lf.sample.Nomeie a sua cópia com um sufixo .lf. </li><li>Edite o novo arquivo de formato de registro personalizado e defina as entradas a seguir, com base nas recomendações abaixo: <ul><li><p class="line891">PrimaryPositions:essa entrada especifica a ordem de campos no seu arquivo de registro.Crie uma lista separada por vírgulas de ids de campos que descreva a sua ordem de campos.Os nomes de campos e ids estão localizados no arquivo lib/reporting/logformats/fieldlist.txt. </li><li><p class="line891">SecondaryPositions:essa entrada especifica a ordem de campos no seu arquivo de registro.Crie uma lista separada por vírgulas de ids de campos que descreva a sua ordem de campos.Os nomes de campos e ids estão localizados no arquivo lib/reporting/logformats/fieldlist.txt. </li><li><p class="line891">PrimaryKey:defina a chave primária para o caractere que identifica a linha do arquivo de registro como o mesmo formato descrito por Primarypositions. </li><li><p class="line891">SecondaryKey:defina a chave secundária para o caractere que identifica a linha do arquivo de registro como o mesmo formato descrito por Secondarypositions. </li><li><p class="line891">PrimaryContent:as entradas válidas para esse campo são TRANSACTION ou ITEM.Se os hits no seu arquivo de registro descreverem a compra de cada produto individual, defina essa entrada como ITEM.Se os hits no arquivo de registro descreverem a compra inteira, defina essa entrada como TRANSACTION. </li><li><p class="line891">SecondaryContent:consulte PrimaryContent acima. </li><li><p class="line891">CommentKey:se algumas das linhas no seu arquivo de registro forem comentários ou não forem consideradas hits e começarem com um caractere específico, insira esse caractere aqui. </li><li><p class="line891">FieldSeparator1:os separadores de campos definem que caracteres são considerados separadores de campos.As entradas válidas são tabulações (\t) e espaços (\s).Defina-as apropriadamente com base nos caracteres entre os campos no seu arquivo de registro. </li><li><p class="line891">FieldSeparator2:consulte FieldSeparator1 acima. </li><li><p class="line891">QuotesEscapeSep:especifica se os separadores de campos serão ignorados dentro de um campo que contém caracteres de aspas "".Essa entrada deve ser provavelmente mantida como YES. </li><li><p class="line891">BracketsEscapeSep:especifica se os separadores de campos serão ignorados dentro de um campo que contém caracteres de colchetes [].Essa entrada deve ser provavelmente mantida como YES. </li><li><p class="line891">MergSuccessiveSep:especifica se dois caracteres separadores devem ser considerados um único separador em uma linha.Essa entrada pode ser provavelmente mantida como NO. </li><li><p class="line891">CleanWhiteSpace:especifica se o espaço em branco deve ser removido das extremidades dos campos quando estes são analisados.Essa entrada pode ser provavelmente mantida como NO. </li><li><p class="line891">StatusRequired:deixe essa entrada definida como NO, a não ser que os seus hits contenham códigos de status do tipo de servidor da web. </li><li><p class="line891">CustomDateFormat:se o seu formato de registro contiver um formato de data personalizado, defina o formato strptime apropriado que descreve a entrada. </li><li><p class="line891">CustomTimeFormat:se o seu formato de registro contiver um formato de hora personalizado, defina o formato strptime apropriado que descreve a entrada. </li></ul></li><li>Salve o seu formato de registro personalizado no diretório lib/custom/logformats. </li><li>Selecione o formato de registro personalizado para a sua origem do registro na interface Admin do Urchin. </li><li>Processe os seus arquivos de registro com o Urchin. </li></ol></div><div id="pagebottom"></div>
</div>


<div id="footer" style="clear: both; margin: 0; padding: 0; border-bottom:1px solid #CCC;"></div><div id="copyright" style="font-size: 70%; text-align: center;">&copy;2010 Google</div>
</body></html>