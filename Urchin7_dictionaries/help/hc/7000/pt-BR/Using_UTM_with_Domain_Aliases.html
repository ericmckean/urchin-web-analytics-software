<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body><table id="top_location_line" width="100%"><table id="top_location_line" width="100%"><tr width="100%"><td><a href="http://www.urchin.com"><img border="0" src="../images/google_sm.gif" width="135" height="41"></a></td><td width="100%"><span id="top_line" style="width: 100%; float: left; clear: both; border-bottom: 1px solid #CCC;"><span id="top_title" style="float: left; margin-top: 10px;"><b>Help Center</b></span></td></tr></table>
<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en">
<p class="line867"><strong>Como usar o UTM com aliases de domínio</strong> <p class="line867"><strong>Situação</strong> <p class="line874">Como os cookies são objetos com base em domínio, existem algumas considerações importantes a serem feitas quando um site tem vários domínios.Um cookie definido em um domínio "meusite.com.br" será transmitido a todos os outros subdomínios, como "www.meusite.com.br".Entretanto, esse cookie não será transmitido a "meusite.net" ou a qualquer outro domínio raiz diferente. <p class="line874">Se o seu site tiver apenas um domínio que responda a "meusite.com.br" e "www.meusite.com.br", você poderá seguir a instalação padrão do UTM.Entretanto, se você tiver um site com um ou vários aliases, convém redirecionar o tráfego dos aliases para o site principal.Isso garante que o monitoramento de visitantes do UTM seja efetuado no domínio principal e que todos os visitantes sejam monitorados de forma consistente. <p class="line874">Se isso não for feito, um visitante poderá constar como dois visitantes caso ele acesse o mesmo site por meio de dois domínios diferentes.As instruções a seguir mostram um exemplo de como redirecionar os domínios de alias para um domínio principal nos servidores Apache e IIS. <p class="line867"><strong>Como redirecionar aliases no Apache</strong> <p class="line862">Se você estiver utilizando um servidor da web Apache, a configuração poderá ser facilmente modificada para redirecionar todo o tráfego de um dos aliases para o site principal.Uma das formas de fazer isso é criar duas entradas VirtualHost.A primeira será o domínio principal que incluirá as configurações normais; a segunda será para todos os aliases e redirecionará para o principal.Exemplo: <p class="line867"><pre>#---primary virtualhost
&lt;VirtualHost 1.2.3.4&gt;
Nome do servidor www.meusite.com.br
Alias do servidor meusite.com.br
...
&lt;/VirtualHost&gt;
#---second virtualhost
&lt;VirtualHost 1.2.3.4&gt;
Nome do servidor meusite.org
Alias do servidor www.meusite.org meusite.net www.meusite.net
RewriteEngine on
RewriteRule ^(.*)       http://www.meusite.com.br$1     [R=301]
&lt;/VirtualHost&gt;
</pre><p class="line862">A segunda VirtualHost utiliza uma regra de regravação com um código de redirecionamento 301 (Movido permanentemente) para direcionar todo o tráfego para o site original.Um único hit 301 ainda será gravado no arquivo de registro, o que é conveniente para controlar em quais domínios os usuários estão entrando, mas todo o tráfego restante será forçado para um só domínio.Nesse ponto, no que se refere ao UTM, o site parece ser um site de um domínio e está pronto para a instalação normal do UTM. <p class="line874">Observação:lembre-se de que você deve trabalhar com o seu administrador e fazer referência ao site apache.org nos parâmetros de configuração. <p class="line867"><strong>Como redirecionar aliases no IIS</strong> <p class="line874">Se você estiver usando um servidor da web Microsoft IIS, a configuração poderá ser facilmente modificada para redirecionar todo o tráfego de um alias para o site principal.Uma das formas de fazer isso é criar dois sites na configuração do IIS.O primeiro será o domínio principal (www.meusite.com.br) que incluirá a configuração normal; o segundo será para todos os outros aliases (meusite.net, meusite.org, etc.) e redirecionará para o principal. <p class="line874">No IIS Manager, clique com o botão direito do mouse em um dos sites e abra a caixa de diálogo de propriedades.Na guia "Site da web", clique no botão "Avançado....".Isso ativa uma janela em que é possível atribuir domínios adicionais ao site utilizando o campo "Cabeçalho de host".Defina o domínio principal no site principal e utilize o segundo site para hospedar todos os aliases. <p class="line874">Quando o segundo site com todos os aliases estiver configurado e ativado, crie uma página inicial em branco com o seguinte código de redirecionamento: <p class="line867"><pre>&lt;head&gt;
&lt;META HTTP-EQUIV=Refresh CONTENT="0; URL=http://www.meusite.com.br/"&gt;
&lt;/head&gt;
</pre><p class="line874">Isso fará com que o navegador do visitante redirecione imediatamente para o URL principal.Nesse ponto, o site principal aparenta ser uma configuração simples de um domínio e a instalação normal do UTM pode continuar com as configurações padrão. </div><div id="pagebottom"></div>
</div>


<div id="footer" style="clear: both; margin: 0; padding: 0; border-bottom:1px solid #CCC;"></div><div id="copyright" style="font-size: 70%; text-align: center;">&copy;2010 Google</div>
</body></html>