<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body><table id="top_location_line" width="100%"><table id="top_location_line" width="100%"><tr width="100%"><td><a href="http://www.urchin.com"><img border="0" src="../images/google_sm.gif" width="135" height="41"></a></td><td width="100%"><span id="top_line" style="width: 100%; float: left; clear: both; border-bottom: 1px solid #CCC;"><span id="top_title" style="float: left; margin-top: 10px;"><b>Help Center</b></span></td></tr></table>
<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en">
<p class="line867"><strong>Práticas recomendadas para rodízio de registros</strong> <p class="line867"><strong>Visão geral</strong> <p class="line874">Na maioria dos ambientes operacionais, é bastante comum que serviços e aplicativos do sistema, como servidores da web, gerem arquivos de registro que registram ações e eventos relacionados a esses serviços. Na maioria dos casos, também é uma prática padrão que o sistema operacional ou os aplicativos realizem a manutenção regular nos arquivos de registro para manter o tamanho desses arquivos sob controle.Isso impede que os arquivos de registro cresçam sem limites e acabem esgotando o espaço em disco. <p class="line874">Uma abordagem comum para o gerenciamento de registros é ter uma tarefa de rodízio de registros regularmente agendada que renomeia os registros existentes com um carimbo de data e hora e, em seguida, reinicia o serviço ou o aplicativo com um novo arquivo de registro de comprimento zero.Outra prática padrão da tarefa de rodízio de registros é compactar os arquivos de registro antigos e excluí-los depois que eles atingirem um certo limite de idade ou de ciclo de rodízio. <p class="line874">No caso específico de registros do servidor da web, o rodízio é geralmente manipulado uma vez por dia, para garantir que o tamanho dos registros permaneça gerenciável.Além disso, um agendamento de rodízio diário costuma ser uma boa granulosidade para facilitar o pós-processamento de registros do servidor da web com uma ferramenta de análise como o Urchin.Alguns servidores da web, como o Microsoft IIS, possuem uma funcionalidade embutida de rodízio de registros que, quando habilitada, irá alternar os registros diariamente por padrão.Outros servidores da web, como o Apache, não têm um manipulador explícito de rodízio de registros, mas oferecem ferramentas para a fácil reinicialização do servidor da web (sem a perda do serviço da web) de forma a acomodar a operação de rodízio de registros (por exemplo, apachectl restart). <p class="line867"><strong>Práticas para rodízio de registros</strong> <p class="line874">A necessidade do rodízio de registros de evitar o processamento duplicado de registros foi eliminada devido à tecnologia de Controle do registro do Urchin.Isso proporciona ao Urchin uma flexibilidade muito maior no processamento de registros, como a capacidade de processar registros "dinâmicos" que ainda estão sendo gravados pelo servidor da web ou de processar registros que são alternados com base em um procedimento manual ou irregular. <p class="line867"><strong>Observação importante:</strong> ao contrário de algumas versões anteriores do Urchin, o Urchin 6 não oferece ganchos para a chamada de um procedimento de rodízio de registros ou para a reinicialização de um servidor da web após a execução das tarefas de rodízio de registros, embora certas ações de pós-processamento de registros sejam possíveis conforme a descrição a seguir. <p class="line874">Embora a operação do Urchin 6 não exija que os registros do servidor da web sejam alternados regularmente, ou até mesmo que sejam alternados, convém que um esquema de rodízio de registros padrão seja implementado para garantir a operação uniforme e para impedir que o utilitário de Rastreamento de registro tenha que efetuar um volume muito grande de processamento desnecessário.É muito mais eficiente, sob o ponto de vista do sistema e do aplicativo, gerenciar vários registros menores do que um registro muito grande, uma vez que as operações de arquivos tendem a ficar consideravelmente lentas à medida que o tamanho dos arquivos aumenta.Também é muito mais fácil efetuar o backup e a restauração de arquivos menores no caso de uma falha no disco ou de outra falha do sistema. <p class="line874">Os mecanismos de rodízio de registros não precisam ser extremamente complexos -- na maioria dos casos, a única coisa necessária é um simples script de shell ou script Perl executado diariamente a partir do cron em sistemas do tipo UNIX.O script precisa apenas alternar o registro do servidor da web existente e marcá-lo com um carimbo de data e hora (convém usar os formatos %Y%m%d ou AAAAMMDD) e reiniciar o servidor da web.É possível acrescentar uma lógica adicional para expurgar os arquivos de registro antigos, de forma a manter o uso do espaço em disco sob controle. <p class="line867"><strong>Como configurar o Urchin para uso com o rodízio de registros</strong> <p class="line862">Após a efetivação do seu esquema de rodízio de registros, é muito simples configurar o Urchin para processar o registro alternado.Você pode configurar a especificação do Caminho de arquivo de registro de forma a usar um caractere curinga que corresponda ao padrão de nomes de arquivo de registro com carimbo de data e hora ao configurar uma Origem do registro (por exemplo, access-log.* para registros do Apache ou ex*.log para registros do IIS) ou pode usar a correspondência interna de padrão de carimbo de data e hora do Urchin (por exemplo, access-log.%Y%m%d para o Apache e ex%y%m%d.log para o IIS).Quando o Urchin encontrar esse padrão, ele substituirá a data de ontem pelo padrão %Y%m%d e processará o registro com o nome de arquivo resultante (por exemplo, access-log.20020617).Para obter informações adicionais sobre o padrão de correspondência de datas, consulte Substituição do curinga e da data no caminho do registro. <p class="line874">A especificação do curinga apresenta a vantagem de permitir que você insira vários registros não processados em um único diretório e fazer com que o Urchin processe esses registros da próxima vez que for executado.Isso é especialmente conveniente para se lidar com situações nas quais os arquivos de registro esperados não estão em vigor quando o Urchin é executado; por exemplo, pelo fato de um servidor da web remoto estar inativo ou devido à perda da conectividade com a rede.A desvantagem é que o Urchin precisa abrir o diretório e pesquisar cada arquivo de registro a fim de determinar se ele já foi processado, e isso pode resultar em uma sobrecarga significativa quando muitos arquivos de registro residem nesse diretório.Se você considera o seu esquema de rodízio de registros confiável, o uso do esquema de correspondência de padrão AAAAMMDD é um método mais eficiente. <p class="line862">Também é possível fazer com que o Urchin 6 exclua ou arquive/compacte o registro após o seu processamento.Diferentes opções de Destino do registro podem ser definidas nas Configurações avançadas de uma Origem de registro.Para obter mais informações sobre essas configurações de Destino do registro, consulte Gerenciamento de registros. <p class="line867"><strong>Importante:</strong> as opções de Destino do registro não devem ser usadas com registros dinâmicos que não foram alternados! <p class="line867"><strong>Como configurar o rodízio de registros em sistemas do tipo UNIX</strong> <p class="line874">Devido à ampla variedade de configurações do servidor da web e da funcionalidade de sistemas operacionais e por causa da grande probabilidade de os procedimentos de rodízio de registros serem altamente específicos para cada local, não existe um método padrão para estabelecer o rodízio de registros do servidor da web em sistemas do tipo UNIX. <p class="line867"><strong>Como configurar o rodízio de registros para o Windows IIS Webserver</strong> <p class="line874">Conforme mencionado anteriormente, as funções de gerenciamento do IIS possibilitam o rodízio automático de registros do servidor da web, embora essa funcionalidade não esteja habilitada por padrão.Siga as etapas a seguir para configurar um servidor da web IIS para o devido rodízio de registros.Convém alternar os registros diariamente e definir o rodízio de registros de forma que ele aconteça em relação ao horário local.Por padrão, o IIS irá alternar os registros à meia-noite com base no horário do meridiano de Greenwich (GMT) e não no horário local. <p class="line874">No Windows 2000, verifique se o servidor da web IIS está devidamente configurado para efetuar o rodízio de registros.Isso é feito com o uso da função "Gerenciamento do computador" do Windows 2000.O Windows NT, o Windows XP e o Windows 2003 Server utilizam um procedimento semelhante.Para abrir Gerenciamento do computador e estabelecer um rodízio de registros, realize as ações a seguir: <ul><li><p class="line862">Clique em "Iniciar" -&gt; "Configurações" -&gt; "Painel de controle". </li><li>Clique duas vezes em "Ferramentas administrativas". </li><li>Clique duas vezes em "Gerenciamento do computador". </li><li>Clique duas vezes em "Internet Information Services". </li><li>Clique com o botão direito do mouse em "Site da web padrão" e selecione "Propriedades". </li><li>Na janela pop-up, selecione a guia "Site da web". </li><li>Na parte inferior da janela, clique na guia "Propriedades". </li><li>Clique no botão de opções "Diariamente", no título "Novo período de tempo de log". </li><li>Clique na caixa de seleção "Usar hora local para nomeação e sobreposição de arquivo". </li></ul><p class="line874">Isso irá garantir que o IIS alterne os registros do servidor da web diariamente, logo após a meia-noite. </div><div id="pagebottom"></div>
</div>


<div id="footer" style="clear: both; margin: 0; padding: 0; border-bottom:1px solid #CCC;"></div><div id="copyright" style="font-size: 70%; text-align: center;">&copy;2010 Google</div>
</body></html>