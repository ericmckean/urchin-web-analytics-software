<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body><table id="top_location_line" width="100%"><table id="top_location_line" width="100%"><tr width="100%"><td><a href="http://www.urchin.com"><img border="0" src="../images/google_sm.gif" width="135" height="41"></a></td><td width="100%"><span id="top_line" style="width: 100%; float: left; clear: both; border-bottom: 1px solid #CCC;"><span id="top_title" style="float: left; margin-top: 10px;"><b>Help Center</b></span></td></tr></table>
<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en">
<p class="line867"><strong>Como efetuar registros - Apache e IIS</strong> <p class="line867"><strong>Visão geral</strong> <p class="line874">É essencial configurar registros no seu servidor da web em um formato que permita ao Urchin interpretar os dados corretamente e produzir relatórios totalmente detalhados.Este artigo explica o processo para os servidores da web mais comuns, o Apache e o Microsoft IIS.Para obter a máxima profundidade em termos de geração de relatórios, é importante ativar registros de forma a incluir informações de Referência e User Agent.Para possibilitar a geração de relatórios de visitantes únicos com o uso do UTM (Módulo de monitoramento do Urchin ou Urchin Tracking Module), é adicionalmente necessário ativar o registro de cookies.O monitoramento com base no UTM é a única maneira de se obter relatórios fiéis de visitantes únicos.Embora não seja necessário, convém decidir se você deseja usar o UTM antes de alterar os registros do seu servidor da web.Em caso positivo, será necessário ativar cookies nos seus registros agora.Não haverá nenhum problema se você ativar cookies, mas não instalar o UTM no seu site da web imediatamente.Antes de continuar, confira a seção sobre Monitoramento de visitantes para se familiarizar com a instalação do UTM. <p class="line867"><strong>Configuração</strong> <p class="line867"><strong>Apache</strong> <p class="line874">Por padrão, o Apache geralmente efetua registros no então chamado formato de registro comum, além de oferecer uma opção de registro em um formato mais detalhado, conhecido como formato de registro NCSA estendido/combinado.Para a geração ideal de relatórios, o Urchin requer uma variação do formato de registro NCSA estendido/combinado.Para configurar o Apache de forma a usar o formato apropriado, faça o seguinte: <p class="line874">1. Faça uma cópia de backup do seu arquivo httpd.conf.Em seguida, use um editor de texto para abrir o httpd.conf original. <p class="line862">2. Localize a seção contendo linhas que começam com a palavra LogFormat. <p class="line862">3. Insira uma nova linha LogFormat usando um dos formatos mostrados a seguir, dependendo de você pretender ou não usar o UTM.A entrada LogFormat deve ser adicionada ao seu arquivo de configuração como uma única linha, sem retornos de carro ou quebras de linha.Não deixe de prestar bastante atenção para inserir todos os caracteres corretamente. <p class="line867"><strong>Para sites da web que não irão usar o UTM:</strong> <p class="line867"><tt>LogFormat&nbsp;"%h&nbsp;%v&nbsp;%u&nbsp;%t&nbsp;\"%r\"&nbsp;%&gt;s&nbsp;%b&nbsp;\"%{Referer}i\"&nbsp;\"%{User-Agent}i\""&nbsp;urchin</tt> <p class="line867"><strong>Para sites ativados para o UTM:</strong> <p class="line867"><tt>LogFormat&nbsp;"%h&nbsp;%v&nbsp;%u&nbsp;%t&nbsp;\"%r\"&nbsp;%&gt;s&nbsp;%b&nbsp;\"%{Referer}i\"&nbsp;\"%{User-Agent}i\"&nbsp;\"%{Cookie}i\""&nbsp;urchin</tt> <p class="line862">4. A palavra "urchin" no final da linha LogFormat é um apelido que será usado em outro local do arquivo httpd.conf para aplicar esse formato a um arquivo de registro.Essa string pode ser qualquer opção que você escolher.O uso de "urchin" irá ajudar a identificar que essa entrada foi criada para acomodar o processamento do Urchin. <p class="line862">5. Examine a entrada &lt;VirtualHost&gt; para a qual você deseja ativar esse novo formato de registro.Desative qualquer entrada TransferLog ou CustomLog existente em um grupo &lt;VirtualHost&gt;&lt;/VirtualHost&gt; inserindo um # na frente (por exemplo, TransferLog se torna #TransferLog).Em seguida, insira esta nova entrada CustomLog, substituindo a string path_to_log pelo caminho apropriado até o seu local de registro: <p class="line867"><tt>CustomLog&nbsp;path_to_log/access.log&nbsp;urchin</tt> <p class="line862">Se você tiver escolhido anteriormente um identificador diferente de "urchin" como o apelido para a sua entrada LogFormat, use esse apelido no lugar de "urchin" na entrada CustomLog. <p class="line874">6. Salve as edições feitas no seu arquivo httpd.conf. <p class="line862">7. <strong>IMPORTANTE!</strong> Verifique a sintaxe do seu novo arquivo httpd.conf executando o comando: <p class="line867"><tt>apachectl&nbsp;configtest</tt> <p class="line874">Isso irá produzir a sintaxe de resposta ok.Em caso negativo, verifique atenciosamente o seu arquivo httpd.conf e corrija os erros.Se você não conseguir obter a resposta correta, não continue este procedimento.Como alternativa, faça uma cópia de backup do arquivo editado e restaure o original sobrescrevendo essa versão com uma cópia de httpd.conf salva no início deste procedimento.Isso irá garantir que o servidor da web continue a operar normalmente enquanto você tenta descobrir o que há de errado com as suas alterações. <p class="line874">8. Depois de confirmar a sintaxe do arquivo httpd.conf, reinicie o Apache.O método preferencial é chamar o script apachectl, que é normalmente instalado com o Apache. <p class="line867"><tt>apachectl&nbsp;restart</tt> <p class="line862">9. Verifique o registro.Abra um navegador e visite o site em questão algumas vezes.Em seguida, examine as últimas linhas do arquivo de registro especificado na entrada CustomLog.Você verá que vários hits recentes foram gravados no registro. <p class="line874">No caso do formato de registro estendido/combinado modificado do Urchin, uma linha de registro será semelhante a esta: <p class="line867"><tt class="backtick">64.40.51.27</tt> <tt class="backtick">www.urchin.com</tt> <tt class="backtick">-</tt> <tt class="backtick">[28/Aug/2002:15:11:01</tt> <tt class="backtick">-0700]</tt> <tt class="backtick">"GET</tt> <tt class="backtick">/images/urchin_header_logo.gif</tt> <tt class="backtick">HTTP/1.1"</tt> <tt class="backtick">200</tt> <tt class="backtick">3017</tt> <tt class="backtick">"http://www.urchin.com/"</tt> <tt class="backtick">"Mozilla/4.0</tt> <tt class="backtick">(compatible;</tt> <tt class="backtick">MSIE</tt> <tt class="backtick">6.0;</tt> <tt class="backtick">Windows</tt> <tt class="backtick">NT</tt> <tt class="backtick">5.0)"</tt> <p class="line874">Se você tiver configurado o UTM no seu site e tiver ativado registros de cookies, uma linha de registro será semelhante a esta: <p class="line867"><tt class="backtick">64.40.51.27</tt> <tt class="backtick">www.urchin.com</tt> <tt class="backtick">-</tt> <tt class="backtick">[28/Aug/2002:15:11:01</tt> <tt class="backtick">-0700]</tt> <tt class="backtick">"GET</tt> <tt class="backtick">/images/urchin_header_logo.gif</tt> <tt class="backtick">HTTP/1.1"</tt> <tt class="backtick">200</tt> <tt class="backtick">3017</tt> <tt class="backtick">"http://www.urchin.com/"</tt> <tt class="backtick">"Mozilla/4.0</tt> <tt class="backtick">compatible;</tt> <tt class="backtick">MSIE</tt> <tt class="backtick">6.0;</tt> <tt class="backtick">Windows</tt> <tt class="backtick">NT</tt> <tt class="backtick">5.0)"</tt> <tt class="backtick">"__utma=171060324.1378004559.1063331913.1063334677.1063521838.3;</tt> <tt class="backtick">__utmb=171060324;</tt> <tt class="backtick">__utmc=171060324"</tt> <p class="line874">10. Observe as informações adicionais de cookies do UTM no final da linha. <p class="line867"><strong>Microsoft Internet Information Server (IIS)</strong> <p class="line874">Observação:o Microsoft IIS usa um formato de registro do W3C. <p class="line874">O Urchin poderá fornecer relatórios bastante básicos se os seus arquivos de registro do IIS tiverem pelo menos os seguintes campos: <ul><li>Date </li><li>Time </li><li>C-IP </li><li>CS-URI-Stem </li><li>SC-Status </li><li>SC-Bytes </li></ul><p class="line874">Estes campos são obrigatórios.Sem eles, não haverá relatórios significativos.Entretanto, esse registro mínimo não fornece informações suficientes para relatórios de Referências e Navegadores.Desse modo, convém definir propriedades de registros mais detalhadas para o seu servidor IIS. <p class="line874">As propriedades de registro do IIS são configuradas separadamente para cada domínio no servidor, ou globalmente.Para servidores com mais de alguns domínios, a opção global é recomendada.As etapas a seguir irão garantir que os campos obrigatórios do arquivo de registro estejam sendo registrados.Se você optar por registrar campos adicionais, o Urchin irá simplesmente ignorá-los na ocasião do processamento.Entretanto, como o registro de campos desnecessários irá aumentar o tamanho dos seus arquivos de registro, convém registrar apenas os campos necessários para o Urchin. <p class="line862">1. Inicie a ferramenta de gerenciamento de serviços do IIS acessando "Iniciar" -&gt;"Programas"-&gt;"Ferramentas administrativas" -&gt; "Gerenciamento do computador". <p class="line874">2. Expanda a árvore "Serviços e aplicativos" e selecione "Internet Information Services", o que ativará uma lista de sites da web (exceto no Windows 2003 Server, no qual é necessário expandir também a pasta "Sites da web" para obter uma lista de sites). <p class="line874">3. Clique com o botão direito na entrada do site que você deseja modificar e selecione "Propriedades". <p class="line874">4. Selecione a guia "Site da web" e, na seção localizada na parte inferior dessa tela, verifique se a caixa de seleção "Ativar o log" está marcada.Em seguida, no menu suspenso "Formato de log ativo", escolha "Formato de arquivo de log estendido W3C". <p class="line874">5. Clique no botão "Propriedades", ao lado da caixa "Formato de log ativo". <p class="line874">6. Selecione a guia "Propriedades estendidas", <p class="line874">7. Marque as caixas para os campos a seguir: <ul><li>Data [ date] </li><li>Hora [ time ] </li><li>Endereço IP do cliente [ c-ip ] </li><li>Nome do usuário [ cs-username ] </li><li>Método [ cs-method ] </li><li>Tronco URI [ cs-uri-stem ] </li><li>Consulta URI [ cs-uri-query ] </li><li>Status do protocolo [ sc-status ] </li><li>Bytes enviados [ sc-bytes ] </li><li>Agente do usuário [ cs[User-Agent] ] </li><li>Referencial [ cs[Referer] ] </li><li>Cookie [ cs[Cookie] ] (Esse campo somente é necessário para monitoramento do UTM) </li></ul><p class="line874">8. Verifique se a caixa "Contabilização de processos" está desmarcada, pois ela não proporciona informações úteis sobre atividade de acesso à web. <p class="line874">9. Selecione "Apply" e "OK" em cada janela para salvar as suas configurações. <p class="line874">10. Não é necessário reiniciar o IIS.Seus registros começarão a ser efetuados imediatamente, de acordo com as novas configurações. </div><div id="pagebottom"></div>
</div>


<div id="footer" style="clear: both; margin: 0; padding: 0; border-bottom:1px solid #CCC;"></div><div id="copyright" style="font-size: 70%; text-align: center;">&copy;2010 Google</div>
</body></html>