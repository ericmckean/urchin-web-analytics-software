<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body><table id="top_location_line" width="100%"><table id="top_location_line" width="100%"><tr width="100%"><td><a href="http://www.urchin.com"><img border="0" src="../images/google_sm.gif" width="135" height="41"></a></td><td width="100%"><span id="top_line" style="width: 100%; float: left; clear: both; border-bottom: 1px solid #CCC;"><span id="top_title" style="float: left; margin-top: 10px;"><b>Help Center</b></span></td></tr></table>
<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en">
<p class="line867"><strong>Como posso mover o Urchin 6.x e todos os dados de relatórios para outro servidor?</strong> <p class="line874">Mover o Urchin 6.x de um servidor para outro requer as seguintes etapas básicas: <ol type="1"><li>Preparar o banco de dados do Urchin </li><li>Instalar o Urchin 6.x no novo servidor </li><li>Mover os bancos de dados de relatórios do Urchin para os perfis </li><li>Mover arquivos e modelos personalizados </li><li>Aplicar configurações personalizadas do Urchin </li><li>Verificar as novas permissões de arquivos </li><li>Reativar a licença do Urchin </li></ol><p class="line874">OBSERVAÇÃO:as seguintes instruções detalhadas podem ser aplicadas também a transferências entre plataformas.Os arquivos de banco de dados de relatórios do Urchin podem ser movidos para qualquer sistema operacional suportado pelo Urchin.Considerações ao mover dados e arquivos de um tipo de plataforma para outro incluem a sintaxe da linha de comandos (como adicionar "./" para sistemas Unix).Outras considerações incluem modificações na sintaxe de diretórios, como "Pastas\Windows\padrão\" vs. "/Diretórios/unix/padrão/". <p class="line867"><strong>1. Preparar o banco de dados do Urchin</strong> <p class="line874">Essa etapa poderá ser ignorada se você for usar o mesmo servidor de banco de dados para a nova instalação do Urchin.Caso contrário, será necessário preparar o banco de dados do Urchin antes de efetuar a nova instalação no novo servidor: <p class="line867"><strong>a.</strong>      Crie um banco de dados vazio do Urchin com as devidas permissões para o usuário do Urchin. <p class="line874">Exemplo de comandos SQL para a criação de um banco de dados back-end MySQL: <p class="line867"><pre>   mysql&gt; create database urchin character set utf8;
   mysql&gt; GRANT ALL ON urchin.* to 'urchin'@'localhost' IDENTIFIED BY 'urchinpassword';
</pre><p class="line874">Exemplo de comandos PSQL para a criação de um banco de dados back-end PostreSQL: <p class="line867"><pre>   postgres=# CREATE DATABASE urchin WITH ENCODING 'UTF8';
   postgres=# CREATE USER urchin WITH PASSWORD 'urchin password';
   postgres=# GRANT ALL ON DATABASE urchin TO urchin;
   postgres=# \connect urchin;
   postgres=# CREATE LANGUAGE 'PLPGSQL';
</pre><p class="line867"><strong>b.</strong>      Copie dados de banco de dados do Urchin do servidor antigo criando um dump SQL do banco de dados antigo e importando-o para o novo banco de dados.Isso irá copiar automaticamente a maioria das configurações necessárias do Urchin, incluindo Perfis, Origens de registro, Usuários, Contas, Grupos, Agendador e outras configurações. <p class="line874">Exemplo de comandos SQL para banco de dados back-end MySQL: <ul><li style="list-style-type:none">Banco de dados de origem: </li></ul><p class="line867"><pre>   mysqldump -h {oldDBhostname} -u {username} -p {urchinDBname} &gt; urchin.sql
</pre><ul><li style="list-style-type:none">Banco de dados de destino: </li></ul><p class="line867"><pre>   mysql -h {newDBhostname} -u {username} -p {urchinDBname} &lt; urchin.sql
</pre><p class="line874">Exemplo de comandos PSQL para banco de dados back-end PostreSQL: <ul><li style="list-style-type:none">Banco de dados de origem: </li></ul><p class="line867"><pre>   pg_dump -h {oldDBhostname} -p {oldDBport} -U {username} {urchinDBname} &gt; urchin.sql
</pre><ul><li style="list-style-type:none">Banco de dados de destino: </li></ul><p class="line867"><pre>   psql -h {newDBhostname} -p {newDBport} -U {username} {urchinDBname} &lt; urchin.sql
</pre><p class="line867"><strong>2. Instalar o Urchin 6 no novo servidor</strong> <p class="line874">Crie uma nova instalação do Urchin 6 no novo servidor usando o banco de dados anteriormente preparado. <p class="line874">Verifique se desmarcou a opção "Excluir e recriar tabelas de banco de dados específicas do Urchin, se existirem" para instalações do Windows ou se respondeu NÃO à pergunta "Deseja inicializar o banco de dados de configuração durante a instalação?" para instalações do Unix!). <p class="line874">Instruções detalhadas sobre como instalar o Urchin estão disponíveis aqui (ignore as etapas de configuração do banco de dados e comece no capítulo "Como instalar o Urchin"): <ul><li><p class="line891"><a href="Urchin_Installation_Guide_(FreeBSD_and_Linux).html">Guia de instalação do Urchin (FreeBSD e Linux)</a> </li><li><p class="line891"><a href="Urchin_Installation_Guide_(Windows).html">Guia de instalação do Urchin (Windows)</a> </li></ul><p class="line874">Pare os deamons ou serviços do urchin antes de continuar com as etapas a seguir: <p class="line867"><pre>~/urchin/bin/urchinctl -stop
</pre><p class="line867"><strong>3. Mover os bancos de dados de relatórios do Urchin para os perfis</strong> <p class="line862">Por padrão, todos os dados de relatórios do Urchin são armazenados em um subdiretório do diretório principal do Urchin:~/urchin/data/ Esse diretório deve ser arquivado para manter a estrutura de subdiretórios e, em seguida, movido para o novo servidor após a instalação do Urchin nesse local.Sempre que possível, ele deve ser restaurado no mesmo local de diretório no novo servidor:~/urchin/data. <p class="line874">OBSERVAÇÃO:se a instalação antiga do Urchin tiver utilizado diretórios "history" e "reports" personalizados, esses diretórios precisarão ser copiados (em vez de ~/urchin/data/reports e ~/urchin/data/history). <p class="line867"><strong>4. Mover arquivos e modelos personalizados</strong> <p class="line874">As personalizações feitas no Urchin, incluindo formatos de registro personalizados e conjuntos de relatórios, não são mantidas no diretório "data" do Urchin.Em vez disso, são mantidas em um local separado no diretório "lib" da distribuição do Urchin.Quando o Urchin for instalado no novo servidor, todas as personalizações que tiverem sido feitas no sistema Urchin antigo precisarão ser copiadas para a nova instalação do Urchin.Em geral, esses arquivos são mantidos em ~/urchin/lib/custom/. <p class="line874">Para fazer isso, vá até o servidor do Urchin antigo e navegue até o diretório "lib" da distribuição do Urchin.Em seguida, crie um arquivamento do novo diretório "personalizado" inteiro (e todos os subdiretórios) usando um utilitário de arquivamento, como tar ou ZIP. Copie esse arquivamento para o novo servidor do Urchin e descompacte-o no diretório "lib" da distribuição do Urchin. <p class="line867"><strong>5. Aplicar configurações personalizadas do Urchin</strong> <p class="line874">Se as configurações padrão tiverem sido alteradas para a instalação antiga do Urchin 6.x em: <p class="line867"><pre>/etc/session.conf
/etc/urchin.conf
/var/urchinwebd.conf
</pre><p class="line874">não se esqueça de aplicar as mesmas configurações à sua nova instalação, editando os arquivos correspondentes. <p class="line867"><strong>6. Verificar as novas permissões de arquivos</strong> <p class="line874">Quando todos os arquivos tiverem sido movidos para o novo servidor, será necessário efetuar uma verificação completa para garantir que todos os arquivos tenham as permissões necessárias e que todos os arquivos pertençam ao mesmo usuário (somente sistemas UNIX). <p class="line874">Para corrigir as permissões do Urchin, execute o comando a seguir a partir do diretório ~/urchin/util/: <p class="line867"><pre>        inspector -r
</pre><p class="line874">Para verificar a propriedade dos arquivos (somente no UNIX), execute o comando a seguir a partir do diretório ~/urchin/: <p class="line867"><pre>        chown -R urchin_user:urchin_group./
</pre><p class="line867"><strong>7. Reativar a licença do Urchin</strong> <p class="line874">Inicie os deamons ou serviços do urchin. <p class="line867"><pre>~/urchin/bin/urchinctl start
</pre><p class="line874">Depois de concluir a instalação do Urchin, abra a interface da web do Urchin. <p class="line874">O sistema exibirá a tela "Licenciar Urchin" com o link "Reativar licença": <p class="line874">Como o Urchin foi instalado com o uso do banco de dados anteriormente existente, a chave do sistema foi alterada e a licença deve ser reativada. <p class="line874">OBSERVAÇÃO:solicite ao revendedor do Urchin que redefina a licença antes de reativar. </div><div id="pagebottom"></div>
</div>


<div id="footer" style="clear: both; margin: 0; padding: 0; border-bottom:1px solid #CCC;"></div><div id="copyright" style="font-size: 70%; text-align: center;">&copy;2010 Google</div>
</body></html>