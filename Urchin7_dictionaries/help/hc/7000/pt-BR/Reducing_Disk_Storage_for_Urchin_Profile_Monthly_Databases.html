<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body><table id="top_location_line" width="100%"><table id="top_location_line" width="100%"><tr width="100%"><td><a href="http://www.urchin.com"><img border="0" src="../images/google_sm.gif" width="135" height="41"></a></td><td width="100%"><span id="top_line" style="width: 100%; float: left; clear: both; border-bottom: 1px solid #CCC;"><span id="top_title" style="float: left; margin-top: 10px;"><b>Help Center</b></span></td></tr></table>
<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en">
<p class="line867"><strong>Como reduzir o armazenamento em disco para bancos de dados mensais de perfis do Urchin</strong> <p class="line867"><strong>Visão geral</strong> <p class="line874">Os dados de relatórios do Urchin são armazenados em bancos de dados mensais independentes para cada Perfil configurado no Urchin.Esses bancos de dados residem tipicamente no diretório "data/reports" da distribuição do Urchin.Por padrão, o Urchin irá manter um número ilimitado desses bancos de dados mensais de Perfis.Para a maioria dos sites de pequeno e médio porte, os requisitos de armazenamento são modestos.Como a geração de relatórios do Urchin não exige acesso aos registros brutos do servidor da web após o seu processamento, não é necessário manter esses registros.Os bancos de dados mensais processados do Urchin terão aproximadamente de 5 a 10% do tamanho dos registros brutos do servidor da web que foram processados para preencher os bancos de dados do Urchin e, na maioria dos casos, isso irá representar uma quantidade mínima de espaço em disco, mesmo que todos os bancos de dados do Urchin sejam mantidos indefinidamente. <p class="line874">Entretanto, para sites maiores, que produzem centenas ou milhares de megabytes em registros de servidor da web por dia ou que hospedam provedores que possuem um número muito grande de Perfis configurados, convém reduzir o requisito existente de armazenamento de dados do Urchin.Isso pode ser realizado de uma destas maneiras: <ol type="1"><li>Defina o perfil de forma a excluir automaticamente os novos dados de monitoramento após o processamento dos registros. </li><li>Defina o perfil de forma a arquivar dados históricos. </li><li>Limite o número de meses de dados de relatórios históricos que são mantidos. </li></ol><p class="line874">Instruções para cada um desses métodos são fornecidas no final deste artigo. <p class="line867"><strong>Visão geral técnica do armazenamento de banco de dados do Urchin</strong> <p class="line874">Para cada perfil do Urchin, o Urchin mantém um conjunto de arquivos de bancos de dados armazenados mensalmente em diretórios nomeados como YYYYMM.Cada um desses diretórios contém aproximadamente 50 arquivos, que fornecem dados para o mecanismo de geração de relatórios.O diretório e os arquivos de banco de dados são nomeados com base no mês para o qual estão armazenando dados.A lista completa de bancos de dados é: <p class="line862">YYYYMM-uhed --&gt; cabeçalho do banco de dados <p class="line862">YYYYMM-usti --&gt; índice de strings <p class="line862">YYYYMM-ustd --&gt; dados de strings <p class="line862">YYYYMM-udai --&gt; índice de tabelas agregadas <p class="line862">YYYYMM-udXX --&gt; bancos de dados agregados (XX é substituído pelo número da tabela a partir do mapa de dados) <p class="line862">YYYYMM-uvii --&gt; índice de visitantes <p class="line862">YYYYMM-uvid --&gt; dados de visitantes <p class="line862">YYYYMM-used --&gt; dados de sessão <p class="line862">YYYYMM-upad --&gt; dados de caminhos <p class="line862">YYYYMM-utrd --&gt; dados de transações (Ecommerce) <p class="line862">YYYYMM-uitd --&gt; dados de itens (Ecommerce) <p class="line862">YYYYMM-ulti --&gt; índice de controle do registro <p class="line862">YYYYMM-ultd --&gt; dados de controle do registro <p class="line862">YYYYMM-utod --&gt; dados de totais <p class="line862">YYYYMM-uhid --&gt; dados de histograma <p class="line862">YYYYMM-umad --&gt; dados da matriz de visitantes <p class="line874">Cada conjunto de bancos de dados é completo para o mês de dados que ele contém.Como não há interdependência entre os conjuntos de bancos de dados mensais, as operações de arquivamento e ajuste podem ser realizadas independentemente de cada conjunto de banco de dados, sem afetar outros meses. <p class="line874">Em circunstâncias normais, o conjunto inteiro de arquivos de banco de dados mensais é mantido para cada mês.Entretanto, quatro desses arquivos de banco de dados são usados apenas pelo mecanismo de processamento de registros do Urchin.Esses arquivos de banco de dados são: <p class="line874">YYYYMM-usti <p class="line874">YYYYMM-udai <p class="line874">YYYYMM-ulti <p class="line874">YYYYMM-ultd <p class="line874">Os arquivos de banco de dados a seguir são usados pelo mecanismo de processamento de registros do Urchin e para a segmentação cruzada e detalhamento de visitantes em relatórios.A remoção do conteúdo apenas afetará esses recursos de relatórios. <p class="line874">YYYYMM-uvii <p class="line874">YYYYMM-uvid <p class="line874">YYYYMM-used <p class="line874">YYYYMM-upad <p class="line874">YYYYMM-utrd <p class="line874">YYYYMM-uitd <p class="line874">Esses bancos de dados contêm informações sobre visitantes, sessões, caminhos, transações e produtos.Esses arquivos podem representar uma porcentagem significativa do espaço total de armazenamento necessário para o mês, na ordem de 10 a 50%.Desse modo, pode haver uma vantagem significativa em termos de espaço em disco ao desativar a opção "Manter dados brutos de monitoramento" na tela "Armazenamento/banco de dados" da configuração do Perfil. <p class="line874">Convém que apenas sites com tráfego extremamente alto para os quais manter os dados brutos de monitoramento representa um problema de consumo de disco ou recursos da CPU desativem a preservação dos dados brutos de monitoramento. <p class="line874">Outras economias possíveis de espaço em disco podem ser obtidas com a compactação de bancos de dados mensais históricos do Urchin em arquivos ZIP.Os arquivos resultantes têm normalmente somente de 20 a 30% do tamanho do conjunto de banco de dados descompactado.Embora o mecanismo de geração de relatórios do Urchin não consiga ler os arquivos ZIP diretamente, ele pode extrair dinamicamente os bancos de dados de que precisa desses arquivos ZIP.Esse processo é totalmente transparente para uma pessoa que visualiza os relatórios do Urchin, a não por um pequeno atraso enquanto os bancos de dados estão sendo descompactados.Como o mecanismo de geração de relatórios não remove os bancos de dados que ele descompactou, os dados podem ser acessados de maneira ainda mais rápida enquanto o usuário visualiza os relatórios do Urchin.Entretanto, o arquivo ZIP original permanece em vigor e, sendo assim, uma operação de limpeza periódica pode remover simplesmente os bancos de dados descompactados para obter novamente o espaço em disco. <p class="line874">A última possibilidade de reduzir os requisitos de armazenamento do Urchin é estabelecer uma política para a duração dos relatórios históricos que o Urchin deve fornecer.Por exemplo, em ambientes nos quais o Urchin é fornecido como serviço de geração de relatórios com um pacote de hospedagem, é muito comum fornecer dados históricos do Urchin referentes ao período de um ano.Devido à organização mensal dos bancos de dados do Urchin, é muito fácil para os mecanismos de scripts automáticos removerem automaticamente os bancos de dados mensais antigos que já ultrapassaram um certo limite.Quando uma política de duração de relatórios históricos estiver implementada, o requisito de armazenamento de dados do Urchin irá se estabilizar normalmente ou apenas aumentará um pouco quando o limite de retenção histórico tiver sido atingido. <p class="line867"><strong>Métodos para reduzir o armazenamento de dados - Como</strong> <p class="line867"><strong>Método 1:excluir os dados brutos de monitoramento após o processamento do registro</strong> <p class="line874">Você pode configurar o perfil de forma a excluir dados brutos de visitantes e informações de sessão após o processamento.Para sites grandes, esse melhora o desempenho e reduz a quantidade de dados armazenados.Observação:as sessões que sobrepõem dias aparecem como duas sessões (uma para cada dia) em vez de uma sessão quando essa configuração é selecionada.A diferença nos resultados será insignificante para a maioria dos sites. <p class="line874">Para configurar o perfil de forma a excluir dados brutos de visitantes e informações de sessão após o processamento: <ol type="1"><li><p class="line862">Na interface de administração, clique em "Configuração" e em "Perfis do Urchin --&gt; Perfis". </li><li>Edite o perfil desejado. </li><li>Na guia "Armazenamento/banco de dados", desative o campo "Manter dados brutos de monitoramento". </li><li>Clique em "Atualizar". </li></ol><p class="line867"><strong>Método 2:auto-arquivar dados históricos</strong> <p class="line874">Você pode configurar o perfil para compactar os dados mensais históricos em um arquivo.Os relatórios podem visualizar os dados arquivados, mas nenhum hit adicional pode ser processado para os meses arquivados. <p class="line874">Para configurar o perfil de forma a arquivar dados históricos: <ol type="1"><li><p class="line862">Na interface de administração, clique em "Configuração" e em "Perfis do Urchin --&gt; Perfis". </li><li>Edite o perfil desejado. </li><li>Na guia "Armazenamento/banco de dados", ative o campo "Arquivar banco de dados". </li><li>Especifique um número de meses para o campo "Arquivar banco de dados após". </li><li>Clique em "Atualizar". </li></ol><p class="line867"><strong>Método 3:limitar a retenção de bancos de dados para relatórios históricos</strong> <p class="line874">Para cada Perfil do Urchin, basta remover qualquer banco de dados no diretório "data/reports/nome_do_perfil" que comece com um prefixo YYYYMM e que tenha ultrapassado o limite necessário para relatórios históricos.Por exemplo, se você quiser manter um histórico de relatório de um ano e o mês atual for fevereiro de 2004, remova os bancos de dados nomeados como 200301-*data.un* para excluir os dados de relatórios de janeiro de 2003 para esse perfil do Urchin.Esse processo pode ser repetido para todos os bancos de dados mais antigos do que janeiro de 2003. </div><div id="pagebottom"></div>
</div>


<div id="footer" style="clear: both; margin: 0; padding: 0; border-bottom:1px solid #CCC;"></div><div id="copyright" style="font-size: 70%; text-align: center;">&copy;2010 Google</div>
</body></html>