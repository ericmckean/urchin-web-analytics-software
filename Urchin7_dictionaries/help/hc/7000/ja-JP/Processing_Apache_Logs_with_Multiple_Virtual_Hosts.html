<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body><table id="top_location_line" width="100%"><table id="top_location_line" width="100%"><tr width="100%"><td><a href="http://www.urchin.com"><img border="0" src="../images/google_sm.gif" width="135" height="41"></a></td><td width="100%"><span id="top_line" style="width: 100%; float: left; clear: both; border-bottom: 1px solid #CCC;"><span id="top_title" style="float: left; margin-top: 10px;"><b>Help Center</b></span></td></tr></table>
<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en">
<p class="line867"><strong>複数の仮想ホストを使用した Apache ログの処理</strong> <p class="line867"><strong>はじめに</strong> <p class="line874">Apache ウェブサーバーで複数の仮想ホストを使用している場合、ホストされているすべてのウェブサイトのログは 1 つのログ ファイルに記録されます。 Urchin では、仮想ホストごとにログを個別に処理するほうが効率的ですが、1 つの統合ログを読み込むプロファイルを仮想ホストごとに設定することも可能です。 <p class="line867"><strong>手順</strong> <p class="line867"><strong>ステップ 1: </strong> Apache ウェブサーバーで Urchin 対応の形式でログを作成するよう設定していることを確認します。 特に、次のフィールドが下記に示す順番で記録されていることを確認してください。 <ol type="1"><li>リモート ホスト [%h] </li><li>リクエストされたホスト [%v] </li><li>ユーザー名 [%u] </li><li>日時 (NCSA) [%t] </li><li>リクエスト (NCSA) [%r] </li><li><p class="line862">ステータス [%&gt;s] </li><li>バイト数 [%b] </li><li>リファラー [%{Referer}i] </li><li>ユーザー エージェント [%{User-Agent}i] </li><li>Cookie (UTM などの Cookie を記録する場合) [%{Cookie}i] </li></ol><p class="line867"><strong>ステップ 2: </strong> Urchin の管理インターフェースで [構成] -&gt; [Urchin プロファイル] -&gt; [ログ マネージャ] に移動し、統合されたログ ファイルを参照するログ ソースを追加します。 ログ形式には「auto」を選択します。 <p class="line867"><strong>ステップ 3: </strong> [構成] -&gt; [Urchin プロファイル] で各仮想ホストの新しいプロファイルを作成します。 [プロファイルの追加] ウィザードで各プロファイルのログ ソースを追加する際、[既存のログ ソースの追加] をクリックして、上で設定したログ ソースを選択します。 <p class="line867"><strong>ステップ 4: </strong> 次に [フィルタの管理] で [追加] ボタンをクリックし、新しいフィルタを追加します。 [フィルタ ウィザード: 設定] 画面で、[フィルタの種類] に [一致するパターンのみ] を、フィルタ フィールドに [cs_host(RAW)] をそれぞれ選択し、[フィルタ パターン] フィールドに仮想ホスト名を入力します。 その後、このフィルタを対応するプロファイルに割り当てます。 <p class="line867"><strong>ステップ 5: </strong> 各仮想ホストについてステップ 3 と 4 を繰り返します。 <p class="line867"><strong>アドバイス</strong> <p class="line874">この手順は複数の仮想ホストのレポートを作成する場合に便利ですが、Urchin で仮想ホストごとにログ ファイル全体の再処理が必要になります。 ログ ファイルのサイズが大きい場合は、大幅なオーバーヘッドが生じて Urchin のパフォーマンスに影響する可能性があります。 このため、仮想ホストごとに個別のログ ファイルを作成することをおすすめします。 <p class="line874">この手順は、特に Apache を対象としたものですが、同じ NCSA 形式のフィールドにログを記録する他のウェブサーバーのログ形式でも同様の手順となります。 <p class="line874">現在 Urchin では、新しい仮想ホストを自動検出して新しいプロファイルを自動設定することはできません。 プロファイルはすべて明示的に設定する必要があります。  </div><div id="pagebottom"></div>
</div>


<div id="footer" style="clear: both; margin: 0; padding: 0; border-bottom:1px solid #CCC;"></div><div id="copyright" style="font-size: 70%; text-align: center;">&copy;2010 Google</div>
</body></html>