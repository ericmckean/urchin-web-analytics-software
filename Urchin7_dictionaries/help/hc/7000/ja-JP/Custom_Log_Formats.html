<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body><table id="top_location_line" width="100%"><table id="top_location_line" width="100%"><tr width="100%"><td><a href="http://www.urchin.com"><img border="0" src="../images/google_sm.gif" width="135" height="41"></a></td><td width="100%"><span id="top_line" style="width: 100%; float: left; clear: both; border-bottom: 1px solid #CCC;"><span id="top_title" style="float: left; margin-top: 10px;"><b>Help Center</b></span></td></tr></table>
<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en">
<p class="line867"><strong>カスタムのログ形式</strong> <p class="line867"><strong>はじめに</strong> <p class="line874">Urchin では実質的にあらゆるログ ファイル形式を処理できます。 ログ形式に関する必要な情報を Urchin に提供すると、Urchin はその設定に基づいてデータを読み取り解析します。 ここでは、カスタムのログ形式の作成方法について説明します。 作成したカスタム形式は、ログ ファイルの形式として管理インターフェースで選択できます。  <p class="line874">レポートを作成するには、それに応じたログ データが必要です。 Urchin でログを処理するには、ログに必要最小限のフィールドが含まれている必要があります。 不明な場合は、ドキュメント センターの Urchin 管理セクションにある「ログ ファイル – ログ –他のウェブサーバー」のドキュメントをご覧ください。 <p class="line867"><strong>カスタム形式の作成</strong> <p class="line874">カスタムのログ形式は形式仕様ファイルを作成して、次のフォルダに保存します <pre>   urchin install dir]/lib/custom/logformats/
</pre><p class="line874">custom.lf  というサンプル ファイルが用意されています。 カスタム ファイルは複数作成することができ、 Urchin で認識できるよう必ず「.lf」という拡張子を付けます。 デフォルトで内蔵されている apache、w3c、netscape などのログ形式は、次のディレクトリにあります。 <pre>   urchin install dir]/lib/reporting/logformats/
</pre><p class="line874">上記の各ディレクトリにある fieldlist.txt ファイルには、利用可能なフィールド リストが記載されています。 カスタム フォルダにはカスタム フィールド リスト、レポート フォルダには標準フィールド リストがあります。 カスタム ログ形式では、フィールド ID 番号を使用して、いずれかのリストのフィールドを参照できます。 カスタム形式の作成が完了すると、管理インターフェースで選択できるようになります。 カスタム形式を作成する基本的な手順は次のとおりです。 <p class="line867"><strong>ステップ 1:  サンプルをコピーする。</strong> Urchin の lib/custom/logformats フォルダで custom.lf ファイルのコピーを作成します。 新しいファイル名では空白文字を使用せず、拡張子を「.lf」にする必要があります。 <p class="line867"><strong>ステップ 2:  開始位置を設定する。</strong> 上記のステップで作成したファイルを編集します。 このファイルには各変数に関する数多くの有益な情報が含まれています。 まず始めに <tt class="backtick">PrimaryPositions</tt> 変数を設定します。 このカンマ区切りのリストでは、ログ形式の各フィールド (ID 番号) とその相対位置を特定します。 上記の 2 つのディレクトリの fieldlist.txt ファイルを使用して、使用するフィールド ID を決定します。 Apache や IIS の形式とは異なるカスタムの日付形式と時間形式がある場合は、それぞれフィールド 16 と 17 を使用します。 日付と時間をまとめて 1 つのフィールドに設定する場合は、フィールド 16 のみを使用します。 <p class="line867"><strong>ステップ 3:  フィールドの区切り文字を確認する。</strong> <tt class="backtick">FieldSeparator1</tt> 変数を確認して、これをフィールドの区切り文字に設定します。 空白文字には「\s」、タブには「\t」を使用します。 <p class="line867"><strong>ステップ 4:  HTTP ステータス フィールドを使用できる場合。</strong> この場合は、<tt class="backtick">StatusRequired</tt> 変数の設定を YES のままにします。 これにより、有効なヒットと無効なヒットが適切に区別されます。 ログにステータス フィールドがない場合は、すべてのヒットが有効とみなされるよう NO に設定します。 <p class="line867"><strong>ステップ 5:  カスタムの日付/時間形式を使用する場合。</strong> この場合は、フィールド 16 の <tt class="backtick">CustomDateFormat</tt> とフィールド 17 の <tt class="backtick">CustomTimeFormat</tt>を編集します。 <a href="Time_Formats.html">カスタムの日付/時間形式</a>で定義された % 変数を使用して、形式を指定します。 <p class="line867"><strong>ステップ 6:  他の変数を確認する。</strong> ほとんどのカスタムのログ形式について、他の変数はそのままで問題ありませんが、ファイルに記載された各変数のコメントをチェックして、自分のケースにあてはまるかどうかを確認します。 <p class="line867"><strong>ステップ 7:  カスタム計算フィールドを使用する場合。</strong> 仕様ファイルでカスタム計算フィールドを指定して、形式に追加することができます。 サンプルがファイルの最後にコメント付きで記載されています。 カスタム計算フィールドはフィルタ セクションのアドバンス フィルタと同じように機能しますが、カスタム計算フィールドが最初に処理されます。 詳細については、カスタム計算フィールドに関する記事をご覧ください。 <p class="line874">ファイルを保存すると、この形式を管理インターフェースでログ ファイルに適用できるようになり、 ログ形式のプルダウン メニューに形式オプションの 1 つとして自動的に表示されます。  </div><div id="pagebottom"></div>
</div>


<div id="footer" style="clear: both; margin: 0; padding: 0; border-bottom:1px solid #CCC;"></div><div id="copyright" style="font-size: 70%; text-align: center;">&copy;2010 Google</div>
</body></html>