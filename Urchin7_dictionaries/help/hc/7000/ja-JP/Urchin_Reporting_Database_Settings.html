<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body><table id="top_location_line" width="100%"><table id="top_location_line" width="100%"><tr width="100%"><td><a href="http://www.urchin.com"><img border="0" src="../images/google_sm.gif" width="135" height="41"></a></td><td width="100%"><span id="top_line" style="width: 100%; float: left; clear: both; border-bottom: 1px solid #CCC;"><span id="top_title" style="float: left; margin-top: 10px;"><b>Help Center</b></span></td></tr></table>
<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en">
<p class="line867"><strong>Urchin レポートのデータベース設定</strong> <p class="line874">(更新日:  2008 年 12 月 16 日) <p class="line867"><strong>概要</strong> <p class="line874">Urchin にはレポート作成データベースの拡張性と精度を管理するために、下記の 2 つのオプションがございます。 <p class="line867"><strong>データベース テーブルの上限</strong> <p class="line862">このオプションを使用すると、大規模なサイトのデータを一定の量に制限することができます。 Urchin レポート作成データベース テーブルあたりのレコード数の上限を設定するには、このオプションを使用します。 通常のインストールでは、デフォルトの設定で問題ございません。 1 か月の間でいずれかのテーブルのレコード数が指定した上限に達すると、上限を超えたレコードは<em>「other」</em>という名前の最後のレコードにまとめられます。 このため、テーブルのサイズが大きいほど、レポート データの精度は高くなります。 <p class="line862">Urchinレポートに<strong>other</strong> が高い割合で表示される場合は、データベース テーブルの上限を増やして精度を高める必要がございます。 <p class="line867"><strong>メモリ使用量の上限</strong> <p class="line874">Urchin のログ処理中のメモリ使用量を制限するには、このオプションを使用して、レポート作成データベースのサイズの上限を指定します。 大規模なサイトでは、メモリ フットプリントが大きいと、ページ スワップが少なくなるため、パフォーマンスを向上させることができます。 デフォルトでは低めの値に設定されていますが、システムに十分な物理メモリがある場合は、高い値に設定することをおすすめします。 <p class="line867"><strong>実験的設定</strong> <p class="line874">現在、Urchin ではレポート作成データベース設定で下記の上限値を設定できます。 <p class="line874">データベース テーブルの上限            :     最大 500,000 レコード <p class="line874">メモリ使用量の上限  :     最大 1024 MB <p class="line862">バージョン 6.5 以降の Urchin では、これらの設定の拡張値がサポートされますが、<span class="u"><strong>Urchin に関する十分な知識がある場合</strong></span>のみ使用してください。 拡張値は管理インターフェースに表示されないため、設定データベースで設定する必要がございます。 Urchin 6.5 の拡張されたレポート作成データベース設定の上限値は下記のとおりです。 <p class="line874">データベース テーブルの上限            :     最大 2,000,000 レコード <p class="line862">メモリ使用量の上限  :     最大 2GB <strong> </strong> <p class="line867"><strong>実験的設定のガイドライン</strong> <ul><li style="list-style-type:none"><p class="line862">これらの拡張設定は実験的なもので、一部のシステムでは<strong>メモリ不足</strong>のエラーが発生する場合もあるため、ご使用の前に下記の情報とガイドラインをご確認ください。 </li><li>一般的に、32 ビット アプリケーションにはそれぞれ 4 ギガバイト (GB) の仮想アドレス空間があり、ユーザー アドレス空間とカーネル アドレス空間に分けられています。 ユーザー プロセスではユーザー アドレス空間のみにメモリが割り当てられます。 </li><li><p class="line891"><em><strong>Windows プラットフォーム:</em></strong> ユーザー アプリケーションに 2 GB、カーネル アプリケーションに残りの 2 GB を使用できます。 windows OS では、<a class="http" href="http://msdn.microsoft.com/en-us/library/bb613473(VS.85).aspx">4 ギガバイト チューニング</a> を使用してユーザー空間を 3GB まで拡張できますが、Urchin では可能性の低いこの状況を考慮せず、常に上限を 2 GB としてコンパイルまたはリンクします。 このため、windows OS では、データベース テーブルの上限を <span class="u"><strong>500,000</strong></span> レコード以下、メモリ使用量の上限を <span class="u"><strong>1 GB</strong></span> 以下に必ず設定してください。 <ul><li><p class="line891"><span class="u"><em>パフォーマンス</em></span>を最大限に高めるには、下記のように設定します。 <ul><li><p class="line862">メモリ使用量の上限:  <span class="u"><strong>1024 MB</strong></span> </li><li><p class="line862">データベース テーブルの上限:  <span class="u"><strong>500,000</strong></span> データベース テーブル行 </li></ul></li><li><p class="line891"><span class="u"><em>精度</em></span>を最大限に高めるには、下記のように設定します。 <ul><li><p class="line862">メモリ使用量の上限:  <span class="u"><strong>256</strong></span> MB </li><li><p class="line862">データベース テーブルの上限:  <span class="u"><strong>1,000,000</strong></span> データベース テーブル行 </li></ul></li></ul></li><li><p class="line891"><em><strong>Unix プラットフォーム:</strong><strong></em></strong>  ユーザー アプリケーションに 3 GB、カーネル アプリケーションに残りの 1 GB を使用できます。 このため、UNIX プラットフォームでは、データベース テーブルの上限を <span class="u"><strong>500,000</strong></span> レコード以下、メモリ使用量の上限を <span class="u"><strong>2 GB</strong></span> 以下に必ず設定してください。 <ul><li><p class="line891"><span class="u"><em>パフォーマンス</em></span>を最大限に高めるには、下記のように設定します。 <ul><li><p class="line862">メモリ使用量の上限:  <span class="u"><strong>2048</strong></span> MB </li><li><p class="line862">データベース テーブルの上限:  <strong><span class="u">500,000</span></strong> データベース テーブル行 </li></ul></li><li><p class="line891"><span class="u"><em>精度</em></span>を最大限に高めるには、下記のように設定します。 <ul><li><p class="line862">メモリ使用量の上限:  <span class="u"><strong>1024</strong></span> MB </li><li><p class="line862">データベース テーブルの上限:  <strong><span class="u">2,000,000</span></strong> データベース テーブル行 </li></ul></li></ul></li></ul><p class="line867"><strong> </strong><strong>'データベース テーブルの上限'の拡張設定</strong><strong> </strong> <p class="line874">通常の 'データベース テーブルの上限' の値と同様に、これらの拡張値は個々のプロファイルやデータベース テーブル全体に対して設定できます。 下記のクエリでは、プロファイル ID が '1' のプロファイルに対して、データベース テーブルの上限が 1,000,000 レコードに設定されます。 <p class="line867"><pre>UPDATE uprofiles SET uipr_db_table_limit=1000000 WHERE uspr_id=1;
</pre><p class="line874">下記のクエリでは、データベース テーブル全体の上限が 1,000,000 レコードに設定されます。 uipr_db_table_limit フィールドの値が 0 のすべてのプロファイルに適用されます。 <p class="line867"><pre>UPDATE uglobals SET uigl_db_table_limit=1000000 WHERE ucgl_name='Global Settings';
</pre><p class="line867"><strong>'メモリ使用量の上限'の拡張設定</strong><strong> </strong> <p class="line874">メモリ使用量全体の上限のみを設定できます。 <p class="line874">データベースのメモリ使用量が ['キャッシュ システムの制限'] に設定されるか、データベースのフィールド 'ubpr_limit_db_cache_size' が 1 に設定されると、自動的にプロファイルに適用されます。 <p class="line874">下記のクエリでは、メモリ使用量全体の上限が 2 GB に設定されます。 データベースのフィールドの数値は 'メガバイト' 単位で指定します (512 MB の場合は 512 と指定します)。 <p class="line867"><pre>UPDATE uglobals SET uigl_db_cache_size=2048 WHERE ucgl_name='Global Settings';
</pre></div><div id="pagebottom"></div>
</div>


<div id="footer" style="clear: both; margin: 0; padding: 0; border-bottom:1px solid #CCC;"></div><div id="copyright" style="font-size: 70%; text-align: center;">&copy;2010 Google</div>
</body></html>