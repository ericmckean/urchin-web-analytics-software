<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body><table id="top_location_line" width="100%"><table id="top_location_line" width="100%"><tr width="100%"><td><a href="http://www.urchin.com"><img border="0" src="../images/google_sm.gif" width="135" height="41"></a></td><td width="100%"><span id="top_line" style="width: 100%; float: left; clear: both; border-bottom: 1px solid #CCC;"><span id="top_title" style="float: left; margin-top: 10px;"><b>Help Center</b></span></td></tr></table>
<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en">
<p class="line867"><strong>Urchin 报告数据库设置</strong> <p class="line874">（修订日期： 2008 年 12 月 16 日） <p class="line867"><strong>概述</strong> <p class="line874">为管理报告数据库的可伸缩性和精度，Urchin 提供了以下两个选项： <p class="line867"><strong>数据库表限制</strong> <p class="line862">通过此选项，您可以将大型网站的数据量维持在合理的限度内。 使用此选项可以限制单个 Urchin 报告数据库表中的记录数。 默认选项适合大多数安装。 如果在某个月中，任何表中的记录数量超过了此上限，系统就会将这些超出上限的记录全部集中到最后一项记录中（名为<em>‘其他’</em>）。 因此，表的尺寸越大，报告数据的精度就越高。 <p class="line862">如果 Urchin 报告中的<strong>其他</strong>条目占据了较大的比例，您就应当提高数据库表限制，以提高精度。 <p class="line867"><strong>内存使用目标</strong> <p class="line874">为了限制可在日志处理过程中分配的内存数量，Urchin 提供了这个选项，以便为读取到内存中的报告数据库的大小设置上限。 对于大型网站来说，内存分配量越大，换页次数就越少，而性能也就越好。 尽管默认设置相对比较保守，但如果系统有足够的物理内存可用，您不妨设置更高的值。 <p class="line867"><strong>实验设置</strong> <p class="line874">目前，Urchin 支持为报告数据库设置使用以下最高值： <p class="line862">数据库表限制            ：    &lt;= 500000 条记录 <p class="line862">内存使用目标  ：    &lt;= 1024 MB <p class="line862">从 6.5 版开始，Urchin 可能能够支持进一步提高上述设置，但我们只建议<span class="u"><strong>高级 Urchin 用户</strong></span>进行此类设置。 这些提高的值不会显示在管理界面上，而只能通过配置数据库进行配置。 对于 Urchin 6.5，用于更高的报告数据库设置的最高值如下。 <p class="line862">数据库表限制            ：    &lt;= 2000000 条记录 <p class="line862">内存使用目标  ：    &lt;= 2GB <strong> </strong> <p class="line867"><strong>实验设置指导原则</strong> <ul><li style="list-style-type:none"><p class="line862">由于这些更高的设置仍处于试验阶段，而且在某些系统中可能会导致<strong>内存不足</strong>错误，因此，请务必在实际使用前先参考以下信息和指导原则。 </li><li>一般而言，每个 32 位应用程序都有 4 千兆字节 (GB) 的虚拟地址空间，划分为用户地址空间和内核地址空间。 用户进程只能分配用户地址空间中的内存。 </li><li><p class="line891"><em><strong>Windows 平台：</em></strong>用户应用程序可使用 2 GB，另外 2 GB 则供内核使用。 虽然 windows OS 允许用户将用户空间扩展至最高 3GB（通过 <a class="http" href="http://msdn.microsoft.com/en-us/library/bb613473(VS.85).aspx">4GB 调整</a>），但 Urchin 进程不会将此作为常见情形，因此会在编译/应用时始终遵守 2GB 上限的规定。 因此，在 windows OS 上，用户不应设置记录数超过 <span class="u"><strong>500000</strong></span> 条，内存使用目标超过 <span class="u"><strong>1GB</strong></span> 的数据库表限制。 <ul><li><p class="line862">为了获得最高<span class="u"><em>性能</em></span>，请进行以下设置： <ul><li><p class="line862">内存使用目标： <span class="u"><strong>1024 MB</strong></span> </li><li><p class="line862">数据库表限制： <span class="u"><strong>500000</strong></span> 行数据库表条目 </li></ul></li><li><p class="line862">为了获得最高<em><span class="u">精度</span></em>，请进行以下设置： <ul><li><p class="line862">内存使用目标： <span class="u"><strong>256</strong></span> MB </li><li><p class="line862">数据库表限制： <span class="u"><strong>1000000</strong></span> 行数据库表条目 </li></ul></li></ul></li><li><p class="line891"><em><strong>Unix 平台：</strong><strong></em></strong> 用户应用程序可使用 3 GB，剩下的 1 GB 属于内核。 因此，在 UNIX 平台上，用户不应设置记录数超过 <span class="u"><strong>500000</strong></span> 条，“内存使用目标”超过 <span class="u"><strong>2GB</strong></span> 的数据库表限制。 <ul><li><p class="line862">为了获得最高<span class="u"><em>性能</em></span>，请进行以下设置： <ul><li><p class="line862">内存使用目标： <span class="u"><strong>2048</strong></span> MB </li><li><p class="line862">数据库表限制： <strong><span class="u">500000</span></strong> 行数据库表条目 </li></ul></li><li><p class="line862">为了获得最高<em><span class="u">精度</span></em>，请进行以下设置： <ul><li><p class="line862">内存使用目标： <span class="u"><strong>1024</strong></span> MB </li><li><p class="line862">数据库表限制： <strong><span class="u">2000000</span></strong> 行数据库表条目 </li></ul></li></ul></li></ul><p class="line867"><strong>配置</strong><strong>更高的'数据库表限制</strong><strong>' </strong> <p class="line874">与常规'数据库表限制'的值类似，这些更高的值既可以针对具体配置文件配置，也可以针对全局配置。 以下查询会将 ID 为 '1' 的配置文件的数据库表限制设置为 1000000 条记录。 <p class="line867"><pre>UPDATE uprofiles SET uipr_db_table_limit=1000000 WHERE uspr_id=1;
</pre><p class="line874">以下查询会将全局数据库表限制设置为 1000000 条记录。 该限制将会应用到 uipr_db_table_limit 字段值为 0 的所有配置文件中。 <p class="line867"><pre>UPDATE uglobals SET uigl_db_table_limit=1000000 WHERE ucgl_name='Global Settings';
</pre><p class="line867"><strong>配置额外'内存使用目标</strong><strong>' </strong> <p class="line874">内存使用目标仅能针对全局设置。 <p class="line874">当“数据库内存使用情况”设为'仅限缓存系统'（或数据库字段 'ubpr_limit_db_cache_size' 设为 1）时，内存使用目标会自动应用到配置文件中。 <p class="line874">以下查询会将全局内存使用目标设置为 2 GB。 请注意，数据库字段以'兆字节'为单位来计算数值（512 实际代表 512 MB）。 <p class="line867"><pre>UPDATE uglobals SET uigl_db_cache_size=2048 WHERE ucgl_name='Global Settings';
</pre></div><div id="pagebottom"></div>
</div>


<div id="footer" style="clear: both; margin: 0; padding: 0; border-bottom:1px solid #CCC;"></div><div id="copyright" style="font-size: 70%; text-align: center;">&copy;2010 Google</div>
</body></html>