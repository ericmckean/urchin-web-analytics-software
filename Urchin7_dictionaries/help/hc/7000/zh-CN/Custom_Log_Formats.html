<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body><table id="top_location_line" width="100%"><table id="top_location_line" width="100%"><tr width="100%"><td><a href="http://www.urchin.com"><img border="0" src="../images/google_sm.gif" width="135" height="41"></a></td><td width="100%"><span id="top_line" style="width: 100%; float: left; clear: both; border-bottom: 1px solid #CCC;"><span id="top_title" style="float: left; margin-top: 10px;"><b>Help Center</b></span></td></tr></table>
<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en">
<p class="line867"><strong>自定义日志格式</strong> <p class="line867"><strong>简介</strong> <p class="line874">Urchin 可处理几乎所有日志文件格式。通过向 Urchin 提供关于日志格式的必要信息，Urchin 会根据您的配置读取并解析原始数据。本文将阐述创建自定义日志格式的分步方法。创建自定义格式后，您就可以在"管理界面"中选择该格式作为任何日志文件的格式。 <p class="line874">请注意，系统在创建特定报告时会要求特定的日志数据。您需要确定日志内所包含的字段可满足 Urchin 处理所需的最低要求。如果不确定，请参阅"文档中心"的"Urchin 管理"部分的"日志文件"-"日志"-"其他网络服务器文档"。 <p class="line867"><strong>创建自定义格式</strong> <p class="line874">通过在 <p class="line867"><pre>   urchin install dir]/lib/custom/logformats/
</pre><p class="line874">文件夹中创建格式规范，您可创建自定义日志格式。提供的示范文件名为 'custom.lf'。可创建多个自定义文件。每个自定义文件都需使用 '.lf' 扩展名，以供 Urchin 辨识。默认的内置日志格式（如 apache、w3c、netscape 等）则位于 <p class="line867"><pre>   urchin install dir]/lib/reporting/logformats/
</pre><p class="line874">以上各目录的 fieldlist.txt 文件中都列有可用字段。自定义文件夹保存自定义字段列表，报告文件夹保存标准字段列表。自定义日志格式可通过字段 ID 编号参考任一列表中的字段。所创建的自定义格式可在"管理界面"中供选择。以下是创建自定义格式的基本步骤： <p class="line867"><strong>第 1 步：复制示例。</strong> 复制 Urchin 发行套装 'lib/custom/logformats' 文件夹中的 'custom.lf' 文件。新的文件名不应使用空格，且需采用 '.lf' 扩展名。 <p class="line867"><strong>第 2 步：设置主要位置。</strong> 修改前一步骤所创建的文件。文件包含有关各变量的大量实用信息。第一步是设置"PrimaryPositions"变量。这份由逗号分隔的列表可以标识日志格式中的各个字段（按 ID 编号）及其相对位置。使用上述两个目录中的 fieldlist.txt 文件来判断要使用字段的 ID。如果您的自定义日期和时间格式与 Apache 及 IIS 格式不同，请分别使用字段 16 和 17。如果日期和时间合并为同一字段，仅使用字段 16 即可。 <p class="line867"><strong>第 3 步：检查字段分隔符。</strong> 检查"FieldSeparator1"变量，并将其设置为字段间使用的分隔符。空格使用 \s，标签使用 a \t。 <p class="line867"><strong>第 4 步：HTTP 状态字段是否可用？</strong> 如果 HTTP 状态字段可用，请将"StatusRequired"变量设为 YES。此变量可正确区分有效点击与错误点击。如果日志中没有状态信息，请将此变量设置为 NO；这样一来，所有的点击都会被视为有效。 <p class="line867"><strong>第 5 步：是否使用自定义日期/时间格式？</strong> 如果是，请修改字段 16 的"CustomDateFormat"及字段 17 的"CustomTimeFormat"。此格式通过 <a href="Time_Formats.html">自定义日期/时间格式</a> 中定义的 % 变量指定。 <p class="line867"><strong>第 6 步：检查其他变量。</strong> 其他大部分变量都适用于多数自定义日志格式，但请查阅各变量文件中提供的建议，以了解它对于您的情况是否适用。 <p class="line867"><strong>第 7 步：是否有自定义计算字段？</strong> 除格式之外，还可在规范文件中指定自定义计算字段。文件底部提供了一个带建议的示例。除了自定义计算字段要先处理之外，自定义计算字段与过滤部分中的"高级过滤"工作方式相同。详情请参阅有关自定义计算字段表单的文章。 <p class="line874">保存文件，您即已准备好将其指定为"管理界面"中日志文件的格式。此格式会自动在日志格式下拉菜单中显示为格式选项之一。 </div><div id="pagebottom"></div>
</div>


<div id="footer" style="clear: both; margin: 0; padding: 0; border-bottom:1px solid #CCC;"></div><div id="copyright" style="font-size: 70%; text-align: center;">&copy;2010 Google</div>
</body></html>