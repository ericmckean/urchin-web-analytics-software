<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body><table id="top_location_line" width="100%"><table id="top_location_line" width="100%"><tr width="100%"><td><a href="http://www.urchin.com"><img border="0" src="../images/google_sm.gif" width="135" height="41"></a></td><td width="100%"><span id="top_line" style="width: 100%; float: left; clear: both; border-bottom: 1px solid #CCC;"><span id="top_title" style="float: left; margin-top: 10px;"><b>Help Center</b></span></td></tr></table>
<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en">
<p class="line867"><strong>Urchin Reporting Database Settings</strong> <p class="line874">(Revision: December 16th, 2008) <p class="line867"><strong>Overview</strong> <p class="line874">Urchin provides two options for managing the reporting database scalability and precision: <p class="line867"><strong>DB Table Limit</strong> <p class="line862">This option allows you to maintain large site data within reasonable limits. Use this option to limit the number of records in a single Urchin reporting db table. The default option is appropriate for most installations. If, for a month, the number of records in any table exceeds this limit, then the records beyond this limit are grouped into the last record (named  <em>’Other’</em>). So, larger the table size, the more precise the reporting data. <p class="line862">If an Urchin report shows a high percentage of entries labeled <strong>Other</strong>, you should increase the DB Table Limit to increase precision. <p class="line867"><strong>Memory Usage Target</strong> <p class="line874">In order to limit the amount of memory that can be allocated during log processing, Urchin provides this option to specify the upper limit on the size of reporting db in memory. For larger sites, a larger memory footprint can increase performance as it will be doing less page swapping. Although the default setting is conservative, you should set a larger value if the system has sufficient physical memory available. <p class="line867"><strong>Experimental Settings</strong> <p class="line874">Currently, Urchin supports following max values for reporting DB settings: <p class="line862">DB Table Limit            :    &lt;= 500,000 records <p class="line862">Memory Usage Target  :    &lt;= 1024 MB <p class="line862">Beginning with version 6.5, Urchin may support extended value for these settings, which should only be used by<span class="u"><strong> Experienced Urchin Users</strong></span>. These extended values will not be visible on the administration interface and will have to be configured via the configuration database. For Urchin 6.5, following are the max values for extended reporting DB settings. <p class="line862">DB Table Limit            :    &lt;= 2,000,000 records <p class="line862">Memory Usage Target  :    &lt;= 2GB <strong> </strong> <p class="line867"><strong>Experimental Settings Guidelines</strong> <ul><li style="list-style-type:none"><p class="line862">As these extended setting are experimental and may lead to <strong>out of memory</strong> errors on some system, so following information and guidelines should be considered before using them. </li><li>In general, each 32-bit application has 4 gigabyte (GB) of virtual address space, which is divided between user address space and kernel address space. User process can only allocate memory in the user address space. </li><li><p class="line891"><em><strong>Windows platform:</strong></em> 2 GB is available to the user application and the other 2 GB is available to the kernel. Although windows OS allows to extend user space up to 3GB via <a class="http" href="http://msdn.microsoft.com/en-us/library/bb613473(VS.85).aspx">4-gigabyte tuning</a>, yet Urchin processes don't assumes this highly unlikely scenario and are always compiled/linked for 2GB limits. Therefore, on windows OS, user should not set DB Table Limit more than <span class="u"><strong>500,000</strong></span> records and Memory Usage Target more than <span class="u"><strong>1GB</strong></span>. <ul><li><p class="line862">For maximum <span class="u"><em>performance</em></span>, set: <ul><li><p class="line862">Memory Usage Target : <span class="u"><strong>1024 MB</strong></span> </li><li><p class="line862">DB Table Limits : <span class="u"><strong>500,000</strong></span> db table rows </li></ul></li><li><p class="line862">For maximum <em><span class="u">precision</span></em>, set: <ul><li><p class="line862">Memory Usage Target : <span class="u"><strong>256</strong></span> MB </li><li><p class="line862">DB Table Limits : <span class="u"><strong>1,000,000</strong></span> db table rows </li></ul></li></ul></li><li><p class="line891"><em><strong>Unix platforms:</strong><strong></em></strong> 3 GB is available to the user application and the remaining 1 GB to the kernel. Therefore, on UNIX platform, user should not set DB Table Limit more than <span class="u"><strong>500,000</strong></span> records and Memory Usage Target more than <span class="u"><strong>2GB</strong></span>. <ul><li><p class="line862">For maximum <span class="u"><em>performance</em></span>, set: <ul><li><p class="line862">Memory Usage Target : <span class="u"><strong>2048</strong></span> MB </li><li><p class="line862">DB Table Limits : <strong><span class="u">500,000</span></strong> db table rows </li></ul></li><li><p class="line862">For maximum <em><span class="u">precision</span></em>, set: <ul><li><p class="line862">Memory Usage Target : <span class="u"><strong>1024</strong></span> MB </li><li><p class="line862">DB Table Limits : <strong><span class="u">2, 000,000</span></strong> db table rows </li></ul></li></ul></li></ul><p class="line867"><strong>Configuring  </strong><strong>extended 'DB Table Limit</strong><strong>' </strong> <p class="line874">Like regular 'DB Table Limit' value, these extended values can be configured for individual profiles as well as globally. The following query will set the DB Table Limit to 1,000,000 records for a profile with profile id '1'. <p class="line867"><pre>UPDATE uprofiles SET uipr_db_table_limit=1000000 WHERE uspr_id=1;
</pre><p class="line874">The following query will set the global DB Table Limit to 1,000,000 records. It will get applied to all profiles whose value for uipr_db_table_limit field is 0. <p class="line867"><pre>UPDATE uglobals SET uigl_db_table_limit=1000000 WHERE ucgl_name='Global Settings';
</pre><p class="line867"><strong>Configuring extended 'Memory Usage Target</strong><strong>' </strong> <p class="line874">Memory Usage Target can only be set globally. <p class="line874">It automatically is applied to profiles when the DB Memory Usage is set to 'Limit to Cache System' (or db field 'ubpr_limit_db_cache_size' set to 1). <p class="line874">The following query will set the global Memory Usage Target to 2 GB. Note that db field consider the number in 'megabytes' (512 will actually be 512 MB). <p class="line867"><pre>UPDATE uglobals SET uigl_db_cache_size=2048 WHERE ucgl_name='Global Settings';
</pre></div><div id="pagebottom"></div>
</div>


<div id="footer" style="clear: both; margin: 0; padding: 0; border-bottom:1px solid #CCC;"></div><div id="copyright" style="font-size: 70%; text-align: center;">&copy;2010 Google</div>
</body></html>