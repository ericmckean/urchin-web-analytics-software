<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body><table id="top_location_line" width="100%"><table id="top_location_line" width="100%"><tr width="100%"><td><a href="http://www.urchin.com"><img border="0" src="../images/google_sm.gif" width="135" height="41"></a></td><td width="100%"><span id="top_line" style="width: 100%; float: left; clear: both; border-bottom: 1px solid #CCC;"><span id="top_title" style="float: left; margin-top: 10px;"><b>Help Center</b></span></td></tr></table>
<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en">
<p class="line867"><strong>Custom Log Formats</strong> <p class="line867"><strong>Introduction</strong> <p class="line874">Urchin can process virtually any log file format. By providing Urchin with the necessary information about the log format, Urchin will read and parse the raw data according to your configuration. This article describes a step by step method for creating custom log formats. Once a custom format is created it can be selected in the Administration Interface as the format for any log file.  <p class="line874">It should be noted that certain log data is required in order to create certain reports. You will need to be sure your log contains the minimally required fields for Urchin to process it. If you are unsure see the Log Files - Logging - Other Webservers document in the Urchin Administration section of the Documentation Center. <p class="line867"><strong>Creating Custom Formats</strong> <p class="line874">A custom log format is created by creating a format specification file in the <pre>   urchin install dir]/lib/custom/logformats/
</pre><p class="line874">folder. A sample file is provided called 'custom.lf'. Multiple custom files can be created. Each one needs the '.lf' extension for Urchin to recognize it. The default built-in log formats such as apache, w3c, netscape, etc. are located in <pre>   urchin install dir]/lib/reporting/logformats/
</pre><p class="line874">In each of the above directories, there is an available fields list in the fieldlist.txt file. The custom folder holds the custom fields list and the reporting folder holds the standard fields list. Custom log formats can refer to fields in either list by using the field id numbers. Once a custom format is created, it is available for selection in the Admininstration Interface. Here are the basic steps for creating a custom format: <p class="line867"><strong>Step 1: Copy the example.</strong> In the 'lib/custom/logformats' folder of the Urchin distribution, make a copy of the 'custom.lf' file. The new filename should not use spaces, and it needs the '.lf' extension. <p class="line867"><strong>Step 2: Set the primary positions.</strong> Edit the file created in the above step. The file contains a lot of useful information about each variable. The first step is to set the <tt class="backtick">PrimaryPositions</tt> variable. This comma separated list identifies each field (by id number) in the log format and its relative position. Use the fieldlist.txt files in the two directories mentioned above to determine which field ids to use. If you have custom date and time formats that are different from Apache and IIS formats, use fields 16 and 17 respectively. If the date and time are together in one field, just use field 16. <p class="line867"><strong>Step 3: Check the fields separator.</strong> Check the <tt class="backtick">FieldSeparator1</tt> variable, and set this to the separator between your fields. Use \s for a space and a \t for a tab. <p class="line867"><strong>Step 4: Is the HTTP status field available?</strong> If the HTTP status field is available, then leave the <tt class="backtick">StatusRequired</tt> variable set to YES. This will separate valid and error hits appropriately. If there is not status in the log, then set this to NO, so that all hits will be considered valid. <p class="line867"><strong>Step 5: Are you using a custom Date/Time format?</strong> If so, then edit the <tt class="backtick">CustomDateFormat</tt> for field 16 and the <tt class="backtick">CustomTimeFormat</tt> for field 17. The format is specified using the % variables defined in <a href="Time_Formats.html">Custom Date/Time Formats</a>. <p class="line867"><strong>Step 6: Check the other variables.</strong> Most of the other variables will be OK for most custom log formats, but check the comments provided in the file on each variable to see if it applies to your situation. <p class="line867"><strong>Step 7: Do you have custom calculated fields?</strong> In addition to the format, you can specify custom calculated fields in the specification file. An example with comments is provided at the bottom of the file. The custom calculated field works the same way as the Advanced Filter in the filtering section except that custom calculated fields are processed first. Please see the article on custom calculated fields form more information. <p class="line874">Save the file and you ready to assign it as the format for a log file in the Administrative Interface. It will automatically show up as one of the format options in the pull down menu for log formats.  </div><div id="pagebottom"></div>
</div>


<div id="footer" style="clear: both; margin: 0; padding: 0; border-bottom:1px solid #CCC;"></div><div id="copyright" style="font-size: 70%; text-align: center;">&copy;2010 Google</div>
</body></html>