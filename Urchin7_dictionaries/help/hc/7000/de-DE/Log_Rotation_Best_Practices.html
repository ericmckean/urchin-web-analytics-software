<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body><table id="top_location_line" width="100%"><table id="top_location_line" width="100%"><tr width="100%"><td><a href="http://www.urchin.com"><img border="0" src="../images/google_sm.gif" width="135" height="41"></a></td><td width="100%"><span id="top_line" style="width: 100%; float: left; clear: both; border-bottom: 1px solid #CCC;"><span id="top_title" style="float: left; margin-top: 10px;"><b>Help Center</b></span></td></tr></table>
<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en">
<p class="line867"><strong>Bewährte Vorgehensweisen zum Protokollwechsel</strong> <p class="line867"><strong>Übersicht</strong> <p class="line874">In den meisten Betriebsumgebungen ist es üblich, dass die Systemdienste und Anwendungen, etwa Webserver, Protokolldateien erstellen, in denen Aktionen und Ereignisse zu diesen Diensten aufgezeichnet werden. Eine regelmäßige Wartung der Protokolldateien durch das Betriebssystem und/oder die Anwendungen zur Beschränkung der Protokolldateigröße gehört ebenfalls in den meisten Fällen zu den Standardverfahren. So wird verhindert, dass sich die Protokolldateien ungehindert aufblähen und letztendlich kein Speicherplatz mehr zur Verfügung steht. <p class="line874">Zur Verwaltung von Protokolldateien wird im Allgemeinen eine regelmäßig geplante Protokollwechselaufgabe ausgeführt, die vorhandene Protokolle mit einem Zeitstempel umbenennt und dann den Dienst oder die Anwendung mit einer leeren Protokolldatei neu startet. Ebenfalls üblich ist es, dass die Protokollwechselaufgabe ältere Protokolldateien komprimiert und Protokolldateien nach einem bestimmten Alter oder Wechselzyklus löscht. <p class="line874">Speziell bei Webserver-Protokollen erfolgt der Wechsel meist täglich, damit die Größe der Protokolle deren Verwaltung noch ermöglicht. Außerdem sorgt ein täglicher Wechselplan im Allgemeinen für eine kompakte Einteilung, die eine nachträgliche Verarbeitung von Webserver-Protokollen mit Analysetools wie Urchin vereinfacht. Bei einigen Webservern, wie IIS von Microsoft, sind Protokollwechselfunktionen integriert. Sind sie aktiviert, werden Protokolle standardmäßig täglich gewechselt. Andere Webserver wie Apache verfügen über keinen speziellen Protokollwechsel-Handler. Sie stellen jedoch Tools für ein einfaches Neustarten des Webservers (ohne Verlust des Webdienstes) bereit, damit die Protokollwechseloperation ausgeführt werden kann (z. B. "apachectl restart"). <p class="line867"><strong>Vorgehensweisen zum Protokollwechsel</strong> <p class="line874">Dank der Protokoll-Tracking-Technologie in Urchin muss der Protokollwechsel nicht mehr ausgeführt werden, um eine doppelte Verarbeitung von Protokollen zu verhindern. Urchin ist dadurch bei der Verarbeitung von Protokollen flexibler. Beispielsweise ist nun die Verarbeitung "aktiver" Protokolle möglich, in die noch vom Webserver geschrieben wird, oder von Protokollen, die manuell oder in unregelmäßigen Abständen gewechselt werden. <p class="line867"><strong>Wichtiger Hinweis:</strong> Im Unterschied zu einigen früheren Versionen von Urchin bietet Urchin 6 keine Hooks zum Aufrufen einer Protokollwechselprozedur oder Neustarten eines Webservers nach der Ausführung von Protokollwechselaufgaben. Es sind jedoch bestimmte Aktionen zur nachträglichen Verarbeitung möglich, die unten beschrieben werden. <p class="line874">Zum Betrieb von Urchin 6 ist es zwar nicht erforderlich, dass Webserver-Protokolle regelmäßig oder überhaupt gewechselt werden müssen, jedoch ist ein Standardschema für den Protokollwechsel empfehlenswert. Dadurch wird ein reibungsloser Betrieb gewährleistet und sichergestellt, dass das Protokoll-Tracking-Dienstprogramm nicht zu viele unnötige Verarbeitungen ausführt. Was System und Anwendungen anbelangt, ist die Verwaltung mehrerer kleiner Protokolle anstelle eines sehr großen Protokolls wesentlich effizienter, denn je größer eine Datei wird, umso langsamer werden die Dateivorgänge. Kleinere Dateien können bei einem Festplatten- oder anderen Systemfehler auch leichter gesichert und wiederhergestellt werden. <p class="line874">Mechanismen für den Protokollwechsel müssen nicht allzu komplex sein. Auf UNIX-basierten Systemen z. B. reicht in den meisten Fällen ein einfaches Shell- oder Perl-Skript aus, das täglich von "cron" ausgeführt wird. Das Skript muss nur das vorhandene Webserver-Protokoll wechseln und mit einem Zeitstempel versehen (%Y%m%d- oder JJJJMMTT-Formate werden empfohlen) und anschließend den Webserver neu starten. Mit zusätzlicher Logik können alte Protokolldateien gelöscht werden, um Festplattenspeicher zu sparen.  <p class="line867"><strong>Konfigurieren von Urchin für den Protokollwechsel</strong> <p class="line862">Sobald Sie ein Protokollwechselschema eingerichtet haben, ist es ganz einfach, Urchin für die Verarbeitung Ihres Wechselprotokolls zu konfigurieren. Sie können beim Konfigurieren einer Protokollquelle die Beschreibung des Protokolldateipfads zur Verwendung eines Platzhalters einrichten, der dem mit Zeitstempel versehenen Protokolldateimuster entspricht (z. B. "access-log.*" für Apache-Protokolle oder "ex*.log" für IIS-Protokolle) oder Sie können die integrierte Musterübereinstimmung von Urchin für den Zeitstempel verwenden (z. B. "access-log.%Y%m%d" für Apache oder "ex%y%m%d.log" für IIS). In diesem Muster wird dann von Urchin "%Y%m%d" durch das gestrige Datum ersetzt und das Protokoll wird mit dem resultierenden Dateinamen verarbeitet (z. B. "access-log.20020617"). Weitere Informationen zur Musterübereinstimmung bei Datumsangaben erhalten Sie unter Ersetzen des Datum-/Uhrzeit-Platzhalters im Protokollpfad. <p class="line874">Die Platzhalterbeschreibung bietet den Vorteil, dass Sie mehrere nicht verarbeitete Protokolle in einem einzigen Verzeichnis speichern und beim nächsten Ausführen von Urchin verarbeiten lassen können. Dies ist besonders in Situationen praktisch, in denen die Protokolldateien beim Ausführen von Urchin nicht wie erwartet bereit stehen, z. B. beim Ausfall eines Remote-Webservers oder Verlust der Netzwerkverbindung. Der Nachteil ist, dass Urchin das Verzeichnis öffnen und jede Protokolldatei suchen muss, um festzustellen, ob bereits eine Verarbeitung stattgefunden hat. Das kann zu einer erheblichen Auslastung führen, wenn das Verzeichnis viele Protokolldateien enthält. Die Musterübereinstimmung nach dem JJJJMMTT-Schema ist eine effizientere Methode, wenn Sie Ihr Protokollwechselschema als zuverlässig erachten. <p class="line862">Sie können auch festlegen, dass Urchin 6 das Protokoll nach der Verarbeitung löscht oder archiviert/komprimiert. In den erweiterten Einstellungen einer Protokollquelle können verschiedene Optionen für das Protokollziel festgelegt werden. Weitere Informationen zu diesen Einstellungen für das Protokollziel erhalten Sie unter Protokollmanagement. <p class="line867"><strong>Wichtig!</strong> Verwenden Sie bei aktiven Protokollen, die nicht gewechselt worden sind, keine Optionen für das Protokollziel. <p class="line867"><strong>Konfigurieren des Protokollwechsels auf UNIX-basierten Systemen</strong> <p class="line874">Aufgrund der Vielzahl unterschiedlicher Betriebssystemfunktionen und Webserverkonfigurationen und der hohen Wahrscheinlichkeit, dass Protokollwechselverfahren extrem von der jeweiligen Website abhängen, gibt es kein Patentrezept für das Einrichten des Protokollwechsels auf UNIX-basierten Systemen.  <p class="line867"><strong>Konfigurieren des Protokollwechsels für Windows IIS Webserver</strong> <p class="line874">Wie oben erwähnt, lassen die Verwaltungsfunktionen von IIS einen automatischen Protokollwechsel von Webserver-Protokollen zu. Allerdings ist diese Funktion nicht standardmäßig aktiviert. Führen Sie zum Konfigurieren eines IIS-Webservers für einen ordnungsgemäßen Protokollwechsel bitte die unten stehenden Schritte aus. Es wird empfohlen, die Protokolle täglich zu wechseln und den Protokollwechsel unter Berücksichtigung der Ortszeit festzulegen. Protokolle werden in IIS standardmäßig um Mitternacht MGZ und nicht nach der Ortszeit gewechselt. <p class="line874">Stellen Sie bei Windows 2000 sicher, dass der IIS-Webserver ordnungsgemäß für den Protokollwechsel konfiguriert ist. Verwenden Sie dazu die Funktion "Computerverwaltung" von Windows 2000. Bei Windows NT, Windows XP und Windows 2003 ähnelt sich das Verfahren. Führen Sie die folgenden Aktionen aus, um das Fenster "Computerverwaltung" zu öffnen und den Protokollwechsel einzurichten: <ul><li><p class="line862">Klicken Sie auf "Start" -&gt; "Einstellungen" -&gt; "Systemsteuerung". </li><li>Doppelklicken Sie auf "Verwaltung". </li><li>Doppelklicken Sie auf "Computerverwaltung". </li><li>Doppelklicken Sie auf "Internetinformationsdienste" </li><li>Klicken Sie mit der rechten Maustaste auf "Standardwebsite" und wählen Sie "Eigenschaften". </li><li>Wählen Sie im Pop-up-Fenster die Registerkarte "Website". </li><li>Klicken Sie unten im Fenster auf die Schaltfläche "Eigenschaften". </li><li>Aktivieren Sie unter "Neuer Protokollzeitraum" das Optionsfeld "Täglich". </li><li>Aktivieren Sie das Kontrollkästchen "Lokale Zeit für Dateibenennung und Rollover verwenden". </li></ul><p class="line874">Damit wird sichergestellt, dass die Webserver-Protokolle sofort nach Mitternacht von IIS gewechselt werden. </div><div id="pagebottom"></div>
</div>


<div id="footer" style="clear: both; margin: 0; padding: 0; border-bottom:1px solid #CCC;"></div><div id="copyright" style="font-size: 70%; text-align: center;">&copy;2010 Google</div>
</body></html>