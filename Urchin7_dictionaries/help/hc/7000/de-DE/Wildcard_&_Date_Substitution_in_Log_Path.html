<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body><table id="top_location_line" width="100%"><table id="top_location_line" width="100%"><tr width="100%"><td><a href="http://www.urchin.com"><img border="0" src="../images/google_sm.gif" width="135" height="41"></a></td><td width="100%"><span id="top_line" style="width: 100%; float: left; clear: both; border-bottom: 1px solid #CCC;"><span id="top_title" style="float: left; margin-top: 10px;"><b>Help Center</b></span></td></tr></table>
<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en">
<p class="line867"><strong>Ersetzen des Datum-/Uhrzeit-Platzhalters im Protokollpfad</strong> <p class="line867"><strong>Übersicht</strong> <p class="line874">In Urchin können Sie Platzhalter und Variablen für den Abgleich von Datumsangaben im Pfad zu einer Protokolldatei angeben. Wenn eine Urchin-Aufgabe ausgeführt und der Protokollpfad gelesen wird, werden diese Variablen konvertiert und auf Übereinstimmungen mit den Verzeichnissen und Dateinamen auf Ihrem System verglichen. <p class="line874">Die Funktionen für den Abgleich von Datumsangaben sind in Urchin 6 umfassender als in früheren Versionen von Urchin: <ul><li>Das Datum kann an beliebiger Stelle im Pfadnamen der Protokolldatei ersetzt werden. In früheren Versionen von Urchin war das Ersetzen des Datums nur in der tatsächlichen Beschreibung des Dateinamens möglich. </li><li>Ein stabilerer und flexiblerer Algorithmus zur Musterübereinstimmung bei Datumsangaben ist implementiert worden. Die frühere TTMMJJJJ-Musterübereinstimmung wird jedoch für die Kompatibilität mit Vorgängerversionen noch immer unterstützt. </li></ul><p class="line874">Im Folgenden werden die am häufigsten verwendeten Variablen und Formate zum Abgleich von Zeitangaben aufgeführt. Eine vollständige Liste aller unterstützten Variablen zur Formatierung von Zeitangaben wird am Ende dieses Artikels aufgeführt. <p class="line874">* Ein Sternchen stimmt mit null oder weiteren folgenden Zeichen überein. TT wird durch zwei Ziffern für einen Tag im Monat ersetzt, z. B. 31.01. %d entspricht TT. MM wird durch zwei Ziffern für einen Monat ersetzt, z. B. 01.12. %m entspricht MM JJ wird durch zwei Ziffern für ein Jahr ersetzt, z. B. 01-99. JJJJ wird durch vier Ziffern für ein Jahr ersetzt, z. B. 0001-2003. %Y entspricht JJJJ. <p class="line874">Beachten Sie, dass sich das Sternchen in diesem Kontext wie bei einem Abgleich von Dateinamen in einer Befehls-Shell in UNIX oder DOS verhält und nicht wie bei einem Abgleich eines regulären Ausdrucks, in dem das Zeichen mit null oder mehr Instanzen des vorhergehenden Zeichens übereinstimmen würde. Diese Variablen können in jeder vom Nutzer gewünschten Form kombiniert werden. <p class="line874">Die folgende Liste enthält Beispiele dazu, wie diese Variablen für das Datum 13.08.2003 umgewandelt werden. Beachten Sie dabei, dass die Tagesvariablen TT und %d in den Tag vor dem 13. konvertiert werden. <ul><li>TTMMJJJJ wird in 12082003 umgewandelt. </li><li>%d.%m.%Y wird in 12.08.2003 umgewandelt. </li><li>%Y/%m/%d wird in 2003/08/12 umgewandelt (das hat Folgen in einem Pfad). </li><li>*TTMMJJJJ stimmt mit jedem Dateinamen überein, der mit der Zeichenfolge "12082003" endet.  </li></ul><p class="line874">Tagesvariablen TT und %d werden standardmäßig in den vorherigen Tag konvertiert. Das liegt an der Methode, nach der Webserver-Protokolle und die Urchin-Verarbeitung verwaltet werden. Ihre Protokolle werden normalerweise täglich gewechselt, damit sie nicht zu groß werden und jedes Protokoll hauptsächlich Daten eines einzigen Tages enthält. Dieser Wechsel findet meist kurz vor Mitternacht statt. Die Urchin-Verarbeitung erfolgt dann anschließend, nach Mitternacht, wenn der nächste Tag des Monats begonnen hat. Hätten Sie Ihrem Protokolldateinamen einen TTMMJJJJ-Monatsstempel für den Wechsel hinzugefügt, würden folglich dieses Datum und die Laufzeit von Urchin um einen Tag abweichen. Eine Auswertung der Datumskonvertierung nach der Zeit, in der Urchin ausgeführt wird, gäbe dann einen Fehler zurück. Denn der richtige Protokollname könnte nicht gefunden werden, da der Zeitstempel des Protokolls 12082003 lauten würde, während Urchin unter 13082003 ausgeführt wurde. <p class="line874">Dies ist zwar das häufigste Modell für den Protokollwechsel, jedoch nicht die einzige Möglichkeit. Deshalb verfügt Urchin über einen Konfigurationsparameter, der steuert, wie diese Variablen in einen bestimmten Tag aufgelöst werden. Durch das Ersetzen von Datum und Uhrzeit in der Einstellung des Protokollpfadnamens kann ein Zeitversatz angepasst werden, mit dem die Auswertung von TT und %d gesteuert wird. Diese Einstellung wird am Ende dieses Artikels genauer erklärt. <p class="line874">Die Jahres-, Monats- und Tagesvariablen können im Namen der Protokolldatei oder im Verzeichnispfad zu der Protokolldatei verwendet werden. Die Verwendung des Sternchens ist nur in dem Teil des Protokolldateipfads möglich, der sich auf den Dateinamen bezieht. Zeitformatvariablen können in einem Protokolldateipfad auch wiederholt werden, das Sternchen darf jedoch nur einmal vorkommen. Dies wird mit den Beispielen im Abschnitt "Vorgehensweise" näher erläutert. <p class="line867"><strong>Vorgehensweise</strong> <p class="line874">Verwenden Sie beim Erstellen einer Protokollquelle möglichst die Zeitvariablen im Pfad, die Sie auch auf der Registerkarte "Protokolleinstellungen" im Feld "Protokolldateipfad" verwendet haben. Beispiel: Nach einem typischen Schema für einen täglichen Protokollwechsel bei einem Apache-Webserver wird ein Datumsstempel erstellt, der das Datum der Protokolleinträge angibt. Dabei archiviert der Protokollwechselmechanismus beispielsweise am 16.07.2002 (07/16/2002) eine Minute nach Mitternacht das Protokoll <pre>/var/log/httpd/access.log
</pre><p class="line874">und speichert es als <pre>/var/log/httpd/access.log.20020715
</pre><p class="line874">Zum Abgleich dieses Musters in der Protokollquelle für ein Urchin-Profil würden Sie ganz einfach <pre>/var/log/httpd/access.log.YYYYMMDD
</pre><p class="line874">in der Protokolldatei angeben. Urchin sucht dann automatisch beim Ausführen dieses Tages nach dem Protokoll des vorherigen Tages. Weiteres Beispiel: Ist der IIS-Webserver von Microsoft so konfiguriert, dass Protokolle täglich gewechselt werden, wird die Protokolldatei benannt und das aktuelle Datum als Teil des Dateinamens eingeschlossen, z. B. "ex021127.log". Deshalb würden Sie zur Verarbeitung eines täglichen IIS-Protokolls eine Protokolldateibeschreibung nach dem Schema <pre>C:\WINNT\System32\LogFiles\W3SVC1\exYYMMDD.log
</pre><p class="line874">im Feld "Protokolldateipfad" der Protokollquelle für das Profil verwenden. <p class="line874">Soll Urchin Protokolle verarbeiten, die häufiger als täglich gewechselt werden, können Sie eine Kombination aus der TTMMJJJJ-Syntax und Platzhaltern verwenden, um alle am vorherigen Tag erstellten Protokolldateien abzugleichen. Zu diesem Zweck müssen Sie sicherstellen, dass die gewechselte Protokolldatei einheitlich benannt wird, z. B. indem an den Dateinamen eine Stundenangabe angehängt wird. In der Beschreibung des Protokolldateipfads verwenden Sie dann das Muster <pre>/var/log/httpd/access.log.YYYYMMDD*
</pre><p class="line874">oder <pre>C:\WINNT\System32\LogFiles\W3SVC1\exYYMMDD*.log
</pre><p class="line874">Bei einer komplexeren Verwendung werden Protokolle in Verzeichnissen gespeichert, deren Name Jahr, Monat und Tag wiedergeben. Angenommen, Sie verwenden die folgenden Verzeichnispfade zum Speichern von Protokollen: <pre>/logs/2003/07
/logs/2003/08
/logs/2003/09
</pre><p class="line874">Dabei speichern Sie alle Protokolle für einen bestimmen Monat im jeweiligen Verzeichnis und darin wird jedem Protokoll der Tag angefügt (z. B. "access.log.01", "access.log.02"). Damit Urchin nun erkennen kann, welche Protokolle zu verarbeiten sind, können Sie eines der folgenden Protokollpfadformate verwenden: <pre>/logs/YYYY/MM/access.log.DD
/logs/%Y/%M/access.log.%d
</pre><p class="line874">Zum Zeitpunkt der Verarbeitung werden dann alle Protokolle von Urchin verarbeitet, die mit dem Muster des gestrigen Datums übereinstimmen und ein beliebiges Suffix aufweisen. Wie immer bei der Verwendung von Platzhaltern in Feldbeschreibungen des Protokolldateipfads ist es wichtig, dass das Protokoll-Tracking für das Profil aktiviert ist. Damit wird sichergestellt, dass Protokolle nicht erneut von Urchin verarbeitet werden. <p class="line867"><strong>Hinweise</strong> <p class="line874">Urchin subtrahiert basierend auf der Ortszeit 24 Stunden von der aktuellen Zeit, um das Datum für das Ersetzungsmuster zu bestimmen. Monats- und Jahresübergänge werden ordnungsgemäß verarbeitet. Sie können dieses Verhalten jedoch auf der Registerkarte "Erweiterte Einstellungen" einer Protokollquelle mit der Einstellung zum Ersetzen des Datum-/Uhrzeit-Platzhalters im Protokollpfad ändern. Sie können die Ortszeit oder die GMT-Zeit als Basis für die Zeitanpassungen auswählen und dann im Bearbeitungsfeld "Stunden" einen Plus- oder Minus-Zeitversatz in Stunden angeben. <p class="line867"><strong>Liste der Datums- und Zeitformate</strong> <p class="line874">Die folgende Liste enthält alle von der strftime()-Routine der Standard C Library unterstützten Zeitformatvariablen: <ul><li>%A = landesspezifische Darstellung des ausgeschriebenen Wochentags. </li><li>%a = landesspezifische Darstellung des abgekürzten Wochentags. </li><li>%B = landesspezifische Darstellung des ausgeschriebenen Monats. </li><li>%b = landesspezifische Darstellung des abgekürzten Monats. </li><li>%d = Tag des Monats als Dezimalzahl (01-31). </li><li>%e = Tag des Monats als Dezimalzahl (1-31); einstelligen Zahlen wird eine Leerstelle vorangestellt. </li><li>%H = Stunde im 24-Stunden-Format als Dezimalzahl (00-23). </li><li>%I = Stunde im 12-Stunden-Format als Dezimalzahl (01-12). </li><li>%j = Tag des Jahres als Dezimalzahl (001-366). </li><li>%k = Stunde im 24-Stunden-Format als Dezimalzahl (0-23); einstelligen Zahlen wird eine Leerstelle vorangestellt. </li><li>%l = Stunde im 12-Stunden-Format als Dezimalzahl (1-12); einstelligen Zahlen wird eine Leerstelle vorangestellt. </li><li>%M = Minute als Dezimalzahl (00-59). </li><li>%m = Monat als Dezimalzahl (01-12). </li><li>%p = landesspezifische Darstellung von "ante meridiem" bzw. "post meridiem". </li><li>%S = Sekunde als Dezimalzahl (00-60). </li><li>%s = Anzahl der Sekunden seit Epoch, UTC (siehe mktime(3)). </li><li>%w = Wochentag (Sonntag als erster Tag der Woche) als Dezimalzahl (0-6). </li><li>%Y = vollständige vierstellige Jahreszahl. </li><li>%y = gekürzte zweistellige Jahreszahl (00-99). </li><li>%z = Zeitversatz der Zeitzone zu UTC; ein führendes Pluszeichen bedeutet östlich von UTC, ein Minuszeichen westlich von UTC, Stunden und Minuten folgen mit jeweils zwei Ziffern ohne Trennzeichen (übliche Form bei RFC 822-Datumskopfzeilen). </li><li>%% = `%'. (Wenn ein tatsächliches Prozentzeichen in einem Datums-/Uhrzeiteintrag erforderlich ist.)  </li></ul></div><div id="pagebottom"></div>
</div>


<div id="footer" style="clear: both; margin: 0; padding: 0; border-bottom:1px solid #CCC;"></div><div id="copyright" style="font-size: 70%; text-align: center;">&copy;2010 Google</div>
</body></html>