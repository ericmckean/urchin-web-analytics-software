<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body><table id="top_location_line" width="100%"><table id="top_location_line" width="100%"><tr width="100%"><td><a href="http://www.urchin.com"><img border="0" src="../images/google_sm.gif" width="135" height="41"></a></td><td width="100%"><span id="top_line" style="width: 100%; float: left; clear: both; border-bottom: 1px solid #CCC;"><span id="top_title" style="float: left; margin-top: 10px;"><b>Help Center</b></span></td></tr></table>
<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en">
<p class="line867"><strong>Wie behandle ich den Fehler "(7054-323-317) Unable to restore databases since backup does not exist"?</strong> <p class="line867"><strong>Beschreibung des Problems</strong> <p class="line874">Beim Ausführen eines Urchin-Profils werden folgende Meldungen angezeigt: <p class="line874">(7050-323-317) Starting automatic rollback + <p class="line874">(7054-323 317) Unable to restore databases since backup does not exist. <p class="line867"><strong>Ursache</strong> <p class="line874">Dieser Fehler tritt möglicherweise auf, wenn ein zuvor ausgeführtes Urchin-Profil ungewöhnlich beendet wurde. Mögliche Gründe: Der Prozess/die Aufgabe des "Protokollverarbeitungsmoduls" wurde manuell vom Systemadministrator beendet, z. B. über die Befehlszeilenschnittstelle der Konsole; ein anderer unerwarteter Fehler trat auf, der eine laufende Prozessverarbeitung beendete; oder der Prozess wurde bei einem Neustart des Systems nicht ordnungsgemäß abgeschlossen. <p class="line874">In der Regel kann Urchin nach einem ungewöhnlichen Beenden ordnungsgemäß wiederhergestellt werden, indem ein Rollback auf den zuletzt bekannten fehlerfreien Zustand des Profils erfolgt. Wurde die Profilverarbeitung jedoch beim ersten Ausführen eines Profils oder beim ersten Ausführen seit einem Monat beendet, gibt es keine Backup-Datei für einen Rollback. Dann wird von Urchin der Fehler "Unable to restore databases" ausgegeben. <p class="line874">Technisch gesehen erstellt das Protokollverarbeitungsmodul von Urchin im Berichtverzeichnis für das aktuell verarbeitete Profil eine Datei "lock.udb". Diese Datei bleibt während der Verarbeitung gesperrt, damit immer nur eine Instanz des Protokollverarbeitungsmoduls für das Profil ausgeführt werden kann. Beim Programmstart überprüft das Protokollverarbeitungsmodul, ob die Datei "lock.udb" vorhanden ist. Wenn ja, sucht das Protokollverarbeitungsmodul nach aktuellen Sperrungen. Wird die Datei nicht gefunden, trat beim vorherigen Ausführen des Profils ein Fehler auf. Deshalb wird vom Protokollverarbeitungsmodul ein Rollback der Profildatenbanken auf den zuletzt bekannten fehlerfreien Zustand versucht, bevor die Verarbeitung fortgesetzt wird. Wie oben erwähnt, werden bei einem Fehlen des Rollback-Archivs die Rollback-Fehlermeldungen angezeigt und die Protokollverarbeitung wird beendet. <p class="line867"><strong>Problembehebung</strong> <p class="line874">Da Urchin beim vorherigen Ausführen ungewöhnlich beendet wurde, befinden sich die Urchin-Datenbanken für den Monat der Verarbeitung in einem unbekannten Zustand. Außerdem wurden für die enthaltenen Daten keine ordnungsgemäßen Prüfpunkte erstellt. Deshalb müssen die Daten für den gesamten Verarbeitungsmonat entfernt werden. Meist bestehen die einzigen Urchin-Daten für den Monat aus denen, die während der fehlerhaften Verarbeitung erstellt wurden. Somit gibt es ohnehin keine verwertbaren Daten. <p class="line874">Verwenden Sie bitte das folgende Verfahren zum Wiederherstellen der Urchin-Profildaten, sodass Sie das Profil wieder ausführen können: <p class="line867"><span class="u">Windows Systems</span> <ol type="1"><li><p class="line862">Starten Sie eine DOS Shell ("Starten" -&gt; "Ausführen" -&gt; "cmd"). </li><li>Ändern Sie das Verzeichnis in den Ordner, in dem die Urchin-Profildaten gespeichert sind, z. B. <ul><li style="list-style-type:none">"C:\Program Files\Urchin\data\reports\profilename". </li></ul></li><li>Zeigen Sie den Inhalt der Datei lock.udb mit dem Befehl "TYPE lock.udb" an. Die Datei sollte mindestens eine Zeile mit YYYYMM-Datumseinträgen enthalten, z. B. 200408. </li><li>Führen Sie für jede YYYYMM-Zeile in der Datei lock.udb die folgenden Schritte aus: <ul><li>Entfernen Sie die entsprechenden monatlichen Urchin-Datenbanken mit dem Befehl "DEL YYYYMM-*data*". </li><li>Überprüfen Sie mit dem Befehl "DIR YYYYMM*backup*.zip", ob ein Backup-Archiv für den entsprechenden Monat vorhanden ist. Für die Backup-Archive wird die folgende Namenskonvention verwendet: YYYYMM-backup-YYYYMMDDHHMMSS.zip (z. B. 200805-backup-20080331103340.zip). </li><li>Sind für einen Monat mehrere Backup-Dateien vorhanden, stellen Sie die Daten aus dem Backup-Archiv mit dem aktuellsten Zeitstempel wieder her. Verwenden Sie dazu den Befehl "..\..\..\util\unzip -o -u backupfile.zip", z. B. "..\..\..\util\unzip -o -u 200805-backup-20080331103340.zip". </li></ul></li><li>Entfernen Sie die Datei "lock.udb" mit dem Befehl "DEL lock.udb". </li><li>Sie können das Profil nun mit der Schaltfläche "Jetzt ausführen" erneut ausführen. </li></ol><p class="line867"><span class="u">UNIX-basierte Systeme</span> <ol type="1"><li>Starten Sie eine Befehls-Shell als Root-Nutzer oder als Nutzer, der Urchin ausführt. </li><li>Ändern Sie das Verzeichnis in den Speicherort, in dem die Urchin-Profildaten gespeichert sind, z. B. <ul><li style="list-style-type:none">"cd /usr/local/urchin/data/reports/profilename". </li></ul></li><li>Zeigen Sie den Inhalt der Datei "lock.udb" mit dem Befehl "cat lock.udb" an. Die Datei sollte mindestens eine Zeile mit YYYYMM-Datumseinträgen enthalten, z. B. 200803. </li><li>Führen Sie für jede YYYYMM-Zeile in der Datei "lock.udb" die folgenden Schritte aus: <ul><li>Entfernen Sie die entsprechenden monatlichen Urchin-Datenbanken mit dem Befehl "rm YYYYMM-*data*". </li><li>Überprüfen Sie, ob ein Backup-Archiv für den entsprechenden Monat vorhanden ist. Verwenden Sie dazu den Befehl <ul><li style="list-style-type:none">"ls YYYYMM*backup*.zip". Für die Backup-Archive wird die folgende Namenskonvention verwendet: YYYYMM-backup-YYYYMMDDHHMMSS.zip (z. B. 200803-backup-20080331103340.zip). </li></ul></li><li>Sind für einen Monat mehrere Backup-Dateien vorhanden, stellen Sie die Daten aus dem Backup-Archiv mit dem aktuellsten Zeitstempel wieder her. Verwenden Sie dazu den Befehl "../../../util/unzip -o -u backupfile.zip", z. B. "../../../util/unzip -o -u 200803-backup-20080331103340.zip". </li></ul></li><li>Entfernen Sie die Datei "lock.udb" mit dem Befehl "rm lock.udb". </li><li>Sie können das Profil nun mit der Schaltfläche "Jetzt ausführen" erneut ausführen. </li></ol></div><div id="pagebottom"></div>
</div>


<div id="footer" style="clear: both; margin: 0; padding: 0; border-bottom:1px solid #CCC;"></div><div id="copyright" style="font-size: 70%; text-align: center;">&copy;2010 Google</div>
</body></html>