<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body><table id="top_location_line" width="100%"><table id="top_location_line" width="100%"><tr width="100%"><td><a href="http://www.urchin.com"><img border="0" src="../images/google_sm.gif" width="135" height="41"></a></td><td width="100%"><span id="top_line" style="width: 100%; float: left; clear: both; border-bottom: 1px solid #CCC;"><span id="top_title" style="float: left; margin-top: 10px;"><b>Help Center</b></span></td></tr></table>
<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en">
<p class="line867"><strong>Protokollierung - Apache und IIS</strong> <p class="line867"><strong>Übersicht</strong> <p class="line874">Die Protokollierung für Webserver muss unbedingt in einem Format eingerichtet werden, welches Urchin eine ordnungsgemäße Interpretation der Daten und das Erstellen detaillierter Berichte ermöglicht. In diesem Artikel wird das entsprechende Verfahren für die am häufigsten verwendeten Webserver, Apache und Microsoft IIS, erläutert. Für eine maximale Genauigkeit der Berichte ist das Aktivieren von Verweis- und User-Agent-Informationen für die Protokollierung entscheidend. Außerdem muss das Protokollieren von Cookies aktiviert werden, wenn das Urchin Tracking-Modul (UTM) für das Erstellen von Berichten zu eindeutigen Besuchern verwendet wird. Nur mit dem UTM-Tracking können zuverlässige Berichte zu eindeutigen Besuchern erstellt werden. Es ist zwar nicht erforderlich, jedoch empfehlenswert, vor einem Wechsel der Protokollierung für Webserver festzulegen, ob UTM verwendet werden soll. Wenn ja, sollten Sie Cookies in Ihren Protokollen sofort aktivieren. Das Aktivieren der Cookies ist kein Problem, installieren Sie UTM jedoch noch nicht sofort auf Ihrer Website. Lesen Sie zuerst den Abschnitt zum Besucher-Tracking und machen Sie sich mit der Installation von UTM vertraut, bevor Sie fortfahren. <p class="line867"><strong>Konfiguration</strong> <p class="line867"><strong>Apache</strong> <p class="line874">In Apache werden Protokolle standardmäßig im allgemeinen Protokollformat erstellt. Protokolle können jedoch auch in einem detaillierteren Format erstellt werden, und zwar im Format "NCSA Extended Combined" (erweiterte und kombinierte Protokollierung). Urchin benötigt für eine optimale Berichterstellung eine Variation des Formats "NCSA Extended Combined". Gehen Sie wie folgt vor, um Apache für die Verwendung des richtigen Formats zu konfigurieren: <p class="line874">1. Erstellen Sie eine Sicherungskopie Ihrer Datei "httpd.conf". Öffnen Sie dann die ursprüngliche Datei "httpd.conf" in einem Texteditor. <p class="line862">2. Suchen Sie den Abschnitt, dessen Zeilen mit dem Wort "LogFormat" beginnen. <p class="line862">3. Fügen Sie eine neue LogFormat-Zeile ein. Verwenden Sie dazu je nachdem, ob Sie UTM verwenden, eine der unten dargestellten Eingaben. Der LogFormat-Eintrag muss der Konfigurationsdatei als einzelne Zeile hinzugefügt werden, ohne Wagenrücklauf oder Zeilenumbruch. Achten Sie auf die richtige Eingabe aller Zeichen. <p class="line867"><strong>Bei Websites ohne Verwendung von UTM:</strong> <p class="line867"><tt>LogFormat&nbsp;"%h&nbsp;%v&nbsp;%u&nbsp;%t&nbsp;\"%r\"&nbsp;%&gt;s&nbsp;%b&nbsp;\"%{Referer}i\"&nbsp;\"%{User-Agent}i\""&nbsp;urchin</tt> <p class="line867"><strong>Bei Websites mit UTM-Aktivierung:</strong> <p class="line867"><tt>LogFormat&nbsp;"%h&nbsp;%v&nbsp;%u&nbsp;%t&nbsp;\"%r\"&nbsp;%&gt;s&nbsp;%b&nbsp;\"%{Referer}i\"&nbsp;\"%{User-Agent}i\"&nbsp;\"%{Cookie}i\""&nbsp;urchin</tt> <p class="line862">4. Das Wort "urchin" am Ende der LogFormat-Zeile ist ein Alias. Es wird an anderer Stelle Ihrer "httpd.conf" verwendet, um dieses Format auf eine Protokolldatei anzuwenden. Sie können dafür eine beliebige Zeichenfolge eingeben. Durch die Eingabe von "urchin" kann deutlich gemacht werden, dass dieser Eintrag zur Verarbeitung von Urchin erstellt wurde. <p class="line862">5. Überprüfen Sie den &lt;VirtualHost&gt;-Eintrag, für den Sie dieses neue Protokollformat aktivieren möchten. Deaktivieren Sie vorhandene TransferLog- oder CustomLog-Einträge in einer &lt;VirtualHost&gt;&lt;/VirtualHost&gt;-Gruppe, indem Sie das Zeichen "#" davor einfügen (z. B. "TransferLog" wird "#TransferLog"). Fügen Sie dann den folgenden neuen CustomLog-Eintrag ein und ersetzen Sie die Zeichenfolge "path_to_log" durch den entsprechenden Pfad zum Speicherort Ihres Protokolls: <p class="line867"><tt>CustomLog&nbsp;path_to_log/access.log&nbsp;urchin</tt> <p class="line862">Wenn Sie zuvor einen anderen Kennzeichner als "urchin" als Alias für Ihren LogFormat-Eintrag gewählt haben, verwenden Sie dieses Alias im CustomLog-Eintrag anstelle von "urchin". <p class="line874">6. Speichern Sie die Bearbeitung Ihrer Datei "httpd.conf". <p class="line862">7. <strong>WICHTIG!</strong> Überprüfen Sie die Syntax Ihrer neuen Datei "httpd.conf", indem Sie den folgenden Befehl ausführen: <p class="line867"><tt>apachectl&nbsp;configtest</tt> <p class="line874">Die Antwort "syntax ok" sollte angezeigt werden. Sollte dies nicht der Fall sein, doppelklicken Sie auf die Datei "httpd.conf" und beheben Sie die Fehler. Fahren Sie mit diesem Verfahren nicht fort, solange Sie die richtige Antwort nicht erhalten haben. Erstellen Sie stattdessen eine Kopie Ihrer bearbeiteten Datei. Stellen Sie dann das Original wieder her, indem Sie diese Version mit der Kopie der Datei "httpd.conf" überschreiben, die Sie am Anfang dieses Verfahrens erstellt haben. Dadurch stellen Sie sicher, dass Ihr Webserver weiterhin ordnungsgemäß funktioniert, während Sie nach den Fehlern in den Änderungen suchen. <p class="line874">8. Starten Sie Apache neu, sobald die richtige Syntax Ihrer Datei "httpd.conf" bestätigt wurde. Das Aufrufen des Skripts "apachectl", das normalerweise mit Apache installiert wird, ist hierfür die bevorzugte Methode. <p class="line867"><tt>apachectl&nbsp;restart</tt> <p class="line862">9. Überprüfen Sie die Protokollierung. Öffnen Sie einen Browser und greifen Sie einige Male auf die betreffende Website zu. Überprüfen Sie dann die letzten Zeilen der in Ihrem CustomLog-Eintrag angegebenen Protokolldatei. Einige aktuelle Treffer sollten in das Protokoll geschrieben worden sein. <p class="line874">Beim für Urchin geänderten Protokollformat "Extended Combined" ähnelt die Protokollzeile der folgenden Zeile: <p class="line867"><tt class="backtick">64.40.51.27</tt> <tt class="backtick">www.urchin.com</tt> <tt class="backtick">-</tt> <tt class="backtick">[28/Aug/2002:15:11:01</tt> <tt class="backtick">-0700]</tt> <tt class="backtick">"GET</tt> <tt class="backtick">/images/urchin_header_logo.gif</tt> <tt class="backtick">HTTP/1.1"</tt> <tt class="backtick">200</tt> <tt class="backtick">3017</tt> <tt class="backtick">"http://www.urchin.com/"</tt> <tt class="backtick">"Mozilla/4.0</tt> <tt class="backtick">(compatible;</tt> <tt class="backtick">MSIE</tt> <tt class="backtick">6.0;</tt> <tt class="backtick">Windows</tt> <tt class="backtick">NT</tt> <tt class="backtick">5.0)"</tt> <p class="line874">Wenn Sie UTM auf Ihrer Website konfiguriert und die Protokollierung von Cookies aktiviert haben, ähnelt die Protokollzeile der folgenden Zeile: <p class="line867"><tt class="backtick">64.40.51.27</tt> <tt class="backtick">www.urchin.com</tt> <tt class="backtick">-</tt> <tt class="backtick">[28/Aug/2002:15:11:01</tt> <tt class="backtick">-0700]</tt> <tt class="backtick">"GET</tt> <tt class="backtick">/images/urchin_header_logo.gif</tt> <tt class="backtick">HTTP/1.1"</tt> <tt class="backtick">200</tt> <tt class="backtick">3017</tt> <tt class="backtick">"http://www.urchin.com/"</tt> <tt class="backtick">"Mozilla/4.0</tt> <tt class="backtick">compatible;</tt> <tt class="backtick">MSIE</tt> <tt class="backtick">6.0;</tt> <tt class="backtick">Windows</tt> <tt class="backtick">NT</tt> <tt class="backtick">5.0)"</tt> <tt class="backtick">"__utma=171060324.1378004559.1063331913.1063334677.1063521838.3;</tt> <tt class="backtick">__utmb=171060324;</tt> <tt class="backtick">__utmc=171060324"</tt> <p class="line874">10. Am Ende der Zeile sehen Sie zusätzliche UTM-Cookie-Informationen. <p class="line867"><strong>Microsoft Internet Information Server (IIS)</strong> <p class="line874">Hinweis: Microsoft IIS verwendet das W3C-Protokollformat. <p class="line874">Urchin kann grundlegende Berichte erstellen, wenn Ihre IIS-Protokolldateien mindestens folgende Felder enthalten: <ul><li>Datum </li><li>Uhrzeit </li><li>C-IP </li><li>CS-URI-Stamm </li><li>SC-Status </li><li>SC-Byte </li></ul><p class="line874">Diese Felder sind erforderlich. Ohne diese Felder werden keine sinnvollen Berichte erstellt. Diese minimale Protokollierung liefert jedoch nicht genügend Informationen für Verweis- und Browser-Berichte. Deshalb empfiehlt sich das Festlegen detaillierterer Protokolleigenschaften für den IIS-Server. <p class="line874">IIS-Protokolleigenschaften werden entweder gesondert für jede Domain auf dem Server oder global festgelegt. Bei Servern mit vielen Domains, ist die globale Option empfehlenswert. Mit den folgenden Schritten können Sie sicherstellen, dass die erforderlichen Protokolldateifelder aufgezeichnet werden. Fall Sie weitere Felder aufnehmen, werden diese Felder von Urchin bei der Verarbeitung ignoriert. Da sich die Protokollierung nicht benötigter Felder jedoch auf die Größe Ihrer Protokolldateien auswirkt, ist es am besten, nur die von Urchin benötigten Felder aufzunehmen. <p class="line862">1. Starten Sie das Verwaltungstool der IIS-Dienste. Klicken Sie dazu auf "Start" -&gt; "Programme" -&gt; "Verwaltung" -&gt; "Computerverwaltung". <p class="line874">2. Erweitern Sie "Dienste und Anwendungen" und wählen Sie "Internetinformationsdienste". Daraufhin sollte eine Liste mit Websites angezeigt werden (außer bei Windows 2003 Server, wo Sie noch den Ordner "Websites" erweitern müssen, um eine Liste der Websites zu erhalten). <p class="line874">3. Klicken Sie mit der rechten Maustaste auf den Eintrag für die Website, die Sie ändern möchten, und wählen Sie "Eigenschaften". <p class="line874">4. Wählen Sie die Registerkarte "Website" und aktivieren Sie gegebenenfalls im Abschnitt unten in diesem Fenster, das Kontrollkästchen "Protokollierung aktivieren". Wählen Sie dann im Dropdown-Menü "Aktives Protokollformat" die Option "W3C-erweitert". <p class="line874">5. Klicken Sie neben dem Feld "Aktives Protokollformat" auf die Schaltfläche "Eigenschaften". <p class="line874">6. Wählen Sie die Registerkarte "Erweiterte Eigenschaften". <p class="line874">7. Aktivieren Sie die Kontrollkästchen für die folgenden Felder: <ul><li>Datum [ Datum ] </li><li>Uhrzeit [ Uhrzeit ] </li><li>Client-IP-Adresse [ c-ip ] </li><li>Benutzername [ cs-Benutzername ] </li><li>Methode [ cs-Methode ] </li><li>URI-Stamm [ cs-uri-Stamm ] </li><li>URI-Abfrage [ cs-uri-Abfrage ] </li><li>Protokollstatus [ sc-Status ] </li><li>Gesendete Bytes [ sc-Bytes ] </li><li>Benutzer-Agent [ cs[Benutzer-Agent] ] </li><li>Referenz [ cs[Referenz] ] </li><li>Cookie [ cs[Cookie] ] (Dieses Feld ist nur für UTM-Tracking erforderlich) </li></ul><p class="line874">8. Stellen Sie sicher, dass das Kontrollkästchen "Prozessabrechnung" deaktiviert ist. Es würde keine nützlichen Informationen zu Webzugriffsaktivitäten liefern. <p class="line874">9. Wählen Sie zum Speichern Ihrer Einstellungen Apply und "OK" in jedem Fenster. <p class="line874">10. IIS muss nicht neu gestartet werden. Die Protokollierung sollte sofort mit Ihren neuen Einstellungen erfolgen. </div><div id="pagebottom"></div>
</div>


<div id="footer" style="clear: both; margin: 0; padding: 0; border-bottom:1px solid #CCC;"></div><div id="copyright" style="font-size: 70%; text-align: center;">&copy;2010 Google</div>
</body></html>