## Please edit system and help pages ONLY in the moinmaster wiki! For more
## information, please see MoinMaster:MoinPagesEditorGroup.
##acl MoinPagesEditorGroup:read,write,delete,revert All:read
##master-page:HelpTemplate
##master-date:Unknown-Date
#format wiki
#language en
'''Обзор фильтрации'''

''Статья предоставлена компанией'' ["Panalysis"]'', авторизованным консультантом по программному обеспечению Urchin ''

Фильтрация является важным понятием в Urchin 6. Фильтры позволяют контролировать отображение данных в отчетах Urchin. Это может предполагать как включение и исключение данных, так и более сложные модификации.

Обычно фильтры применяются в следующих целях:

  * Удаление с веб-сайта ваших собственных действий.
  * Создание отчетов, ограниченных определенной областью или каталогом веб-сайта.
  * Добавление имени домена в отчет "Самое популярное содержание".
  * Добавление параметров запроса URL в отчет "Самое популярное содержание".
Для фильтрации необходимо применить одно из пяти возможных действий к определенному полю в файле журнала или отчетах Urchin. К возможным действиям относятся следующие:

  * '''Исключить '''– удаление данных из отчетов.
  * '''Включить '''– показывать в отчетах не все, а лишь определенные данные.
  * '''Найти и заменить''' – замена одних данных другими.
  * '''Таблица поиска''' – добавление содержания в отчеты на основе внешней таблицы данных, например преобразование ?id=1 в ?id=My Home Page.
  * '''Расширенный''' – изменение данных путем их извлечения и комбинирования.
Для доступа к фильтрам необходимо войти в систему в качестве администратора. Выполнив вход, для создания фильтров нажмите на вкладку "Конфигурация" в правом верхнем углу экрана, а затем перейдите в раздел "Профили Urchin". Здесь можно добавить фильтр либо через Менеджер фильтров, либо отредактировав или создав профиль и добавив фильтр на вкладке "Фильтры" и нажав на знак плюса.

'''Последовательность фильтрации'''

В Urchin 6 фильтр можно назначить либо профилю, либо источнику журналов.

Urchin обрабатывает фильтры непосредственно перед созданием отчетов. Последовательность обработки фильтров в Urchin следующая:

Чтение необработанного файла журнала -> Создание полей файла журнала с пометкой "Raw" -> Преобразование этих полей в окончательные поля "Auto" -> Обработка фильтров в профиле -> Обработка фильтров в источнике журналов -> Отображение готового отчета.

Это означает, что фильтры можно использовать только для изменения данных, отображаемых в отчете. В большинстве фильтров используются поля "(Auto)", предназначенные для изменения данных, отображаемых в готовых отчетах. В некоторых случаях вам, разумеется, понадобится использовать поля "(Raw)", однако такая необходимость возникает редко.

Важно! Если используются фильтры разного типа, они будут применяться в следующем порядке:

  * расширенный, найти и заменить;
  * таблица поиска;
  * включить и исключить.

Если указано несколько фильтров одного типа, они обрабатываются в том же порядке, в котором связаны с источниками журналов через интерфейс администратора (или напрямую в базе данных). Каждый фильтр получает только те данные, которые остались после применения предыдущего.

Типичная ошибка – использование подряд сразу двух фильтров "Включить". Пример.

Фильтр 1: включить каталог /katalog/; фильтр 2: включить еще один каталог /drugoy\_katalog/

Поскольку страница не может находиться сразу в двух каталогах, в итоговом отчете будет показано 0 страниц. Это объясняется тем, что второй каталог получит только данные, находящиеся в каталоге /katalog. Поскольку второй фильтр включает только шаблон /drugoy\_katalog, будет показано 0 страниц, так как после использования первого фильтра ни одна страница не будет соответствовать заданному шаблону.

Правильным решением в этой ситуации будет использовать регулярное выражение, соответствующее обоим каталогам в одном фильтре. Пример: ^/(katalog|drugoy\_katalog)/.

'''Совет.''' Протестируйте шаблоны фильтрации в соответствующем отчете, прежде чем добавлять их в профиль Urchin через поле фильтра в верхней части отчета. Например, можно протестировать URL в отчете "Оптимизация содержания" -> "Эффективность содержания" -> "Самое популярное содержание".