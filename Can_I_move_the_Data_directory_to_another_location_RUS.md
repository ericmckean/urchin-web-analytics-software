## Please edit system and help pages ONLY in the moinmaster wiki! For more
## information, please see MoinMaster:MoinPagesEditorGroup.
##acl MoinPagesEditorGroup:read,write,delete,revert All:read
##master-page:HelpTemplate
##master-date:Unknown-Date
#format wiki
#language en


'''Можно ли перенести каталог данных в другое место?'''


'''Обзор'''

Каталог данных Urchin является подкаталогом по умолчанию корневого каталога программы Urchin. Местоположение этого каталога изменить очень легко: для этого нужно отредактировать файл ~urchin/etc/urchin.conf и вручную перенести каталог ~urchin/data в нужное место. Следует помнить, что это может привести к прекращению действия текущей лицензии. В этом случае вам нужно будет связаться с авторизованным консультантом по программному обеспечению Urchin и запросить смену серийного номера.


Процедура перемещения каталога данных:

Место, где Urchin хранит отчетные данные, можно изменить в файле urchin.conf. Он расположен в каталоге etc главного каталога установки Urchin.

'''Для систем на базе UNIX:'''

  1. Откройте командную оболочку в качестве пользователя, установившего Urchin.
> 2. Перейдите в каталог, в который была выполнена установка Urchin.
> 3. Остановите работу служб Urchin с помощью следующей команды: bin/urchinctl stop.
> 4. В текстовом редакторе откройте файл urchin.conf из каталога etc дистрибутива Urchin.
> 5. Откомментируйте следующую строку, удалив первый символ '#':
    1. ataDirectory: ./data/, и укажите полный путь к каталогу, который необходимо использовать вместо каталога по умолчанию, например:
> > dataDirectory: /bigdisk/urchin/data/

> 6. При необходимости создайте новый каталог данных. '''Важное примечание.''' Этот каталог должен быть доступен для чтения и записи пользователю, в аккаунте которого выполняется Urchin.
> 7. Скопируйте имеющиеся данные в новый каталог. Чтобы удостовериться, что все разрешения и данные сохранены должным образом, рекомендуем использовать следующую команду:
> > cd data; tar cf - . | (cd /bigdisk/urchin/data; tar xpf -)

> 8. Переименуйте каталог данных в data.old. Если хотите, можете совсем удалить его, однако сначала следует убедиться, что все работает правильно.
> 9. Чтобы облегчить администрирование, можно создать в главном каталоге Urchin символьную ссылку, указывающую на новое местоположение, например:
> > ln -s /bigdisk/urchin/data ./data
  1. . Снова запустите службы Urchin с помощью следующей команды: bin/urchinctl start.
  1. . Войдите в Urchin в качестве администратора. Вы увидите экран с лицензией на Urchin. Просто нажмите на ссылку Reactivate License (Повторно активировать лицензию) – и процедура перемещения будет завершена.

'''Для систем на базе Windows:'''

  1. Остановите работу служб Urchin: "Пуск" -> "Программы" -> Urchin -> "Отключить службы Urchin".

> 2. Откройте Проводник Windows и перейдите к каталогу etc в дистрибутиве Urchin. Путь по умолчанию: C:\Program Files\Urchin\etc.
> 3. Откройте файл urchin.conf в текстовом редакторе.
> 4. Откомментируйте следующую строку, удалив первый символ '#':
    1. ataDirectory: ./data/, и укажите имя диска и путь, которые необходимо использовать вместо папки по умолчанию, например:
> > dataDirectory: E:\Urchin\data

> 5. При необходимости создайте новую папку данных. Важное примечание. Необходимо разрешить службам Urchin доступ к этой папке для чтения и записи.
> 6. Скопируйте содержимое папки данных в новую папку.
> 7. Переименуйте каталог данных в data.old. Если хотите, можете совсем удалить его, однако сначала следует убедиться, что все работает правильно.
> 8. Снова запустите службы Urchin: "Пуск" -> "Программы" -> Urchin -> "Включить службы Urchin".

'''Примечания'''

Для предотвращения взлома в системах на базе UNIX лицензирование реализовано таким образом, что перемещение каталога данных Urchin потребует повторной активации лицензии Urchin. Однако эта операция максимально упрощена: нужно всего лишь войти в систему в качестве администратора Urchin и нажать на ссылку "Повторно активировать лицензию".