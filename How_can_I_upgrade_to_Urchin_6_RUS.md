## Please edit system and help pages ONLY in the moinmaster wiki! For more
## information, please see MoinMaster:MoinPagesEditorGroup.
##acl MoinPagesEditorGroup:read,write,delete,revert All:read
##master-page:HelpTemplate
##master-date:Unknown-Date
#format wiki
#language en
'''Как выполнить обновление до версии Urchin 6?'''

> ''Данная статья была создана при содействии '' [:AnalyticsPros:Analytics Pros]'', авторизованного консультанта по программному обеспечению Urchin''

Выполнить обновление с Urchin 5 до версии Urchin 6 нельзя, однако вы можете перенести данные с Urchin 5 в Urchin 6. Следуйте инструкциям, приведенным в этой статье, чтобы перенести свои настройки (аккаунты, пользователей и т. д.) и отчетные данные.

> '''Важная информация'''

  * Не устанавливайте Urchin 6 в ту же папку, что и версию Urchin 5. Это нарушит работу обеих версий: Urchin 6 и Urchin 5. Также обратите внимание, что программа установки Urchin не выдает предупреждение при попытке установить Urchin 6 в ту же папку, что и Urchin 5.

  * Не рекомендуется выполнять перенос, если данные за эти месяцы имеются как в Urchin 5, так и в Urchin 6. Если в базе данных, куда вы пытаетесь выполнить импорт, уже содержатся данные за этот месяц, процесс импорта будет протекать гораздо медленнее, чем обычно.



'''Перенос данных конфигурации'''

1. Откройте папку Urchin 5 и запустите утилиту uconf-export. Эта утилита извлекает содержимое базы данных конфигурации (которая в Urchin 5 представляет собой простой неструктурированный файл). По умолчанию (без передачи аргументов) эта утилита отправляет текст на монитор (std out). Просто укажите с помощью аргумента -f имя файла, в который следует выводить данные. Примечание. Необходимо, чтобы к файлу вывода можно было получить доступ из папки установки Urchin 6.
```
uconf-export -f PATH+FILE_NAME
```
2. Войдите в папку установки Urchin 6 и выполните
```
uconf2sql -f PATH+FILE_NAME
```
(где PATH+FILE\_NAME – это файл, в который были экспортированы данные).

Это приведет к завершению процесса переноса данных конфигурации из Urchin 5 в Urchin 6.


'''Перенос отчетных данных'''

1. Откройте папку установки Urchin 5 и сохраните каталог Urchin5 BASE в месте, к которому вы можете получить доступ из папки установки Urchin 6. (Например, если вы используете версии Urchin 5 и 6 в ОС Windows, можно открыть общий доступ к каталогу Urchin 5, а затем подключить его в качестве диска в файловой системе Urchin 6.)

2. Откройте папку установки Urchin 6 и запустите утилиту convert-u5data, как показано ниже:

```
convert-u5data  [-a account] [-p PROFILE_NAME] -c PATH_2_U5_InstallDir
```

В результате все отчетные данные будут извлечены из файлов Urchin 5 и перенесены в Urchin 6.

Использование утилиты convert-u5data

  * Аргумент –a является необязательным; если он не используется, поиск профилей для переноса будет выполнен по всем аккаунтам.

  * Аргумент –p является необязательным; если он не используется, будет выполнен перенос всех профилей из аккаунтов, по которым выполнялся поиск.

  * Аргумент -d является необязательным; используется для запуска утилиты в режиме отладки(Urchin 6.6+).

  * Аргумент -z является необязательным; используется для преобразования архивных баз данных(Urchin 6.6+).

Ограничения по переносу данных в Urchin 6 описаны в разделе ["Картирование отчетных данных из Urchin 5 в Urchin 6"].

'''Примечание.''' Если вы изменили местоположение каталога данных Urchin, указав в файле /Urchin5\_Install\_Base/etc/urchin.conf другое местоположение вместо "./data", необходимо убедиться, что пользователь, выполняющий утилиту convert-u5data, может перейти по ''тому же самому пути'', что указан в файле urchin.conf.  Например, если вы задали в файле urchin.conf путь "D:\urchin5\_data\", то система, в которой выполняется утилита convert-u5data, будет искать данные Urchin 5 по адресу "D:\urchin5\_data\".  Если в системе, где выполняется эта команда, указанный путь не является допустимым, появится сообщение об ошибке: `Ошибка смены каталогов. Выход.`.  В таком случае рекомендуется скопировать папку данных Urchin 5 обратно в папку "data" в Urchin5\_Install\_Base" и обновить файл urchin.conf, указав "./data" в качестве местоположения для папки данных.

'''Важно!''' В случае сбоя процесса переноса удалите данные профиля Urchin 6 и восстановите его изначальное состояние с резервной копии, прежде чем предпринять еще одну попытку.