## Please edit system and help pages ONLY in the moinmaster wiki! For more
## information, please see MoinMaster:MoinPagesEditorGroup.
##acl MoinPagesEditorGroup:read,write,delete,revert All:read
##master-page:HelpTemplate
##master-date:Unknown-Date
#format wiki
#language en
'''Повторная обработка журналов'''


'''Обзор'''

Основаниями для повторной обработки данных журналов могут быть отключение сервера DNS во время обработки, неправильно примененные фильтры и т. д. В этой статье описана правильная процедура аннулирования изменений и повторной обработки данных журналов веб-сервера.

Обратите внимание на то, что повторная обработка журналов требует использования утилит Urchin, доступных только в оболочке командной строки. Выполнить данную процедуру исключительно через пользовательский интерфейс администрирования Urchin в Интернете невозможно.

'''Повторная обработка данных за один день'''

  * В интерфейсе администрирования Urchin выберите нужный профиль и выключите функцию "Отслеживание журнала" на вкладке "Хранение/БД". Чтобы сохранить изменение, нажмите "Обновить".
  * На вкладке "Источники журналов" проверьте список файлов, выбранных для повторной обработки. В данных журнала должны быть указаны только обращения за те дни, статистику по которым вы хотите изменить.
  * Вызовите командную оболочку в системе Urchin system и
```
cd /<URCHIN_DIR>/util
```
  * Запустите утилиту udb-sanitizer в каталоге/папке 'util' дистрибутива Urchin с помощью команды и введите следующую команду:udb-sanitizer -p profile-name -d YYYYMM 
}}},
  где YYYYMM – это год и месяц для того дня, данные за который необходимо обработать повторно.
 * Выберите вариант 5, "Обнулить данные за один или несколько дней". Утилита попросит указать нужный день, а затем обнулит статистику для него. Другие примеры использования утилиты udb-sanitizer приведены в разделе ["udb-sanitizer: работа с базами данных"].
 * Нажмите кнопку "Запустить сейчас" на вкладке "Запустить/запланировать пуск", чтобы повторно обработать данные журнала.
 * Измените источник журналов, восстановив исходное значение для параметра "Путь к файлу журнала".
 * На вкладке "Хранение/БД" в разделе редактирования профиля повторно активируйте функцию "Отслеживание журнала".

'''Повторная обработка данных за целый месяц'''

Процедура повторной обработки данных за целый месяц аналогична описанной выше схеме повторной обработки данных за один день; необходимо только задать другие варианты в утилите udb-sanitizer. Примеры такой обработки можно найти в статье ["udb-sanitizer: работа с базами данных"].```