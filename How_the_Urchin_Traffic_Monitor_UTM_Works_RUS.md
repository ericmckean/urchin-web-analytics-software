## Please edit system and help pages ONLY in the moinmaster wiki! For more
## information, please see MoinMaster:MoinPagesEditorGroup.
##acl MoinPagesEditorGroup:read,write,delete,revert All:read
##master-page:HelpTemplate
##master-date:Unknown-Date
#format wiki
#language en
'''Как работает Urchin Traffic Monitor (UTM)'''

'''Обзор'''

Инструмент Urchin Traffic Monitor (UTM), заявка на патент по которому ожидает рассмотрения, впервые был запущен в Urchin 4. Он был создан для максимально точного подсчета количества уникальных посетителей веб-сайта. Технология UTM особенно полезна для компаний, которые хотят получить максимально точное представление о поведении посетителей. Она позволяет объединить данные с клиентской стороны и со стороны сервера и одновременно обеспечивает максимальный контроль за информацией. С легкостью установив этот инструмент, владельцы компаний могут получить точные данные относительно количества уникальных посетителей и их путей перехода, статистику по количеству возвратов, например число новых и вернувшихся посетителей, а также данные по частоте посещения сайта. В последних версиях UTM также реализованы механизмы расширенного отслеживания кампаний.

Система Urchin Traffic Monitor состоит из двух компонентов: UTM Sensor, фрагмента кода, установленного в контенте веб-сайта, и UTM Engine, элемента, входящего в состав системы Urchin Engine, предназначенной для обработки журналов. UTM Sensor обеспечивает сбор данных на стороне клиента, которые затем передаются в Urchin и регистрируются для каждого просмотра страницы. Полученная таким образом информация объединяется с существующими данными на стороне сервера в UTM Engine, что позволяет получить максимально точное и полное представление об активности на веб-сайте.

UTM Sensor – это небольшой фрагмент кода JavaScript, который выполняет две важные функции. Во-первых, этот элемент позволяет нейтрализовать эффект кэширования. Для этого при каждом просмотре страницы он отправляет как минимум одно обращение на веб-серверы Google. Во-вторых, UTM Sensor задает уникальный идентификатор для каждого посетителя, используя "основные файлы cookie" на стороне клиента для отслеживания новых и вернувшихся посетителей. Идентификационный файл cookie – это специальный тег связи, который регистрируется только веб-сервером так же, как идентификаторы сеансов. Это не внешний файл cookie, который отправляет информацию за пределы системы в нарушение политик конфиденциальности.


UTM работает следующим образом. Веб-сервер выполняет две основные функции: отображение контента и ведение журнала. В контенте веб-сайта размещается UTM Sensor, фрагмент кода, который отсылается в браузер пользователя. UTM Sensor задает уникальные идентификаторы и отправляет дополнительный запрос на тот же веб-сервер. UTM Engine, составная часть системы обработки журналов в Urchin, использует данные из этого запроса для создания максимально точной и полной картины поведения посетителей сайта.

'''UTM Sensor'''

UTM Sensor обеспечивает максимальную точность и полноту данных в файле журнала, позволяя нейтрализовать эффект кэширования и использования прокси-серверов. Например, когда пользователь возвращается на ранее просмотренную страницу, контент страницы извлекается из кэша браузера. То же самое происходит и при кэшировании контента интернет-провайдером. Веб-сервер не получает информации об этом просмотре страницы. Однако UTM Sensor активирует дополнительное уникальное обращение, которое вызывает по крайней мере один небольшой запрос на веб-сервер. Эти данные записываются в файлах журнала, и таким образом регистрируется просмотр страницы.

![http://www.google.com/urchin/on-demand-collection.jpg](http://www.google.com/urchin/on-demand-collection.jpg)

Вторая важная функция UTM состоит в присваивании уникальных идентификаторов сеансам и уникальным посетителям. Благодаря комбинации файлов cookie для браузеров, заявка на патент по которой ожидает рассмотрения, UTM Sensor обнаруживает и запускает создание идентификаторов сеансов и уникальных посетителей, что позволяет осуществлять максимально точное отслеживание новых и вернувшихся посетителей вне зависимости от особенностей работы прокси-серверов интернет-провайдеров. Большинство интернет-провайдеров не присваивают каждому пользователю фиксированные IP-адреса и брандмауэры. С этим связаны неточности обычной системы отслеживания файлов журналов, в рамках которой IP-адрес используется как идентификатор пользователя.

UTM Sensor решает эту проблему, идентифицируя пользователей по файлам cookie вместо IP-адресов. Так, когда новый уникальный посетитель переходит на сайт через определенный брандмауэр и с определенным IP-адресом, при показе страницы в ее контенте размещается код UTM Sensor, который позволяет отправить идентификатор в браузер посетителя.

Когда этот посетитель возвращается на сайт, с каждым запросом на веб-сервер также отправляется уникальный идентификатор. Поэтому даже если посетителю присвоен другой IP-адрес, технология UTM позволяет точно определить этого посетителя по уникальному идентификатору. При этом эта технология позволяет не только нейтрализовать действие прокси-серверов, но и отслеживать посетителей, которые путешествуют, используя один ноутбук и услуги нескольких провайдеров.